import {
  __commonJS,
  require_react
} from "./chunk-MYQCFY5U.js";

// node_modules/react-avatar-edit/lib/react-avatar.js
var require_react_avatar = __commonJS({
  "node_modules/react-avatar-edit/lib/react-avatar.js"(exports, module) {
    !function(t, e) {
      "object" == typeof exports && "object" == typeof module ? module.exports = e(require_react()) : "function" == typeof define && define.amd ? define(["react"], e) : "object" == typeof exports ? exports.reactAvatar = e(require_react()) : t.reactAvatar = e(t.react);
    }(self, function(t) {
      return (() => {
        var e = { 303: (t2, e2, i2) => {
          t2.exports = i2(302), i2(200), i2(630), i2(16), i2(677), i2(635), i2(166), i2(140), i2(922);
        }, 635: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302), i2(677)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.ExifMap.prototype;
              e3.tags = { 256: "ImageWidth", 257: "ImageHeight", 258: "BitsPerSample", 259: "Compression", 262: "PhotometricInterpretation", 274: "Orientation", 277: "SamplesPerPixel", 284: "PlanarConfiguration", 530: "YCbCrSubSampling", 531: "YCbCrPositioning", 282: "XResolution", 283: "YResolution", 296: "ResolutionUnit", 273: "StripOffsets", 278: "RowsPerStrip", 279: "StripByteCounts", 513: "JPEGInterchangeFormat", 514: "JPEGInterchangeFormatLength", 301: "TransferFunction", 318: "WhitePoint", 319: "PrimaryChromaticities", 529: "YCbCrCoefficients", 532: "ReferenceBlackWhite", 306: "DateTime", 270: "ImageDescription", 271: "Make", 272: "Model", 305: "Software", 315: "Artist", 33432: "Copyright", 34665: { 36864: "ExifVersion", 40960: "FlashpixVersion", 40961: "ColorSpace", 40962: "PixelXDimension", 40963: "PixelYDimension", 42240: "Gamma", 37121: "ComponentsConfiguration", 37122: "CompressedBitsPerPixel", 37500: "MakerNote", 37510: "UserComment", 40964: "RelatedSoundFile", 36867: "DateTimeOriginal", 36868: "DateTimeDigitized", 36880: "OffsetTime", 36881: "OffsetTimeOriginal", 36882: "OffsetTimeDigitized", 37520: "SubSecTime", 37521: "SubSecTimeOriginal", 37522: "SubSecTimeDigitized", 33434: "ExposureTime", 33437: "FNumber", 34850: "ExposureProgram", 34852: "SpectralSensitivity", 34855: "PhotographicSensitivity", 34856: "OECF", 34864: "SensitivityType", 34865: "StandardOutputSensitivity", 34866: "RecommendedExposureIndex", 34867: "ISOSpeed", 34868: "ISOSpeedLatitudeyyy", 34869: "ISOSpeedLatitudezzz", 37377: "ShutterSpeedValue", 37378: "ApertureValue", 37379: "BrightnessValue", 37380: "ExposureBias", 37381: "MaxApertureValue", 37382: "SubjectDistance", 37383: "MeteringMode", 37384: "LightSource", 37385: "Flash", 37396: "SubjectArea", 37386: "FocalLength", 41483: "FlashEnergy", 41484: "SpatialFrequencyResponse", 41486: "FocalPlaneXResolution", 41487: "FocalPlaneYResolution", 41488: "FocalPlaneResolutionUnit", 41492: "SubjectLocation", 41493: "ExposureIndex", 41495: "SensingMethod", 41728: "FileSource", 41729: "SceneType", 41730: "CFAPattern", 41985: "CustomRendered", 41986: "ExposureMode", 41987: "WhiteBalance", 41988: "DigitalZoomRatio", 41989: "FocalLengthIn35mmFilm", 41990: "SceneCaptureType", 41991: "GainControl", 41992: "Contrast", 41993: "Saturation", 41994: "Sharpness", 41995: "DeviceSettingDescription", 41996: "SubjectDistanceRange", 42016: "ImageUniqueID", 42032: "CameraOwnerName", 42033: "BodySerialNumber", 42034: "LensSpecification", 42035: "LensMake", 42036: "LensModel", 42037: "LensSerialNumber" }, 34853: { 0: "GPSVersionID", 1: "GPSLatitudeRef", 2: "GPSLatitude", 3: "GPSLongitudeRef", 4: "GPSLongitude", 5: "GPSAltitudeRef", 6: "GPSAltitude", 7: "GPSTimeStamp", 8: "GPSSatellites", 9: "GPSStatus", 10: "GPSMeasureMode", 11: "GPSDOP", 12: "GPSSpeedRef", 13: "GPSSpeed", 14: "GPSTrackRef", 15: "GPSTrack", 16: "GPSImgDirectionRef", 17: "GPSImgDirection", 18: "GPSMapDatum", 19: "GPSDestLatitudeRef", 20: "GPSDestLatitude", 21: "GPSDestLongitudeRef", 22: "GPSDestLongitude", 23: "GPSDestBearingRef", 24: "GPSDestBearing", 25: "GPSDestDistanceRef", 26: "GPSDestDistance", 27: "GPSProcessingMethod", 28: "GPSAreaInformation", 29: "GPSDateStamp", 30: "GPSDifferential", 31: "GPSHPositioningError" }, 40965: { 1: "InteroperabilityIndex" } }, e3.tags.ifd1 = e3.tags, e3.stringValues = { ExposureProgram: { 0: "Undefined", 1: "Manual", 2: "Normal program", 3: "Aperture priority", 4: "Shutter priority", 5: "Creative program", 6: "Action program", 7: "Portrait mode", 8: "Landscape mode" }, MeteringMode: { 0: "Unknown", 1: "Average", 2: "CenterWeightedAverage", 3: "Spot", 4: "MultiSpot", 5: "Pattern", 6: "Partial", 255: "Other" }, LightSource: { 0: "Unknown", 1: "Daylight", 2: "Fluorescent", 3: "Tungsten (incandescent light)", 4: "Flash", 9: "Fine weather", 10: "Cloudy weather", 11: "Shade", 12: "Daylight fluorescent (D 5700 - 7100K)", 13: "Day white fluorescent (N 4600 - 5400K)", 14: "Cool white fluorescent (W 3900 - 4500K)", 15: "White fluorescent (WW 3200 - 3700K)", 17: "Standard light A", 18: "Standard light B", 19: "Standard light C", 20: "D55", 21: "D65", 22: "D75", 23: "D50", 24: "ISO studio tungsten", 255: "Other" }, Flash: { 0: "Flash did not fire", 1: "Flash fired", 5: "Strobe return light not detected", 7: "Strobe return light detected", 9: "Flash fired, compulsory flash mode", 13: "Flash fired, compulsory flash mode, return light not detected", 15: "Flash fired, compulsory flash mode, return light detected", 16: "Flash did not fire, compulsory flash mode", 24: "Flash did not fire, auto mode", 25: "Flash fired, auto mode", 29: "Flash fired, auto mode, return light not detected", 31: "Flash fired, auto mode, return light detected", 32: "No flash function", 65: "Flash fired, red-eye reduction mode", 69: "Flash fired, red-eye reduction mode, return light not detected", 71: "Flash fired, red-eye reduction mode, return light detected", 73: "Flash fired, compulsory flash mode, red-eye reduction mode", 77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected", 79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected", 89: "Flash fired, auto mode, red-eye reduction mode", 93: "Flash fired, auto mode, return light not detected, red-eye reduction mode", 95: "Flash fired, auto mode, return light detected, red-eye reduction mode" }, SensingMethod: { 1: "Undefined", 2: "One-chip color area sensor", 3: "Two-chip color area sensor", 4: "Three-chip color area sensor", 5: "Color sequential area sensor", 7: "Trilinear sensor", 8: "Color sequential linear sensor" }, SceneCaptureType: { 0: "Standard", 1: "Landscape", 2: "Portrait", 3: "Night scene" }, SceneType: { 1: "Directly photographed" }, CustomRendered: { 0: "Normal process", 1: "Custom process" }, WhiteBalance: { 0: "Auto white balance", 1: "Manual white balance" }, GainControl: { 0: "None", 1: "Low gain up", 2: "High gain up", 3: "Low gain down", 4: "High gain down" }, Contrast: { 0: "Normal", 1: "Soft", 2: "Hard" }, Saturation: { 0: "Normal", 1: "Low saturation", 2: "High saturation" }, Sharpness: { 0: "Normal", 1: "Soft", 2: "Hard" }, SubjectDistanceRange: { 0: "Unknown", 1: "Macro", 2: "Close view", 3: "Distant view" }, FileSource: { 3: "DSC" }, ComponentsConfiguration: { 0: "", 1: "Y", 2: "Cb", 3: "Cr", 4: "R", 5: "G", 6: "B" }, Orientation: { 1: "Original", 2: "Horizontal flip", 3: "Rotate 180° CCW", 4: "Vertical flip", 5: "Vertical flip + Rotate 90° CW", 6: "Rotate 90° CW", 7: "Horizontal flip + Rotate 90° CW", 8: "Rotate 90° CCW" } }, e3.getText = function(t4) {
                var e4 = this.get(t4);
                switch (t4) {
                  case "LightSource":
                  case "Flash":
                  case "MeteringMode":
                  case "ExposureProgram":
                  case "SensingMethod":
                  case "SceneCaptureType":
                  case "SceneType":
                  case "CustomRendered":
                  case "WhiteBalance":
                  case "GainControl":
                  case "Contrast":
                  case "Saturation":
                  case "Sharpness":
                  case "SubjectDistanceRange":
                  case "FileSource":
                  case "Orientation":
                    return this.stringValues[t4][e4];
                  case "ExifVersion":
                  case "FlashpixVersion":
                    if (!e4)
                      return;
                    return String.fromCharCode(e4[0], e4[1], e4[2], e4[3]);
                  case "ComponentsConfiguration":
                    if (!e4)
                      return;
                    return this.stringValues[t4][e4[0]] + this.stringValues[t4][e4[1]] + this.stringValues[t4][e4[2]] + this.stringValues[t4][e4[3]];
                  case "GPSVersionID":
                    if (!e4)
                      return;
                    return e4[0] + "." + e4[1] + "." + e4[2] + "." + e4[3];
                }
                return String(e4);
              }, e3.getAll = function() {
                var t4, e4, i3, r3 = {};
                for (t4 in this)
                  Object.prototype.hasOwnProperty.call(this, t4) && ((e4 = this[t4]) && e4.getAll ? r3[this.ifds[t4].name] = e4.getAll() : (i3 = this.tags[t4]) && (r3[i3] = this.getText(i3)));
                return r3;
              }, e3.getName = function(t4) {
                var e4 = this.tags[t4];
                return "object" == typeof e4 ? this.ifds[t4].name : e4;
              }, function() {
                var t4, i3, r3, n3 = e3.tags;
                for (t4 in n3)
                  if (Object.prototype.hasOwnProperty.call(n3, t4))
                    if (i3 = e3.ifds[t4])
                      for (t4 in r3 = n3[t4])
                        Object.prototype.hasOwnProperty.call(r3, t4) && (i3.map[r3[t4]] = Number(t4));
                    else
                      e3.map[n3[t4]] = Number(t4);
              }();
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 677: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302), i2(630)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              function e3(t4) {
                t4 && (Object.defineProperty(this, "map", { value: this.ifds[t4].map }), Object.defineProperty(this, "tags", { value: this.tags && this.tags[t4] || {} }));
              }
              e3.prototype.map = { Orientation: 274, Thumbnail: "ifd1", Blob: 513, Exif: 34665, GPSInfo: 34853, Interoperability: 40965 }, e3.prototype.ifds = { ifd1: { name: "Thumbnail", map: e3.prototype.map }, 34665: { name: "Exif", map: {} }, 34853: { name: "GPSInfo", map: {} }, 40965: { name: "Interoperability", map: {} } }, e3.prototype.get = function(t4) {
                return this[t4] || this[this.map[t4]];
              };
              var i3 = { 1: { getValue: function(t4, e4) {
                return t4.getUint8(e4);
              }, size: 1 }, 2: { getValue: function(t4, e4) {
                return String.fromCharCode(t4.getUint8(e4));
              }, size: 1, ascii: true }, 3: { getValue: function(t4, e4, i4) {
                return t4.getUint16(e4, i4);
              }, size: 2 }, 4: { getValue: function(t4, e4, i4) {
                return t4.getUint32(e4, i4);
              }, size: 4 }, 5: { getValue: function(t4, e4, i4) {
                return t4.getUint32(e4, i4) / t4.getUint32(e4 + 4, i4);
              }, size: 8 }, 9: { getValue: function(t4, e4, i4) {
                return t4.getInt32(e4, i4);
              }, size: 4 }, 10: { getValue: function(t4, e4, i4) {
                return t4.getInt32(e4, i4) / t4.getInt32(e4 + 4, i4);
              }, size: 8 } };
              function r3(t4, e4, r4, n4, a4, s2) {
                var o, h, l, c, d, u, g = i3[n4];
                if (g) {
                  if (!((h = (o = g.size * a4) > 4 ? e4 + t4.getUint32(r4 + 8, s2) : r4 + 8) + o > t4.byteLength)) {
                    if (1 === a4)
                      return g.getValue(t4, h, s2);
                    for (l = [], c = 0; c < a4; c += 1)
                      l[c] = g.getValue(t4, h + c * g.size, s2);
                    if (g.ascii) {
                      for (d = "", c = 0; c < l.length && "\0" !== (u = l[c]); c += 1)
                        d += u;
                      return d;
                    }
                    return l;
                  }
                  console.log("Invalid Exif data: Invalid data offset.");
                } else
                  console.log("Invalid Exif data: Invalid tag type.");
              }
              function n3(t4, e4, i4) {
                return (!t4 || t4[i4]) && (!e4 || true !== e4[i4]);
              }
              function a3(t4, e4, i4, a4, s2, o, h, l) {
                var c, d, u, g, f, p;
                if (i4 + 6 > t4.byteLength)
                  console.log("Invalid Exif data: Invalid directory offset.");
                else {
                  if (!((d = i4 + 2 + 12 * (c = t4.getUint16(i4, a4))) + 4 > t4.byteLength)) {
                    for (u = 0; u < c; u += 1)
                      g = i4 + 2 + 12 * u, n3(h, l, f = t4.getUint16(g, a4)) && (p = r3(t4, e4, g, t4.getUint16(g + 2, a4), t4.getUint32(g + 4, a4), a4), s2[f] = p, o && (o[f] = g));
                    return t4.getUint32(d, a4);
                  }
                  console.log("Invalid Exif data: Invalid directory size.");
                }
              }
              i3[7] = i3[1], t3.parseExifData = function(i4, r4, s2, o, h) {
                if (!h.disableExif) {
                  var l, c, d, u = h.includeExifTags, g = h.excludeExifTags || { 34665: { 37500: true } }, f = r4 + 10;
                  if (1165519206 === i4.getUint32(r4 + 4))
                    if (f + 8 > i4.byteLength)
                      console.log("Invalid Exif data: Invalid segment size.");
                    else if (0 === i4.getUint16(r4 + 8)) {
                      switch (i4.getUint16(f)) {
                        case 18761:
                          l = true;
                          break;
                        case 19789:
                          l = false;
                          break;
                        default:
                          return void console.log("Invalid Exif data: Invalid byte alignment marker.");
                      }
                      42 === i4.getUint16(f + 2, l) ? (c = i4.getUint32(f + 4, l), o.exif = new e3(), h.disableExifOffsets || (o.exifOffsets = new e3(), o.exifTiffOffset = f, o.exifLittleEndian = l), (c = a3(i4, f, f + c, l, o.exif, o.exifOffsets, u, g)) && n3(u, g, "ifd1") && (o.exif.ifd1 = c, o.exifOffsets && (o.exifOffsets.ifd1 = f + c)), Object.keys(o.exif.ifds).forEach(function(t4) {
                        !function(t5, i5, r5, n4, s3, o2, h2) {
                          var l2 = t5.exif[i5];
                          l2 && (t5.exif[i5] = new e3(i5), t5.exifOffsets && (t5.exifOffsets[i5] = new e3(i5)), a3(r5, n4, n4 + l2, s3, t5.exif[i5], t5.exifOffsets && t5.exifOffsets[i5], o2 && o2[i5], h2 && h2[i5]));
                        }(o, t4, i4, f, l, u, g);
                      }), (d = o.exif.ifd1) && d[513] && (d[513] = function(e4, i5, r5) {
                        if (r5) {
                          if (!(i5 + r5 > e4.byteLength))
                            return new Blob([t3.bufferSlice.call(e4.buffer, i5, i5 + r5)], { type: "image/jpeg" });
                          console.log("Invalid Exif data: Invalid thumbnail data.");
                        }
                      }(i4, f + d[513], d[514]))) : console.log("Invalid Exif data: Missing TIFF marker.");
                    } else
                      console.log("Invalid Exif data: Missing byte alignment offset.");
                }
              }, t3.metaDataParsers.jpeg[65505].push(t3.parseExifData), t3.exifWriters = { 274: function(t4, e4, i4) {
                var r4 = e4.exifOffsets[274];
                return r4 ? (new DataView(t4, r4 + 8, 2).setUint16(0, i4, e4.exifLittleEndian), t4) : t4;
              } }, t3.writeExifData = function(e4, i4, r4, n4) {
                return t3.exifWriters[i4.exif.map[r4]](e4, i4, n4);
              }, t3.ExifMap = e3;
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 16: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.global;
              e3.fetch && e3.Request && e3.Response && e3.Response.prototype.blob ? t3.fetchBlob = function(t4, i3, r3) {
                function n3(t5) {
                  return t5.blob();
                }
                if (e3.Promise && "function" != typeof i3)
                  return fetch(new Request(t4, i3)).then(n3);
                fetch(new Request(t4, r3)).then(n3).then(i3).catch(function(t5) {
                  i3(null, t5);
                });
              } : e3.XMLHttpRequest && "" === new XMLHttpRequest().responseType && (t3.fetchBlob = function(t4, i3, r3) {
                function n3(e4, i4) {
                  r3 = r3 || {};
                  var n4 = new XMLHttpRequest();
                  n4.open(r3.method || "GET", t4), r3.headers && Object.keys(r3.headers).forEach(function(t5) {
                    n4.setRequestHeader(t5, r3.headers[t5]);
                  }), n4.withCredentials = "include" === r3.credentials, n4.responseType = "blob", n4.onload = function() {
                    e4(n4.response);
                  }, n4.onerror = n4.onabort = n4.ontimeout = function(t5) {
                    e4 === i4 ? i4(null, t5) : i4(t5);
                  }, n4.send(r3.body);
                }
                return e3.Promise && "function" != typeof i3 ? (r3 = i3, new Promise(n3)) : n3(i3, i3);
              });
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 140: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302), i2(166)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.IptcMap.prototype;
              e3.tags = { 0: "ApplicationRecordVersion", 3: "ObjectTypeReference", 4: "ObjectAttributeReference", 5: "ObjectName", 7: "EditStatus", 8: "EditorialUpdate", 10: "Urgency", 12: "SubjectReference", 15: "Category", 20: "SupplementalCategories", 22: "FixtureIdentifier", 25: "Keywords", 26: "ContentLocationCode", 27: "ContentLocationName", 30: "ReleaseDate", 35: "ReleaseTime", 37: "ExpirationDate", 38: "ExpirationTime", 40: "SpecialInstructions", 42: "ActionAdvised", 45: "ReferenceService", 47: "ReferenceDate", 50: "ReferenceNumber", 55: "DateCreated", 60: "TimeCreated", 62: "DigitalCreationDate", 63: "DigitalCreationTime", 65: "OriginatingProgram", 70: "ProgramVersion", 75: "ObjectCycle", 80: "Byline", 85: "BylineTitle", 90: "City", 92: "Sublocation", 95: "State", 100: "CountryCode", 101: "Country", 103: "OriginalTransmissionReference", 105: "Headline", 110: "Credit", 115: "Source", 116: "CopyrightNotice", 118: "Contact", 120: "Caption", 121: "LocalCaption", 122: "Writer", 125: "RasterizedCaption", 130: "ImageType", 131: "ImageOrientation", 135: "LanguageIdentifier", 150: "AudioType", 151: "AudioSamplingRate", 152: "AudioSamplingResolution", 153: "AudioDuration", 154: "AudioOutcue", 184: "JobID", 185: "MasterDocumentID", 186: "ShortDocumentID", 187: "UniqueDocumentID", 188: "OwnerID", 200: "ObjectPreviewFileFormat", 201: "ObjectPreviewFileVersion", 202: "ObjectPreviewData", 221: "Prefs", 225: "ClassifyState", 228: "SimilarityIndex", 230: "DocumentNotes", 231: "DocumentHistory", 232: "ExifCameraInfo", 255: "CatalogSets" }, e3.stringValues = { 10: { 0: "0 (reserved)", 1: "1 (most urgent)", 2: "2", 3: "3", 4: "4", 5: "5 (normal urgency)", 6: "6", 7: "7", 8: "8 (least urgent)", 9: "9 (user-defined priority)" }, 75: { a: "Morning", b: "Both Morning and Evening", p: "Evening" }, 131: { L: "Landscape", P: "Portrait", S: "Square" } }, e3.getText = function(t4) {
                var e4 = this.get(t4), i3 = this.map[t4], r3 = this.stringValues[i3];
                return r3 ? r3[e4] : String(e4);
              }, e3.getAll = function() {
                var t4, e4, i3 = {};
                for (t4 in this)
                  Object.prototype.hasOwnProperty.call(this, t4) && (e4 = this.tags[t4]) && (i3[e4] = this.getText(e4));
                return i3;
              }, e3.getName = function(t4) {
                return this.tags[t4];
              }, function() {
                var t4, i3 = e3.tags, r3 = e3.map || {};
                for (t4 in i3)
                  Object.prototype.hasOwnProperty.call(i3, t4) && (r3[i3[t4]] = Number(t4));
              }();
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 166: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302), i2(630)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              function e3() {
              }
              function i3(t4, e4, i4, r4, n4) {
                return "binary" === e4.types[t4] ? new Blob([i4.buffer.slice(r4, r4 + n4)]) : "Uint16" === e4.types[t4] ? i4.getUint16(r4) : function(t5, e5, i5) {
                  for (var r5 = "", n5 = e5 + i5, a4 = e5; a4 < n5; a4 += 1)
                    r5 += String.fromCharCode(t5.getUint8(a4));
                  return r5;
                }(i4, r4, n4);
              }
              function r3(t4, e4) {
                return void 0 === t4 ? e4 : t4 instanceof Array ? (t4.push(e4), t4) : [t4, e4];
              }
              function n3(t4, e4, n4, a4, s3, o) {
                for (var h, l, c, d = e4 + n4, u = e4; u < d; )
                  28 === t4.getUint8(u) && 2 === t4.getUint8(u + 1) && (c = t4.getUint8(u + 2), s3 && !s3[c] || o && o[c] || (l = t4.getInt16(u + 3), h = i3(c, a4.iptc, t4, u + 5, l), a4.iptc[c] = r3(a4.iptc[c], h), a4.iptcOffsets && (a4.iptcOffsets[c] = u))), u += 1;
              }
              function a3(t4, e4) {
                return 943868237 === t4.getUint32(e4) && 1028 === t4.getUint16(e4 + 4);
              }
              function s2(t4, e4) {
                var i4 = t4.getUint8(e4 + 7);
                return i4 % 2 != 0 && (i4 += 1), 0 === i4 && (i4 = 4), i4;
              }
              e3.prototype.map = { ObjectName: 5 }, e3.prototype.types = { 0: "Uint16", 200: "Uint16", 201: "Uint16", 202: "binary" }, e3.prototype.get = function(t4) {
                return this[t4] || this[this.map[t4]];
              }, t3.parseIptcData = function(t4, i4, r4, o, h) {
                if (!h.disableIptc)
                  for (var l = i4 + r4; i4 + 8 < l; ) {
                    if (a3(t4, i4)) {
                      var c = s2(t4, i4), d = i4 + 8 + c;
                      if (d > l) {
                        console.log("Invalid IPTC data: Invalid segment offset.");
                        break;
                      }
                      var u = t4.getUint16(i4 + 6 + c);
                      if (i4 + u > l) {
                        console.log("Invalid IPTC data: Invalid segment size.");
                        break;
                      }
                      return o.iptc = new e3(), h.disableIptcOffsets || (o.iptcOffsets = new e3()), void n3(t4, d, u, o, h.includeIptcTags, h.excludeIptcTags || { 202: true });
                    }
                    i4 += 1;
                  }
              }, t3.metaDataParsers.jpeg[65517].push(t3.parseIptcData), t3.IptcMap = e3;
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 630: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.global, i3 = t3.transform, r3 = e3.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice), n3 = e3.ArrayBuffer && ArrayBuffer.prototype.slice || function(t4, e4) {
                e4 = e4 || this.byteLength - t4;
                var i4 = new Uint8Array(this, t4, e4), r4 = new Uint8Array(e4);
                return r4.set(i4), r4.buffer;
              }, a3 = { jpeg: { 65505: [], 65517: [] } };
              function s2(i4, s3, o2, h) {
                var l = this;
                function c(s4, c2) {
                  if (!(e3.DataView && r3 && i4 && i4.size >= 12 && "image/jpeg" === i4.type))
                    return s4(h);
                  var d = o2.maxMetaDataSize || 262144;
                  t3.readFile(r3.call(i4, 0, d), function(t4) {
                    var e4 = new DataView(t4);
                    if (65496 !== e4.getUint16(0))
                      return c2(new Error("Invalid JPEG file: Missing JPEG marker."));
                    for (var i5, r4, d2, u, g = 2, f = e4.byteLength - 4, p = g; g < f && ((i5 = e4.getUint16(g)) >= 65504 && i5 <= 65519 || 65534 === i5); ) {
                      if (g + (r4 = e4.getUint16(g + 2) + 2) > e4.byteLength) {
                        console.log("Invalid JPEG metadata: Invalid segment size.");
                        break;
                      }
                      if ((d2 = a3.jpeg[i5]) && !o2.disableMetaDataParsers)
                        for (u = 0; u < d2.length; u += 1)
                          d2[u].call(l, e4, g, r4, h, o2);
                      p = g += r4;
                    }
                    !o2.disableImageHead && p > 6 && (h.imageHead = n3.call(t4, 0, p)), s4(h);
                  }, c2, "readAsArrayBuffer") || s4(h);
                }
                return o2 = o2 || {}, e3.Promise && "function" != typeof s3 ? (h = o2 = s3 || {}, new Promise(c)) : (h = h || {}, c(s3, s3));
              }
              function o(t4, e4, i4) {
                return t4 && e4 && i4 ? new Blob([i4, r3.call(t4, e4.byteLength)], { type: "image/jpeg" }) : null;
              }
              t3.transform = function(r4, n4, a4, o2, h) {
                t3.requiresMetaData(n4) ? s2(o2, function(s3) {
                  s3 !== h && (e3.console && console.log(s3), s3 = h), i3.call(t3, r4, n4, a4, o2, s3);
                }, n4, h = h || {}) : i3.apply(t3, arguments);
              }, t3.blobSlice = r3, t3.bufferSlice = n3, t3.replaceHead = function(t4, i4, r4) {
                var n4 = { maxMetaDataSize: 256, disableMetaDataParsers: true };
                if (!r4 && e3.Promise)
                  return s2(t4, n4).then(function(e4) {
                    return o(t4, e4.imageHead, i4);
                  });
                s2(t4, function(e4) {
                  r4(o(t4, e4.imageHead, i4));
                }, n4);
              }, t3.parseMetaData = s2, t3.metaDataParsers = a3;
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 922: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302), i2(200), i2(630)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.transform, i3 = t3.requiresCanvas, r3 = t3.requiresMetaData, n3 = t3.transformCoordinates, a3 = t3.getTransformedOptions;
              function s2(e4, i4) {
                var r4 = e4 && e4.orientation;
                return true === r4 && !t3.orientation || 1 === r4 && t3.orientation || (!i4 || t3.orientation) && r4 > 1 && r4 < 9;
              }
              function o(t4, e4) {
                return t4 !== e4 && (1 === t4 && e4 > 1 && e4 < 9 || t4 > 1 && t4 < 9);
              }
              function h(t4, e4) {
                if (e4 > 1 && e4 < 9)
                  switch (t4) {
                    case 2:
                    case 4:
                      return e4 > 4;
                    case 5:
                    case 7:
                      return e4 % 2 == 0;
                    case 6:
                    case 8:
                      return 2 === e4 || 4 === e4 || 5 === e4 || 7 === e4;
                  }
                return false;
              }
              (function(t4) {
                if (t4.global.document) {
                  var e4 = document.createElement("img");
                  e4.onload = function() {
                    if (t4.orientation = 2 === e4.width && 3 === e4.height, t4.orientation) {
                      var i4 = t4.createCanvas(1, 1, true).getContext("2d");
                      i4.drawImage(e4, 1, 1, 1, 1, 0, 0, 1, 1), t4.orientationCropBug = "255,255,255,255" !== i4.getImageData(0, 0, 1, 1).data.toString();
                    }
                  }, e4.src = "data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=";
                }
              })(t3), t3.requiresCanvas = function(e4) {
                return s2(e4) || i3.call(t3, e4);
              }, t3.requiresMetaData = function(e4) {
                return s2(e4, true) || r3.call(t3, e4);
              }, t3.transform = function(i4, r4, n4, a4, s3) {
                e3.call(t3, i4, r4, function(e4, i5) {
                  if (i5) {
                    var r5 = t3.orientation && i5.exif && i5.exif.get("Orientation");
                    if (r5 > 4 && r5 < 9) {
                      var a5 = i5.originalWidth, s4 = i5.originalHeight;
                      i5.originalWidth = s4, i5.originalHeight = a5;
                    }
                  }
                  n4(e4, i5);
                }, a4, s3);
              }, t3.getTransformedOptions = function(e4, i4, r4) {
                var n4 = a3.call(t3, e4, i4), s3 = r4.exif && r4.exif.get("Orientation"), l = n4.orientation, c = t3.orientation && s3;
                if (true === l && (l = s3), !o(l, c))
                  return n4;
                var d = n4.top, u = n4.right, g = n4.bottom, f = n4.left, p = {};
                for (var m in n4)
                  Object.prototype.hasOwnProperty.call(n4, m) && (p[m] = n4[m]);
                if (p.orientation = l, (l > 4 && !(c > 4) || l < 5 && c > 4) && (p.maxWidth = n4.maxHeight, p.maxHeight = n4.maxWidth, p.minWidth = n4.minHeight, p.minHeight = n4.minWidth, p.sourceWidth = n4.sourceHeight, p.sourceHeight = n4.sourceWidth), c > 1) {
                  switch (c) {
                    case 2:
                      u = n4.left, f = n4.right;
                      break;
                    case 3:
                      d = n4.bottom, u = n4.left, g = n4.top, f = n4.right;
                      break;
                    case 4:
                      d = n4.bottom, g = n4.top;
                      break;
                    case 5:
                      d = n4.left, u = n4.bottom, g = n4.right, f = n4.top;
                      break;
                    case 6:
                      d = n4.left, u = n4.top, g = n4.right, f = n4.bottom;
                      break;
                    case 7:
                      d = n4.right, u = n4.top, g = n4.left, f = n4.bottom;
                      break;
                    case 8:
                      d = n4.right, u = n4.bottom, g = n4.left, f = n4.top;
                  }
                  if (h(l, c)) {
                    var v = d, y = u;
                    d = g, u = f, g = v, f = y;
                  }
                }
                switch (p.top = d, p.right = u, p.bottom = g, p.left = f, l) {
                  case 2:
                    p.right = f, p.left = u;
                    break;
                  case 3:
                    p.top = g, p.right = f, p.bottom = d, p.left = u;
                    break;
                  case 4:
                    p.top = g, p.bottom = d;
                    break;
                  case 5:
                    p.top = f, p.right = g, p.bottom = u, p.left = d;
                    break;
                  case 6:
                    p.top = u, p.right = g, p.bottom = f, p.left = d;
                    break;
                  case 7:
                    p.top = u, p.right = d, p.bottom = f, p.left = g;
                    break;
                  case 8:
                    p.top = f, p.right = d, p.bottom = u, p.left = g;
                }
                return p;
              }, t3.transformCoordinates = function(e4, i4, r4) {
                n3.call(t3, e4, i4, r4);
                var a4 = i4.orientation, s3 = t3.orientation && r4.exif && r4.exif.get("Orientation");
                if (o(a4, s3)) {
                  var l = e4.getContext("2d"), c = e4.width, d = e4.height, u = c, g = d;
                  switch ((a4 > 4 && !(s3 > 4) || a4 < 5 && s3 > 4) && (e4.width = d, e4.height = c), a4 > 4 && (u = d, g = c), s3) {
                    case 2:
                      l.translate(u, 0), l.scale(-1, 1);
                      break;
                    case 3:
                      l.translate(u, g), l.rotate(Math.PI);
                      break;
                    case 4:
                      l.translate(0, g), l.scale(1, -1);
                      break;
                    case 5:
                      l.rotate(-0.5 * Math.PI), l.scale(-1, 1);
                      break;
                    case 6:
                      l.rotate(-0.5 * Math.PI), l.translate(-u, 0);
                      break;
                    case 7:
                      l.rotate(-0.5 * Math.PI), l.translate(-u, g), l.scale(1, -1);
                      break;
                    case 8:
                      l.rotate(0.5 * Math.PI), l.translate(0, -g);
                  }
                  switch (h(a4, s3) && (l.translate(u, g), l.rotate(Math.PI)), a4) {
                    case 2:
                      l.translate(c, 0), l.scale(-1, 1);
                      break;
                    case 3:
                      l.translate(c, d), l.rotate(Math.PI);
                      break;
                    case 4:
                      l.translate(0, d), l.scale(1, -1);
                      break;
                    case 5:
                      l.rotate(0.5 * Math.PI), l.scale(1, -1);
                      break;
                    case 6:
                      l.rotate(0.5 * Math.PI), l.translate(0, -d);
                      break;
                    case 7:
                      l.rotate(0.5 * Math.PI), l.translate(c, -d), l.scale(-1, 1);
                      break;
                    case 8:
                      l.rotate(-0.5 * Math.PI), l.translate(-c, 0);
                  }
                }
              };
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 200: (t2, e2, i2) => {
          var r2, n2, a2;
          !function(s) {
            "use strict";
            n2 = [i2(302)], void 0 === (a2 = "function" == typeof (r2 = function(t3) {
              var e3 = t3.transform;
              t3.createCanvas = function(e4, i3, r3) {
                if (r3 && t3.global.OffscreenCanvas)
                  return new OffscreenCanvas(e4, i3);
                var n3 = document.createElement("canvas");
                return n3.width = e4, n3.height = i3, n3;
              }, t3.transform = function(i3, r3, n3, a3, s2) {
                e3.call(t3, t3.scale(i3, r3, s2), r3, n3, a3, s2);
              }, t3.transformCoordinates = function() {
              }, t3.getTransformedOptions = function(t4, e4) {
                var i3, r3, n3, a3, s2 = e4.aspectRatio;
                if (!s2)
                  return e4;
                for (r3 in i3 = {}, e4)
                  Object.prototype.hasOwnProperty.call(e4, r3) && (i3[r3] = e4[r3]);
                return i3.crop = true, (n3 = t4.naturalWidth || t4.width) / (a3 = t4.naturalHeight || t4.height) > s2 ? (i3.maxWidth = a3 * s2, i3.maxHeight = a3) : (i3.maxWidth = n3, i3.maxHeight = n3 / s2), i3;
              }, t3.drawImage = function(t4, e4, i3, r3, n3, a3, s2, o, h) {
                var l = e4.getContext("2d");
                return false === h.imageSmoothingEnabled ? (l.msImageSmoothingEnabled = false, l.imageSmoothingEnabled = false) : h.imageSmoothingQuality && (l.imageSmoothingQuality = h.imageSmoothingQuality), l.drawImage(t4, i3, r3, n3, a3, 0, 0, s2, o), l;
              }, t3.requiresCanvas = function(t4) {
                return t4.canvas || t4.crop || !!t4.aspectRatio;
              }, t3.scale = function(e4, i3, r3) {
                i3 = i3 || {}, r3 = r3 || {};
                var n3, a3, s2, o, h, l, c, d, u, g, f, p, m = e4.getContext || t3.requiresCanvas(i3) && !!t3.global.HTMLCanvasElement, v = e4.naturalWidth || e4.width, y = e4.naturalHeight || e4.height, b = v, C = y;
                function _() {
                  var t4 = Math.max((s2 || b) / b, (o || C) / C);
                  t4 > 1 && (b *= t4, C *= t4);
                }
                function S() {
                  var t4 = Math.min((n3 || b) / b, (a3 || C) / C);
                  t4 < 1 && (b *= t4, C *= t4);
                }
                if (m && (c = (i3 = t3.getTransformedOptions(e4, i3, r3)).left || 0, d = i3.top || 0, i3.sourceWidth ? (h = i3.sourceWidth, void 0 !== i3.right && void 0 === i3.left && (c = v - h - i3.right)) : h = v - c - (i3.right || 0), i3.sourceHeight ? (l = i3.sourceHeight, void 0 !== i3.bottom && void 0 === i3.top && (d = y - l - i3.bottom)) : l = y - d - (i3.bottom || 0), b = h, C = l), n3 = i3.maxWidth, a3 = i3.maxHeight, s2 = i3.minWidth, o = i3.minHeight, m && n3 && a3 && i3.crop ? (b = n3, C = a3, (f = h / l - n3 / a3) < 0 ? (l = a3 * h / n3, void 0 === i3.top && void 0 === i3.bottom && (d = (y - l) / 2)) : f > 0 && (h = n3 * l / a3, void 0 === i3.left && void 0 === i3.right && (c = (v - h) / 2))) : ((i3.contain || i3.cover) && (s2 = n3 = n3 || s2, o = a3 = a3 || o), i3.cover ? (S(), _()) : (_(), S())), m) {
                  if ((u = i3.pixelRatio) > 1 && (!e4.style.width || Math.floor(parseFloat(e4.style.width, 10)) !== Math.floor(v / u)) && (b *= u, C *= u), t3.orientationCropBug && !e4.getContext && (c || d || h !== v || l !== y) && (f = e4, e4 = t3.createCanvas(v, y, true), t3.drawImage(f, e4, 0, 0, v, y, v, y, i3)), (g = i3.downsamplingRatio) > 0 && g < 1 && b < h && C < l)
                    for (; h * g > b; )
                      p = t3.createCanvas(h * g, l * g, true), t3.drawImage(e4, p, c, d, h, l, p.width, p.height, i3), c = 0, d = 0, h = p.width, l = p.height, e4 = p;
                  return p = t3.createCanvas(b, C), t3.transformCoordinates(p, i3, r3), u > 1 && (p.style.width = p.width / u + "px"), t3.drawImage(e4, p, c, d, h, l, b, C, i3).setTransform(1, 0, 0, 1, 0, 0), p;
                }
                return e4.width = b, e4.height = C, e4;
              };
            }) ? r2.apply(e2, n2) : r2) || (t2.exports = a2);
          }();
        }, 302: function(t2, e2, i2) {
          var r2;
          !function(n2) {
            "use strict";
            var a2 = n2.URL || n2.webkitURL;
            function s(t3) {
              return !!a2 && a2.createObjectURL(t3);
            }
            function o(t3) {
              return !!a2 && a2.revokeObjectURL(t3);
            }
            function h(t3, e3) {
              !t3 || "blob:" !== t3.slice(0, 5) || e3 && e3.noRevoke || o(t3);
            }
            function l(t3, e3, i3, r3) {
              if (!n2.FileReader)
                return false;
              var a3 = new FileReader();
              a3.onload = function() {
                e3.call(a3, this.result);
              }, i3 && (a3.onabort = a3.onerror = function() {
                i3.call(a3, this.error);
              });
              var s2 = a3[r3 || "readAsDataURL"];
              return s2 ? (s2.call(a3, t3), a3) : void 0;
            }
            function c(t3, e3) {
              return Object.prototype.toString.call(e3) === "[object " + t3 + "]";
            }
            function d(t3, e3, i3) {
              function r3(e4, r4) {
                var a3, o2 = document.createElement("img");
                function u(t4, i4) {
                  e4 !== r4 ? t4 instanceof Error ? r4(t4) : ((i4 = i4 || {}).image = t4, e4(i4)) : e4 && e4(t4, i4);
                }
                function g(e5, r5) {
                  r5 && n2.console && console.log(r5), e5 && c("Blob", e5) ? a3 = s(t3 = e5) : (a3 = t3, i3 && i3.crossOrigin && (o2.crossOrigin = i3.crossOrigin)), o2.src = a3;
                }
                return o2.onerror = function(t4) {
                  h(a3, i3), r4 && r4.call(o2, t4);
                }, o2.onload = function() {
                  h(a3, i3);
                  var e5 = { originalWidth: o2.naturalWidth || o2.width, originalHeight: o2.naturalHeight || o2.height };
                  try {
                    d.transform(o2, i3, u, t3, e5);
                  } catch (t4) {
                    r4 && r4(t4);
                  }
                }, "string" == typeof t3 ? (d.requiresMetaData(i3) ? d.fetchBlob(t3, g, i3) : g(), o2) : c("Blob", t3) || c("File", t3) ? (a3 = s(t3)) ? (o2.src = a3, o2) : l(t3, function(t4) {
                  o2.src = t4;
                }, r4) : void 0;
              }
              return n2.Promise && "function" != typeof e3 ? (i3 = e3, new Promise(r3)) : r3(e3, e3);
            }
            d.requiresMetaData = function(t3) {
              return t3 && t3.meta;
            }, d.fetchBlob = function(t3, e3) {
              e3();
            }, d.transform = function(t3, e3, i3, r3, n3) {
              i3(t3, n3);
            }, d.global = n2, d.readFile = l, d.isInstanceOf = c, d.createObjectURL = s, d.revokeObjectURL = o, void 0 === (r2 = (function() {
              return d;
            }).call(e2, i2, e2, t2)) || (t2.exports = r2);
          }("undefined" != typeof window && window || this);
        }, 918: function(t2, e2) {
          var i2;
          (function() {
            var r2 = function(t3) {
              return t3 instanceof r2 ? t3 : this instanceof r2 ? void (this.EXIFwrapped = t3) : new r2(t3);
            };
            t2.exports && (e2 = t2.exports = r2), e2.EXIF = r2;
            var a2 = r2.Tags = { 36864: "ExifVersion", 40960: "FlashpixVersion", 40961: "ColorSpace", 40962: "PixelXDimension", 40963: "PixelYDimension", 37121: "ComponentsConfiguration", 37122: "CompressedBitsPerPixel", 37500: "MakerNote", 37510: "UserComment", 40964: "RelatedSoundFile", 36867: "DateTimeOriginal", 36868: "DateTimeDigitized", 37520: "SubsecTime", 37521: "SubsecTimeOriginal", 37522: "SubsecTimeDigitized", 33434: "ExposureTime", 33437: "FNumber", 34850: "ExposureProgram", 34852: "SpectralSensitivity", 34855: "ISOSpeedRatings", 34856: "OECF", 37377: "ShutterSpeedValue", 37378: "ApertureValue", 37379: "BrightnessValue", 37380: "ExposureBias", 37381: "MaxApertureValue", 37382: "SubjectDistance", 37383: "MeteringMode", 37384: "LightSource", 37385: "Flash", 37396: "SubjectArea", 37386: "FocalLength", 41483: "FlashEnergy", 41484: "SpatialFrequencyResponse", 41486: "FocalPlaneXResolution", 41487: "FocalPlaneYResolution", 41488: "FocalPlaneResolutionUnit", 41492: "SubjectLocation", 41493: "ExposureIndex", 41495: "SensingMethod", 41728: "FileSource", 41729: "SceneType", 41730: "CFAPattern", 41985: "CustomRendered", 41986: "ExposureMode", 41987: "WhiteBalance", 41988: "DigitalZoomRation", 41989: "FocalLengthIn35mmFilm", 41990: "SceneCaptureType", 41991: "GainControl", 41992: "Contrast", 41993: "Saturation", 41994: "Sharpness", 41995: "DeviceSettingDescription", 41996: "SubjectDistanceRange", 40965: "InteroperabilityIFDPointer", 42016: "ImageUniqueID" }, s = r2.TiffTags = { 256: "ImageWidth", 257: "ImageHeight", 34665: "ExifIFDPointer", 34853: "GPSInfoIFDPointer", 40965: "InteroperabilityIFDPointer", 258: "BitsPerSample", 259: "Compression", 262: "PhotometricInterpretation", 274: "Orientation", 277: "SamplesPerPixel", 284: "PlanarConfiguration", 530: "YCbCrSubSampling", 531: "YCbCrPositioning", 282: "XResolution", 283: "YResolution", 296: "ResolutionUnit", 273: "StripOffsets", 278: "RowsPerStrip", 279: "StripByteCounts", 513: "JPEGInterchangeFormat", 514: "JPEGInterchangeFormatLength", 301: "TransferFunction", 318: "WhitePoint", 319: "PrimaryChromaticities", 529: "YCbCrCoefficients", 532: "ReferenceBlackWhite", 306: "DateTime", 270: "ImageDescription", 271: "Make", 272: "Model", 305: "Software", 315: "Artist", 33432: "Copyright" }, o = r2.GPSTags = { 0: "GPSVersionID", 1: "GPSLatitudeRef", 2: "GPSLatitude", 3: "GPSLongitudeRef", 4: "GPSLongitude", 5: "GPSAltitudeRef", 6: "GPSAltitude", 7: "GPSTimeStamp", 8: "GPSSatellites", 9: "GPSStatus", 10: "GPSMeasureMode", 11: "GPSDOP", 12: "GPSSpeedRef", 13: "GPSSpeed", 14: "GPSTrackRef", 15: "GPSTrack", 16: "GPSImgDirectionRef", 17: "GPSImgDirection", 18: "GPSMapDatum", 19: "GPSDestLatitudeRef", 20: "GPSDestLatitude", 21: "GPSDestLongitudeRef", 22: "GPSDestLongitude", 23: "GPSDestBearingRef", 24: "GPSDestBearing", 25: "GPSDestDistanceRef", 26: "GPSDestDistance", 27: "GPSProcessingMethod", 28: "GPSAreaInformation", 29: "GPSDateStamp", 30: "GPSDifferential" }, h = r2.IFD1Tags = { 256: "ImageWidth", 257: "ImageHeight", 258: "BitsPerSample", 259: "Compression", 262: "PhotometricInterpretation", 273: "StripOffsets", 274: "Orientation", 277: "SamplesPerPixel", 278: "RowsPerStrip", 279: "StripByteCounts", 282: "XResolution", 283: "YResolution", 284: "PlanarConfiguration", 296: "ResolutionUnit", 513: "JpegIFOffset", 514: "JpegIFByteCount", 529: "YCbCrCoefficients", 530: "YCbCrSubSampling", 531: "YCbCrPositioning", 532: "ReferenceBlackWhite" }, l = r2.StringValues = { ExposureProgram: { 0: "Not defined", 1: "Manual", 2: "Normal program", 3: "Aperture priority", 4: "Shutter priority", 5: "Creative program", 6: "Action program", 7: "Portrait mode", 8: "Landscape mode" }, MeteringMode: { 0: "Unknown", 1: "Average", 2: "CenterWeightedAverage", 3: "Spot", 4: "MultiSpot", 5: "Pattern", 6: "Partial", 255: "Other" }, LightSource: { 0: "Unknown", 1: "Daylight", 2: "Fluorescent", 3: "Tungsten (incandescent light)", 4: "Flash", 9: "Fine weather", 10: "Cloudy weather", 11: "Shade", 12: "Daylight fluorescent (D 5700 - 7100K)", 13: "Day white fluorescent (N 4600 - 5400K)", 14: "Cool white fluorescent (W 3900 - 4500K)", 15: "White fluorescent (WW 3200 - 3700K)", 17: "Standard light A", 18: "Standard light B", 19: "Standard light C", 20: "D55", 21: "D65", 22: "D75", 23: "D50", 24: "ISO studio tungsten", 255: "Other" }, Flash: { 0: "Flash did not fire", 1: "Flash fired", 5: "Strobe return light not detected", 7: "Strobe return light detected", 9: "Flash fired, compulsory flash mode", 13: "Flash fired, compulsory flash mode, return light not detected", 15: "Flash fired, compulsory flash mode, return light detected", 16: "Flash did not fire, compulsory flash mode", 24: "Flash did not fire, auto mode", 25: "Flash fired, auto mode", 29: "Flash fired, auto mode, return light not detected", 31: "Flash fired, auto mode, return light detected", 32: "No flash function", 65: "Flash fired, red-eye reduction mode", 69: "Flash fired, red-eye reduction mode, return light not detected", 71: "Flash fired, red-eye reduction mode, return light detected", 73: "Flash fired, compulsory flash mode, red-eye reduction mode", 77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected", 79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected", 89: "Flash fired, auto mode, red-eye reduction mode", 93: "Flash fired, auto mode, return light not detected, red-eye reduction mode", 95: "Flash fired, auto mode, return light detected, red-eye reduction mode" }, SensingMethod: { 1: "Not defined", 2: "One-chip color area sensor", 3: "Two-chip color area sensor", 4: "Three-chip color area sensor", 5: "Color sequential area sensor", 7: "Trilinear sensor", 8: "Color sequential linear sensor" }, SceneCaptureType: { 0: "Standard", 1: "Landscape", 2: "Portrait", 3: "Night scene" }, SceneType: { 1: "Directly photographed" }, CustomRendered: { 0: "Normal process", 1: "Custom process" }, WhiteBalance: { 0: "Auto white balance", 1: "Manual white balance" }, GainControl: { 0: "None", 1: "Low gain up", 2: "High gain up", 3: "Low gain down", 4: "High gain down" }, Contrast: { 0: "Normal", 1: "Soft", 2: "Hard" }, Saturation: { 0: "Normal", 1: "Low saturation", 2: "High saturation" }, Sharpness: { 0: "Normal", 1: "Soft", 2: "Hard" }, SubjectDistanceRange: { 0: "Unknown", 1: "Macro", 2: "Close view", 3: "Distant view" }, FileSource: { 3: "DSC" }, Components: { 0: "", 1: "Y", 2: "Cb", 3: "Cr", 4: "R", 5: "G", 6: "B" } };
            function c(t3) {
              return !!t3.exifdata;
            }
            function d(t3, e3) {
              function i3(i4) {
                var n3 = u(i4);
                t3.exifdata = n3 || {};
                var a4 = function(t4) {
                  var e4 = new DataView(t4);
                  if (255 != e4.getUint8(0) || 216 != e4.getUint8(1))
                    return false;
                  for (var i5 = 2, r3 = t4.byteLength, n4 = function(t5, e5) {
                    return 56 === t5.getUint8(e5) && 66 === t5.getUint8(e5 + 1) && 73 === t5.getUint8(e5 + 2) && 77 === t5.getUint8(e5 + 3) && 4 === t5.getUint8(e5 + 4) && 4 === t5.getUint8(e5 + 5);
                  }; i5 < r3; ) {
                    if (n4(e4, i5)) {
                      var a5 = e4.getUint8(i5 + 7);
                      return a5 % 2 != 0 && (a5 += 1), 0 === a5 && (a5 = 4), f(t4, i5 + 8 + a5, e4.getUint16(i5 + 6 + a5));
                    }
                    i5++;
                  }
                }(i4);
                if (t3.iptcdata = a4 || {}, r2.isXmpEnabled) {
                  var s2 = function(t4) {
                    if ("DOMParser" in self) {
                      var e4 = new DataView(t4);
                      if (255 != e4.getUint8(0) || 216 != e4.getUint8(1))
                        return false;
                      for (var i5 = 2, r3 = t4.byteLength, n4 = new DOMParser(); i5 < r3 - 4; ) {
                        if ("http" == v(e4, i5, 4)) {
                          var a5 = i5 - 1, s3 = e4.getUint16(i5 - 2) - 1, o2 = v(e4, a5, s3), h2 = o2.indexOf("xmpmeta>") + 8, l2 = (o2 = o2.substring(o2.indexOf("<x:xmpmeta"), h2)).indexOf("x:xmpmeta") + 10;
                          return o2 = o2.slice(0, l2) + 'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" ' + o2.slice(l2), C(n4.parseFromString(o2, "text/xml"));
                        }
                        i5++;
                      }
                    }
                  }(i4);
                  t3.xmpdata = s2 || {};
                }
                e3 && e3.call(t3);
              }
              if (t3.src)
                if (/^data\:/i.test(t3.src))
                  i3(function(t4, e4) {
                    e4 = e4 || t4.match(/^data\:([^\;]+)\;base64,/im)[1] || "", t4 = t4.replace(/^data\:([^\;]+)\;base64,/gim, "");
                    for (var i4 = atob(t4), r3 = i4.length, n3 = new ArrayBuffer(r3), a4 = new Uint8Array(n3), s2 = 0; s2 < r3; s2++)
                      a4[s2] = i4.charCodeAt(s2);
                    return n3;
                  }(t3.src));
                else if (/^blob\:/i.test(t3.src))
                  (a3 = new FileReader()).onload = function(t4) {
                    i3(t4.target.result);
                  }, function(t4, e4) {
                    var i4 = new XMLHttpRequest();
                    i4.open("GET", t4, true), i4.responseType = "blob", i4.onload = function(t5) {
                      var e5;
                      200 != this.status && 0 !== this.status || (e5 = this.response, a3.readAsArrayBuffer(e5));
                    }, i4.send();
                  }(t3.src);
                else {
                  var n2 = new XMLHttpRequest();
                  n2.onload = function() {
                    if (200 != this.status && 0 !== this.status)
                      throw "Could not load image";
                    i3(n2.response), n2 = null;
                  }, n2.open("GET", t3.src, true), n2.responseType = "arraybuffer", n2.send(null);
                }
              else if (self.FileReader && (t3 instanceof self.Blob || t3 instanceof self.File)) {
                var a3;
                (a3 = new FileReader()).onload = function(t4) {
                  i3(t4.target.result);
                }, a3.readAsArrayBuffer(t3);
              }
            }
            function u(t3) {
              var e3 = new DataView(t3);
              if (255 != e3.getUint8(0) || 216 != e3.getUint8(1))
                return false;
              for (var i3 = 2, r3 = t3.byteLength; i3 < r3; ) {
                if (255 != e3.getUint8(i3))
                  return false;
                if (225 == e3.getUint8(i3 + 1))
                  return y(e3, i3 + 4, e3.getUint16(i3 + 2));
                i3 += 2 + e3.getUint16(i3 + 2);
              }
            }
            var g = { 120: "caption", 110: "credit", 25: "keywords", 55: "dateCreated", 80: "byline", 85: "bylineTitle", 122: "captionWriter", 105: "headline", 116: "copyright", 15: "category" };
            function f(t3, e3, i3) {
              for (var r3, n2, a3, s2, o2 = new DataView(t3), h2 = {}, l2 = e3; l2 < e3 + i3; )
                28 === o2.getUint8(l2) && 2 === o2.getUint8(l2 + 1) && (s2 = o2.getUint8(l2 + 2)) in g && (a3 = o2.getInt16(l2 + 3), n2 = g[s2], r3 = v(o2, l2 + 5, a3), h2.hasOwnProperty(n2) ? h2[n2] instanceof Array ? h2[n2].push(r3) : h2[n2] = [h2[n2], r3] : h2[n2] = r3), l2++;
              return h2;
            }
            function p(t3, e3, i3, r3, n2) {
              var a3, s2, o2 = t3.getUint16(i3, !n2), h2 = {};
              for (s2 = 0; s2 < o2; s2++)
                a3 = i3 + 12 * s2 + 2, h2[r3[t3.getUint16(a3, !n2)]] = m(t3, a3, e3, 0, n2);
              return h2;
            }
            function m(t3, e3, i3, r3, n2) {
              var a3, s2, o2, h2, l2, c2, d2 = t3.getUint16(e3 + 2, !n2), u2 = t3.getUint32(e3 + 4, !n2), g2 = t3.getUint32(e3 + 8, !n2) + i3;
              switch (d2) {
                case 1:
                case 7:
                  if (1 == u2)
                    return t3.getUint8(e3 + 8, !n2);
                  for (a3 = u2 > 4 ? g2 : e3 + 8, s2 = [], h2 = 0; h2 < u2; h2++)
                    s2[h2] = t3.getUint8(a3 + h2);
                  return s2;
                case 2:
                  return v(t3, a3 = u2 > 4 ? g2 : e3 + 8, u2 - 1);
                case 3:
                  if (1 == u2)
                    return t3.getUint16(e3 + 8, !n2);
                  for (a3 = u2 > 2 ? g2 : e3 + 8, s2 = [], h2 = 0; h2 < u2; h2++)
                    s2[h2] = t3.getUint16(a3 + 2 * h2, !n2);
                  return s2;
                case 4:
                  if (1 == u2)
                    return t3.getUint32(e3 + 8, !n2);
                  for (s2 = [], h2 = 0; h2 < u2; h2++)
                    s2[h2] = t3.getUint32(g2 + 4 * h2, !n2);
                  return s2;
                case 5:
                  if (1 == u2)
                    return l2 = t3.getUint32(g2, !n2), c2 = t3.getUint32(g2 + 4, !n2), (o2 = new Number(l2 / c2)).numerator = l2, o2.denominator = c2, o2;
                  for (s2 = [], h2 = 0; h2 < u2; h2++)
                    l2 = t3.getUint32(g2 + 8 * h2, !n2), c2 = t3.getUint32(g2 + 4 + 8 * h2, !n2), s2[h2] = new Number(l2 / c2), s2[h2].numerator = l2, s2[h2].denominator = c2;
                  return s2;
                case 9:
                  if (1 == u2)
                    return t3.getInt32(e3 + 8, !n2);
                  for (s2 = [], h2 = 0; h2 < u2; h2++)
                    s2[h2] = t3.getInt32(g2 + 4 * h2, !n2);
                  return s2;
                case 10:
                  if (1 == u2)
                    return t3.getInt32(g2, !n2) / t3.getInt32(g2 + 4, !n2);
                  for (s2 = [], h2 = 0; h2 < u2; h2++)
                    s2[h2] = t3.getInt32(g2 + 8 * h2, !n2) / t3.getInt32(g2 + 4 + 8 * h2, !n2);
                  return s2;
              }
            }
            function v(t3, e3, i3) {
              var r3 = "";
              for (n = e3; n < e3 + i3; n++)
                r3 += String.fromCharCode(t3.getUint8(n));
              return r3;
            }
            function y(t3, e3) {
              if ("Exif" != v(t3, e3, 4))
                return false;
              var i3, r3, n2, c2, d2, u2 = e3 + 6;
              if (18761 == t3.getUint16(u2))
                i3 = false;
              else {
                if (19789 != t3.getUint16(u2))
                  return false;
                i3 = true;
              }
              if (42 != t3.getUint16(u2 + 2, !i3))
                return false;
              var g2 = t3.getUint32(u2 + 4, !i3);
              if (g2 < 8)
                return false;
              if ((r3 = p(t3, u2, u2 + g2, s, i3)).ExifIFDPointer)
                for (n2 in c2 = p(t3, u2, u2 + r3.ExifIFDPointer, a2, i3)) {
                  switch (n2) {
                    case "LightSource":
                    case "Flash":
                    case "MeteringMode":
                    case "ExposureProgram":
                    case "SensingMethod":
                    case "SceneCaptureType":
                    case "SceneType":
                    case "CustomRendered":
                    case "WhiteBalance":
                    case "GainControl":
                    case "Contrast":
                    case "Saturation":
                    case "Sharpness":
                    case "SubjectDistanceRange":
                    case "FileSource":
                      c2[n2] = l[n2][c2[n2]];
                      break;
                    case "ExifVersion":
                    case "FlashpixVersion":
                      c2[n2] = String.fromCharCode(c2[n2][0], c2[n2][1], c2[n2][2], c2[n2][3]);
                      break;
                    case "ComponentsConfiguration":
                      c2[n2] = l.Components[c2[n2][0]] + l.Components[c2[n2][1]] + l.Components[c2[n2][2]] + l.Components[c2[n2][3]];
                  }
                  r3[n2] = c2[n2];
                }
              if (r3.GPSInfoIFDPointer)
                for (n2 in d2 = p(t3, u2, u2 + r3.GPSInfoIFDPointer, o, i3)) {
                  switch (n2) {
                    case "GPSVersionID":
                      d2[n2] = d2[n2][0] + "." + d2[n2][1] + "." + d2[n2][2] + "." + d2[n2][3];
                  }
                  r3[n2] = d2[n2];
                }
              return r3.thumbnail = function(t4, e4, i4, r4) {
                var n3 = function(t5, e5, i5) {
                  var r5 = t5.getUint16(e5, !i5);
                  return t5.getUint32(e5 + 2 + 12 * r5, !i5);
                }(t4, e4 + i4, r4);
                if (!n3)
                  return {};
                if (n3 > t4.byteLength)
                  return {};
                var a3 = p(t4, e4, e4 + n3, h, r4);
                if (a3.Compression)
                  switch (a3.Compression) {
                    case 6:
                      if (a3.JpegIFOffset && a3.JpegIFByteCount) {
                        var s2 = e4 + a3.JpegIFOffset, o2 = a3.JpegIFByteCount;
                        a3.blob = new Blob([new Uint8Array(t4.buffer, s2, o2)], { type: "image/jpeg" });
                      }
                      break;
                    case 1:
                      console.log("Thumbnail image format is TIFF, which is not implemented.");
                      break;
                    default:
                      console.log("Unknown thumbnail image format '%s'", a3.Compression);
                  }
                else
                  2 == a3.PhotometricInterpretation && console.log("Thumbnail image format is RGB, which is not implemented.");
                return a3;
              }(t3, u2, g2, i3), r3;
            }
            function b(t3) {
              var e3 = {};
              if (1 == t3.nodeType) {
                if (t3.attributes.length > 0) {
                  e3["@attributes"] = {};
                  for (var i3 = 0; i3 < t3.attributes.length; i3++) {
                    var r3 = t3.attributes.item(i3);
                    e3["@attributes"][r3.nodeName] = r3.nodeValue;
                  }
                }
              } else if (3 == t3.nodeType)
                return t3.nodeValue;
              if (t3.hasChildNodes())
                for (var n2 = 0; n2 < t3.childNodes.length; n2++) {
                  var a3 = t3.childNodes.item(n2), s2 = a3.nodeName;
                  if (null == e3[s2])
                    e3[s2] = b(a3);
                  else {
                    if (null == e3[s2].push) {
                      var o2 = e3[s2];
                      e3[s2] = [], e3[s2].push(o2);
                    }
                    e3[s2].push(b(a3));
                  }
                }
              return e3;
            }
            function C(t3) {
              try {
                var e3 = {};
                if (t3.children.length > 0)
                  for (var i3 = 0; i3 < t3.children.length; i3++) {
                    var r3 = t3.children.item(i3), n2 = r3.attributes;
                    for (var a3 in n2) {
                      var s2 = n2[a3], o2 = s2.nodeName, h2 = s2.nodeValue;
                      void 0 !== o2 && (e3[o2] = h2);
                    }
                    var l2 = r3.nodeName;
                    if (void 0 === e3[l2])
                      e3[l2] = b(r3);
                    else {
                      if (void 0 === e3[l2].push) {
                        var c2 = e3[l2];
                        e3[l2] = [], e3[l2].push(c2);
                      }
                      e3[l2].push(b(r3));
                    }
                  }
                else
                  e3 = t3.textContent;
                return e3;
              } catch (t4) {
                console.log(t4.message);
              }
            }
            r2.enableXmp = function() {
              r2.isXmpEnabled = true;
            }, r2.disableXmp = function() {
              r2.isXmpEnabled = false;
            }, r2.getData = function(t3, e3) {
              return !((self.Image && t3 instanceof self.Image || self.HTMLImageElement && t3 instanceof self.HTMLImageElement) && !t3.complete || (c(t3) ? e3 && e3.call(t3) : d(t3, e3), 0));
            }, r2.getTag = function(t3, e3) {
              if (c(t3))
                return t3.exifdata[e3];
            }, r2.getIptcTag = function(t3, e3) {
              if (c(t3))
                return t3.iptcdata[e3];
            }, r2.getAllTags = function(t3) {
              if (!c(t3))
                return {};
              var e3, i3 = t3.exifdata, r3 = {};
              for (e3 in i3)
                i3.hasOwnProperty(e3) && (r3[e3] = i3[e3]);
              return r3;
            }, r2.getAllIptcTags = function(t3) {
              if (!c(t3))
                return {};
              var e3, i3 = t3.iptcdata, r3 = {};
              for (e3 in i3)
                i3.hasOwnProperty(e3) && (r3[e3] = i3[e3]);
              return r3;
            }, r2.pretty = function(t3) {
              if (!c(t3))
                return "";
              var e3, i3 = t3.exifdata, r3 = "";
              for (e3 in i3)
                i3.hasOwnProperty(e3) && ("object" == typeof i3[e3] ? i3[e3] instanceof Number ? r3 += e3 + " : " + i3[e3] + " [" + i3[e3].numerator + "/" + i3[e3].denominator + "]\r\n" : r3 += e3 + " : [" + i3[e3].length + " values]\r\n" : r3 += e3 + " : " + i3[e3] + "\r\n");
              return r3;
            }, r2.readFromBinaryFile = function(t3) {
              return u(t3);
            }, void 0 === (i2 = (function() {
              return r2;
            }).apply(e2, [])) || (t2.exports = i2);
          }).call(this);
        }, 297: (e2) => {
          "use strict";
          e2.exports = t;
        } }, i = {};
        function r(t2) {
          if (i[t2])
            return i[t2].exports;
          var n2 = i[t2] = { exports: {} };
          return e[t2].call(n2.exports, n2, n2.exports, r), n2.exports;
        }
        r.n = (t2) => {
          var e2 = t2 && t2.__esModule ? () => t2.default : () => t2;
          return r.d(e2, { a: e2 }), e2;
        }, r.d = (t2, e2) => {
          for (var i2 in e2)
            r.o(e2, i2) && !r.o(t2, i2) && Object.defineProperty(t2, i2, { enumerable: true, get: e2[i2] });
        }, r.o = (t2, e2) => Object.prototype.hasOwnProperty.call(t2, e2), r.r = (t2) => {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t2, "__esModule", { value: true });
        };
        var a = {};
        return (() => {
          "use strict";
          r.r(a), r.d(a, { default: () => Ce });
          var t2 = r(297), e2 = r.n(t2), i2 = Math.PI / 180;
          const n2 = "undefined" != typeof global ? global : "undefined" != typeof window ? window : "undefined" != typeof WorkerGlobalScope ? self : {}, s = { _global: n2, version: "8.3.5", isBrowser: "undefined" != typeof window && ("[object Window]" === {}.toString.call(window) || "[object global]" === {}.toString.call(window)), isUnminified: /param/.test((function(t3) {
          }).toString()), dblClickWindow: 400, getAngle: (t3) => s.angleDeg ? t3 * i2 : t3, enableTrace: false, pointerEventsEnabled: true, autoDrawEnabled: true, hitOnDragEnabled: false, capturePointerEventsEnabled: false, _mouseListenClick: false, _touchListenClick: false, _pointerListenClick: false, _mouseInDblClickWindow: false, _touchInDblClickWindow: false, _pointerInDblClickWindow: false, _mouseDblClickPointerId: null, _touchDblClickPointerId: null, _pointerDblClickPointerId: null, pixelRatio: "undefined" != typeof window && window.devicePixelRatio || 1, dragDistance: 3, angleDeg: true, showWarnings: true, dragButtons: [0, 1], isDragging: () => s.DD.isDragging, isDragReady: () => !!s.DD.node, document: n2.document, _injectGlobal(t3) {
            n2.Konva = t3;
          } }, o = (t3) => {
            s[t3.prototype.getClassName()] = t3;
          };
          s._injectGlobal(s);
          class h {
            constructor(t3 = [1, 0, 0, 1, 0, 0]) {
              this.dirty = false, this.m = t3 && t3.slice() || [1, 0, 0, 1, 0, 0];
            }
            reset() {
              this.m[0] = 1, this.m[1] = 0, this.m[2] = 0, this.m[3] = 1, this.m[4] = 0, this.m[5] = 0;
            }
            copy() {
              return new h(this.m);
            }
            copyInto(t3) {
              t3.m[0] = this.m[0], t3.m[1] = this.m[1], t3.m[2] = this.m[2], t3.m[3] = this.m[3], t3.m[4] = this.m[4], t3.m[5] = this.m[5];
            }
            point(t3) {
              var e3 = this.m;
              return { x: e3[0] * t3.x + e3[2] * t3.y + e3[4], y: e3[1] * t3.x + e3[3] * t3.y + e3[5] };
            }
            translate(t3, e3) {
              return this.m[4] += this.m[0] * t3 + this.m[2] * e3, this.m[5] += this.m[1] * t3 + this.m[3] * e3, this;
            }
            scale(t3, e3) {
              return this.m[0] *= t3, this.m[1] *= t3, this.m[2] *= e3, this.m[3] *= e3, this;
            }
            rotate(t3) {
              var e3 = Math.cos(t3), i3 = Math.sin(t3), r2 = this.m[0] * e3 + this.m[2] * i3, n3 = this.m[1] * e3 + this.m[3] * i3, a2 = this.m[0] * -i3 + this.m[2] * e3, s2 = this.m[1] * -i3 + this.m[3] * e3;
              return this.m[0] = r2, this.m[1] = n3, this.m[2] = a2, this.m[3] = s2, this;
            }
            getTranslation() {
              return { x: this.m[4], y: this.m[5] };
            }
            skew(t3, e3) {
              var i3 = this.m[0] + this.m[2] * e3, r2 = this.m[1] + this.m[3] * e3, n3 = this.m[2] + this.m[0] * t3, a2 = this.m[3] + this.m[1] * t3;
              return this.m[0] = i3, this.m[1] = r2, this.m[2] = n3, this.m[3] = a2, this;
            }
            multiply(t3) {
              var e3 = this.m[0] * t3.m[0] + this.m[2] * t3.m[1], i3 = this.m[1] * t3.m[0] + this.m[3] * t3.m[1], r2 = this.m[0] * t3.m[2] + this.m[2] * t3.m[3], n3 = this.m[1] * t3.m[2] + this.m[3] * t3.m[3], a2 = this.m[0] * t3.m[4] + this.m[2] * t3.m[5] + this.m[4], s2 = this.m[1] * t3.m[4] + this.m[3] * t3.m[5] + this.m[5];
              return this.m[0] = e3, this.m[1] = i3, this.m[2] = r2, this.m[3] = n3, this.m[4] = a2, this.m[5] = s2, this;
            }
            invert() {
              var t3 = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]), e3 = this.m[3] * t3, i3 = -this.m[1] * t3, r2 = -this.m[2] * t3, n3 = this.m[0] * t3, a2 = t3 * (this.m[2] * this.m[5] - this.m[3] * this.m[4]), s2 = t3 * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);
              return this.m[0] = e3, this.m[1] = i3, this.m[2] = r2, this.m[3] = n3, this.m[4] = a2, this.m[5] = s2, this;
            }
            getMatrix() {
              return this.m;
            }
            setAbsolutePosition(t3, e3) {
              var i3 = this.m[0], r2 = this.m[1], n3 = this.m[2], a2 = this.m[3], s2 = this.m[4], o2 = (i3 * (e3 - this.m[5]) - r2 * (t3 - s2)) / (i3 * a2 - r2 * n3), h2 = (t3 - s2 - n3 * o2) / i3;
              return this.translate(h2, o2);
            }
            decompose() {
              var t3 = this.m[0], e3 = this.m[1], i3 = this.m[2], r2 = this.m[3], n3 = t3 * r2 - e3 * i3;
              let a2 = { x: this.m[4], y: this.m[5], rotation: 0, scaleX: 0, scaleY: 0, skewX: 0, skewY: 0 };
              if (0 != t3 || 0 != e3) {
                var s2 = Math.sqrt(t3 * t3 + e3 * e3);
                a2.rotation = e3 > 0 ? Math.acos(t3 / s2) : -Math.acos(t3 / s2), a2.scaleX = s2, a2.scaleY = n3 / s2, a2.skewX = (t3 * i3 + e3 * r2) / n3, a2.skewY = 0;
              } else if (0 != i3 || 0 != r2) {
                var o2 = Math.sqrt(i3 * i3 + r2 * r2);
                a2.rotation = Math.PI / 2 - (r2 > 0 ? Math.acos(-i3 / o2) : -Math.acos(i3 / o2)), a2.scaleX = n3 / o2, a2.scaleY = o2, a2.skewX = 0, a2.skewY = (t3 * i3 + e3 * r2) / n3;
              }
              return a2.rotation = m._getRotation(a2.rotation), a2;
            }
          }
          var l = Math.PI / 180, c = 180 / Math.PI, d = "Konva error: ", u = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 132, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 255, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 203], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [119, 128, 144], slategrey: [119, 128, 144], snow: [255, 255, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], transparent: [255, 255, 255, 0], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 5] }, g = /rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/, f = [];
          const p = "undefined" != typeof requestAnimationFrame && requestAnimationFrame || function(t3) {
            setTimeout(t3, 60);
          }, m = { _isElement: (t3) => !(!t3 || 1 != t3.nodeType), _isFunction: (t3) => !!(t3 && t3.constructor && t3.call && t3.apply), _isPlainObject: (t3) => !!t3 && t3.constructor === Object, _isArray: (t3) => "[object Array]" === Object.prototype.toString.call(t3), _isNumber: (t3) => "[object Number]" === Object.prototype.toString.call(t3) && !isNaN(t3) && isFinite(t3), _isString: (t3) => "[object String]" === Object.prototype.toString.call(t3), _isBoolean: (t3) => "[object Boolean]" === Object.prototype.toString.call(t3), isObject: (t3) => t3 instanceof Object, isValidSelector(t3) {
            if ("string" != typeof t3)
              return false;
            var e3 = t3[0];
            return "#" === e3 || "." === e3 || e3 === e3.toUpperCase();
          }, _sign: (t3) => 0 === t3 || t3 > 0 ? 1 : -1, requestAnimFrame(t3) {
            f.push(t3), 1 === f.length && p(function() {
              const t4 = f;
              f = [], t4.forEach(function(t5) {
                t5();
              });
            });
          }, createCanvasElement() {
            var t3 = document.createElement("canvas");
            try {
              t3.style = t3.style || {};
            } catch (t4) {
            }
            return t3;
          }, createImageElement: () => document.createElement("img"), _isInDocument(t3) {
            for (; t3 = t3.parentNode; )
              if (t3 == document)
                return true;
            return false;
          }, _urlToImage(t3, e3) {
            var i3 = m.createImageElement();
            i3.onload = function() {
              e3(i3);
            }, i3.src = t3;
          }, _rgbToHex: (t3, e3, i3) => ((1 << 24) + (t3 << 16) + (e3 << 8) + i3).toString(16).slice(1), _hexToRgb(t3) {
            t3 = t3.replace("#", "");
            var e3 = parseInt(t3, 16);
            return { r: e3 >> 16 & 255, g: e3 >> 8 & 255, b: 255 & e3 };
          }, getRandomColor() {
            for (var t3 = (16777215 * Math.random() << 0).toString(16); t3.length < 6; )
              t3 = "0" + t3;
            return "#" + t3;
          }, getRGB(t3) {
            var e3;
            return t3 in u ? { r: (e3 = u[t3])[0], g: e3[1], b: e3[2] } : "#" === t3[0] ? this._hexToRgb(t3.substring(1)) : "rgb(" === t3.substr(0, 4) ? (e3 = g.exec(t3.replace(/ /g, "")), { r: parseInt(e3[1], 10), g: parseInt(e3[2], 10), b: parseInt(e3[3], 10) }) : { r: 0, g: 0, b: 0 };
          }, colorToRGBA: (t3) => (t3 = t3 || "black", m._namedColorToRBA(t3) || m._hex3ColorToRGBA(t3) || m._hex6ColorToRGBA(t3) || m._rgbColorToRGBA(t3) || m._rgbaColorToRGBA(t3) || m._hslColorToRGBA(t3)), _namedColorToRBA(t3) {
            var e3 = u[t3.toLowerCase()];
            return e3 ? { r: e3[0], g: e3[1], b: e3[2], a: 1 } : null;
          }, _rgbColorToRGBA(t3) {
            if (0 === t3.indexOf("rgb(")) {
              var e3 = (t3 = t3.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);
              return { r: e3[0], g: e3[1], b: e3[2], a: 1 };
            }
          }, _rgbaColorToRGBA(t3) {
            if (0 === t3.indexOf("rgba(")) {
              var e3 = (t3 = t3.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((t4, e4) => "%" === t4.slice(-1) ? 3 === e4 ? parseInt(t4) / 100 : parseInt(t4) / 100 * 255 : Number(t4));
              return { r: e3[0], g: e3[1], b: e3[2], a: e3[3] };
            }
          }, _hex6ColorToRGBA(t3) {
            if ("#" === t3[0] && 7 === t3.length)
              return { r: parseInt(t3.slice(1, 3), 16), g: parseInt(t3.slice(3, 5), 16), b: parseInt(t3.slice(5, 7), 16), a: 1 };
          }, _hex3ColorToRGBA(t3) {
            if ("#" === t3[0] && 4 === t3.length)
              return { r: parseInt(t3[1] + t3[1], 16), g: parseInt(t3[2] + t3[2], 16), b: parseInt(t3[3] + t3[3], 16), a: 1 };
          }, _hslColorToRGBA(t3) {
            if (/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t3)) {
              const [e3, ...i3] = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t3), r2 = Number(i3[0]) / 360, n3 = Number(i3[1]) / 100, a2 = Number(i3[2]) / 100;
              let s2, o2, h2;
              if (0 === n3)
                return h2 = 255 * a2, { r: Math.round(h2), g: Math.round(h2), b: Math.round(h2), a: 1 };
              s2 = a2 < 0.5 ? a2 * (1 + n3) : a2 + n3 - a2 * n3;
              const l2 = 2 * a2 - s2, c2 = [0, 0, 0];
              for (let t4 = 0; t4 < 3; t4++)
                o2 = r2 + 1 / 3 * -(t4 - 1), o2 < 0 && o2++, o2 > 1 && o2--, h2 = 6 * o2 < 1 ? l2 + 6 * (s2 - l2) * o2 : 2 * o2 < 1 ? s2 : 3 * o2 < 2 ? l2 + (s2 - l2) * (2 / 3 - o2) * 6 : l2, c2[t4] = 255 * h2;
              return { r: Math.round(c2[0]), g: Math.round(c2[1]), b: Math.round(c2[2]), a: 1 };
            }
          }, haveIntersection: (t3, e3) => !(e3.x > t3.x + t3.width || e3.x + e3.width < t3.x || e3.y > t3.y + t3.height || e3.y + e3.height < t3.y), cloneObject(t3) {
            var e3 = {};
            for (var i3 in t3)
              this._isPlainObject(t3[i3]) ? e3[i3] = this.cloneObject(t3[i3]) : this._isArray(t3[i3]) ? e3[i3] = this.cloneArray(t3[i3]) : e3[i3] = t3[i3];
            return e3;
          }, cloneArray: (t3) => t3.slice(0), degToRad: (t3) => t3 * l, radToDeg: (t3) => t3 * c, _degToRad: (t3) => (m.warn("Util._degToRad is removed. Please use public Util.degToRad instead."), m.degToRad(t3)), _radToDeg: (t3) => (m.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."), m.radToDeg(t3)), _getRotation: (t3) => s.angleDeg ? m.radToDeg(t3) : t3, _capitalize: (t3) => t3.charAt(0).toUpperCase() + t3.slice(1), throw(t3) {
            throw new Error(d + t3);
          }, error(t3) {
            console.error(d + t3);
          }, warn(t3) {
            s.showWarnings && console.warn("Konva warning: " + t3);
          }, each(t3, e3) {
            for (var i3 in t3)
              e3(i3, t3[i3]);
          }, _inRange: (t3, e3, i3) => e3 <= t3 && t3 < i3, _getProjectionToSegment(t3, e3, i3, r2, n3, a2) {
            var s2, o2, h2, l2 = (t3 - i3) * (t3 - i3) + (e3 - r2) * (e3 - r2);
            if (0 == l2)
              s2 = t3, o2 = e3, h2 = (n3 - i3) * (n3 - i3) + (a2 - r2) * (a2 - r2);
            else {
              var c2 = ((n3 - t3) * (i3 - t3) + (a2 - e3) * (r2 - e3)) / l2;
              c2 < 0 ? (s2 = t3, o2 = e3, h2 = (t3 - n3) * (t3 - n3) + (e3 - a2) * (e3 - a2)) : c2 > 1 ? (s2 = i3, o2 = r2, h2 = (i3 - n3) * (i3 - n3) + (r2 - a2) * (r2 - a2)) : h2 = ((s2 = t3 + c2 * (i3 - t3)) - n3) * (s2 - n3) + ((o2 = e3 + c2 * (r2 - e3)) - a2) * (o2 - a2);
            }
            return [s2, o2, h2];
          }, _getProjectionToLine(t3, e3, i3) {
            var r2 = m.cloneObject(t3), n3 = Number.MAX_VALUE;
            return e3.forEach(function(a2, s2) {
              if (i3 || s2 !== e3.length - 1) {
                var o2 = e3[(s2 + 1) % e3.length], h2 = m._getProjectionToSegment(a2.x, a2.y, o2.x, o2.y, t3.x, t3.y), l2 = h2[0], c2 = h2[1], d2 = h2[2];
                d2 < n3 && (r2.x = l2, r2.y = c2, n3 = d2);
              }
            }), r2;
          }, _prepareArrayForTween(t3, e3, i3) {
            var r2, n3 = [], a2 = [];
            if (t3.length > e3.length) {
              var s2 = e3;
              e3 = t3, t3 = s2;
            }
            for (r2 = 0; r2 < t3.length; r2 += 2)
              n3.push({ x: t3[r2], y: t3[r2 + 1] });
            for (r2 = 0; r2 < e3.length; r2 += 2)
              a2.push({ x: e3[r2], y: e3[r2 + 1] });
            var o2 = [];
            return a2.forEach(function(t4) {
              var e4 = m._getProjectionToLine(t4, n3, i3);
              o2.push(e4.x), o2.push(e4.y);
            }), o2;
          }, _prepareToStringify(t3) {
            var e3;
            for (var i3 in t3.visitedByCircularReferenceRemoval = true, t3)
              if (t3.hasOwnProperty(i3) && t3[i3] && "object" == typeof t3[i3]) {
                if (e3 = Object.getOwnPropertyDescriptor(t3, i3), t3[i3].visitedByCircularReferenceRemoval || m._isElement(t3[i3])) {
                  if (!e3.configurable)
                    return null;
                  delete t3[i3];
                } else if (null === m._prepareToStringify(t3[i3])) {
                  if (!e3.configurable)
                    return null;
                  delete t3[i3];
                }
              }
            return delete t3.visitedByCircularReferenceRemoval, t3;
          }, _assign(t3, e3) {
            for (var i3 in e3)
              t3[i3] = e3[i3];
            return t3;
          }, _getFirstPointerId: (t3) => t3.touches ? t3.changedTouches[0].identifier : t3.pointerId || 999 };
          function v(t3) {
            return m._isString(t3) ? '"' + t3 + '"' : "[object Number]" === Object.prototype.toString.call(t3) || m._isBoolean(t3) ? t3 : Object.prototype.toString.call(t3);
          }
          function y() {
            if (s.isUnminified)
              return function(t3, e3) {
                return m._isNumber(t3) || m.warn(v(t3) + ' is a not valid value for "' + e3 + '" attribute. The value should be a number.'), t3;
              };
          }
          function b() {
            if (s.isUnminified)
              return function(t3, e3) {
                return m._isString(t3) || m.warn(v(t3) + ' is a not valid value for "' + e3 + '" attribute. The value should be a string.'), t3;
              };
          }
          function C() {
            if (s.isUnminified)
              return function(t3, e3) {
                const i3 = m._isString(t3), r2 = "[object CanvasGradient]" === Object.prototype.toString.call(t3) || t3 && t3.addColorStop;
                return i3 || r2 || m.warn(v(t3) + ' is a not valid value for "' + e3 + '" attribute. The value should be a string or a native gradient.'), t3;
              };
          }
          function _() {
            if (s.isUnminified)
              return function(t3, e3) {
                return true === t3 || false === t3 || m.warn(v(t3) + ' is a not valid value for "' + e3 + '" attribute. The value should be a boolean.'), t3;
              };
          }
          var S = "get", w = "set";
          const x = { addGetterSetter(t3, e3, i3, r2, n3) {
            x.addGetter(t3, e3, i3), x.addSetter(t3, e3, r2, n3), x.addOverloadedGetterSetter(t3, e3);
          }, addGetter(t3, e3, i3) {
            var r2 = S + m._capitalize(e3);
            t3.prototype[r2] = t3.prototype[r2] || function() {
              var t4 = this.attrs[e3];
              return void 0 === t4 ? i3 : t4;
            };
          }, addSetter(t3, e3, i3, r2) {
            var n3 = w + m._capitalize(e3);
            t3.prototype[n3] || x.overWriteSetter(t3, e3, i3, r2);
          }, overWriteSetter(t3, e3, i3, r2) {
            var n3 = w + m._capitalize(e3);
            t3.prototype[n3] = function(t4) {
              return i3 && null != t4 && (t4 = i3.call(this, t4, e3)), this._setAttr(e3, t4), r2 && r2.call(this), this;
            };
          }, addComponentsGetterSetter(t3, e3, i3, r2, n3) {
            var a2, o2, h2 = i3.length, l2 = m._capitalize, c2 = S + l2(e3), d2 = w + l2(e3);
            t3.prototype[c2] = function() {
              var t4 = {};
              for (a2 = 0; a2 < h2; a2++)
                t4[o2 = i3[a2]] = this.getAttr(e3 + l2(o2));
              return t4;
            };
            var u2 = function(t4) {
              if (s.isUnminified)
                return function(e4, i4) {
                  return m.isObject(e4) || m.warn(v(e4) + ' is a not valid value for "' + i4 + '" attribute. The value should be an object with properties ' + t4), e4;
                };
            }(i3);
            t3.prototype[d2] = function(t4) {
              var i4, a3 = this.attrs[e3];
              for (i4 in r2 && (t4 = r2.call(this, t4)), u2 && u2.call(this, t4, e3), t4)
                t4.hasOwnProperty(i4) && this._setAttr(e3 + l2(i4), t4[i4]);
              return this._fireChangeEvent(e3, a3, t4), n3 && n3.call(this), this;
            }, x.addOverloadedGetterSetter(t3, e3);
          }, addOverloadedGetterSetter(t3, e3) {
            var i3 = m._capitalize(e3), r2 = w + i3, n3 = S + i3;
            t3.prototype[e3] = function() {
              return arguments.length ? (this[r2](arguments[0]), this) : this[n3]();
            };
          }, addDeprecatedGetterSetter(t3, e3, i3, r2) {
            m.error("Adding deprecated " + e3);
            var n3 = S + m._capitalize(e3), a2 = e3 + " property is deprecated and will be removed soon. Look at Konva change log for more information.";
            t3.prototype[n3] = function() {
              m.error(a2);
              var t4 = this.attrs[e3];
              return void 0 === t4 ? i3 : t4;
            }, x.addSetter(t3, e3, r2, function() {
              m.error(a2);
            }), x.addOverloadedGetterSetter(t3, e3);
          }, backCompat(t3, e3) {
            m.each(e3, function(e4, i3) {
              var r2 = t3.prototype[i3], n3 = S + m._capitalize(e4), a2 = w + m._capitalize(e4);
              function s2() {
                r2.apply(this, arguments), m.error('"' + e4 + '" method is deprecated and will be removed soon. Use ""' + i3 + '" instead.');
              }
              t3.prototype[e4] = s2, t3.prototype[n3] = s2, t3.prototype[a2] = s2;
            });
          }, afterSetFilter() {
            this._filterUpToDate = false;
          } };
          function P(t3) {
            var e3, i3, r2 = [], n3 = t3.length, a2 = m;
            for (e3 = 0; e3 < n3; e3++)
              i3 = t3[e3], a2._isNumber(i3) ? i3 = Math.round(1e3 * i3) / 1e3 : a2._isString(i3) || (i3 += ""), r2.push(i3);
            return r2;
          }
          var A, k = ["arc", "arcTo", "beginPath", "bezierCurveTo", "clearRect", "clip", "closePath", "createLinearGradient", "createPattern", "createRadialGradient", "drawImage", "ellipse", "fill", "fillText", "getImageData", "createImageData", "lineTo", "moveTo", "putImageData", "quadraticCurveTo", "rect", "restore", "rotate", "save", "scale", "setLineDash", "setTransform", "stroke", "strokeText", "transform", "translate"];
          class E {
            constructor(t3) {
              this.canvas = t3, this._context = t3._canvas.getContext("2d"), s.enableTrace && (this.traceArr = [], this._enableTrace());
            }
            fillShape(t3) {
              t3.fillEnabled() && this._fill(t3);
            }
            _fill(t3) {
            }
            strokeShape(t3) {
              t3.hasStroke() && this._stroke(t3);
            }
            _stroke(t3) {
            }
            fillStrokeShape(t3) {
              t3.attrs.fillAfterStrokeEnabled ? (this.strokeShape(t3), this.fillShape(t3)) : (this.fillShape(t3), this.strokeShape(t3));
            }
            getTrace(t3, e3) {
              var i3, r2, n3, a2, s2 = this.traceArr, o2 = s2.length, h2 = "";
              for (i3 = 0; i3 < o2; i3++)
                (n3 = (r2 = s2[i3]).method) ? (a2 = r2.args, h2 += n3, t3 ? h2 += "()" : m._isArray(a2[0]) ? h2 += "([" + a2.join(",") + "])" : (e3 && (a2 = a2.map((t4) => "number" == typeof t4 ? Math.floor(t4) : t4)), h2 += "(" + a2.join(",") + ")")) : (h2 += r2.property, t3 || (h2 += "=" + r2.val)), h2 += ";";
              return h2;
            }
            clearTrace() {
              this.traceArr = [];
            }
            _trace(t3) {
              var e3 = this.traceArr;
              e3.push(t3), e3.length >= 100 && e3.shift();
            }
            reset() {
              var t3 = this.getCanvas().getPixelRatio();
              this.setTransform(1 * t3, 0, 0, 1 * t3, 0, 0);
            }
            getCanvas() {
              return this.canvas;
            }
            clear(t3) {
              var e3 = this.getCanvas();
              t3 ? this.clearRect(t3.x || 0, t3.y || 0, t3.width || 0, t3.height || 0) : this.clearRect(0, 0, e3.getWidth() / e3.pixelRatio, e3.getHeight() / e3.pixelRatio);
            }
            _applyLineCap(t3) {
              var e3 = t3.getLineCap();
              e3 && this.setAttr("lineCap", e3);
            }
            _applyOpacity(t3) {
              var e3 = t3.getAbsoluteOpacity();
              1 !== e3 && this.setAttr("globalAlpha", e3);
            }
            _applyLineJoin(t3) {
              var e3 = t3.attrs.lineJoin;
              e3 && this.setAttr("lineJoin", e3);
            }
            setAttr(t3, e3) {
              this._context[t3] = e3;
            }
            arc(t3, e3, i3, r2, n3, a2) {
              this._context.arc(t3, e3, i3, r2, n3, a2);
            }
            arcTo(t3, e3, i3, r2, n3) {
              this._context.arcTo(t3, e3, i3, r2, n3);
            }
            beginPath() {
              this._context.beginPath();
            }
            bezierCurveTo(t3, e3, i3, r2, n3, a2) {
              this._context.bezierCurveTo(t3, e3, i3, r2, n3, a2);
            }
            clearRect(t3, e3, i3, r2) {
              this._context.clearRect(t3, e3, i3, r2);
            }
            clip() {
              this._context.clip();
            }
            closePath() {
              this._context.closePath();
            }
            createImageData(t3, e3) {
              var i3 = arguments;
              return 2 === i3.length ? this._context.createImageData(t3, e3) : 1 === i3.length ? this._context.createImageData(t3) : void 0;
            }
            createLinearGradient(t3, e3, i3, r2) {
              return this._context.createLinearGradient(t3, e3, i3, r2);
            }
            createPattern(t3, e3) {
              return this._context.createPattern(t3, e3);
            }
            createRadialGradient(t3, e3, i3, r2, n3, a2) {
              return this._context.createRadialGradient(t3, e3, i3, r2, n3, a2);
            }
            drawImage(t3, e3, i3, r2, n3, a2, s2, o2, h2) {
              var l2 = arguments, c2 = this._context;
              3 === l2.length ? c2.drawImage(t3, e3, i3) : 5 === l2.length ? c2.drawImage(t3, e3, i3, r2, n3) : 9 === l2.length && c2.drawImage(t3, e3, i3, r2, n3, a2, s2, o2, h2);
            }
            ellipse(t3, e3, i3, r2, n3, a2, s2, o2) {
              this._context.ellipse(t3, e3, i3, r2, n3, a2, s2, o2);
            }
            isPointInPath(t3, e3) {
              return this._context.isPointInPath(t3, e3);
            }
            fill(t3) {
              t3 ? this._context.fill(t3) : this._context.fill();
            }
            fillRect(t3, e3, i3, r2) {
              this._context.fillRect(t3, e3, i3, r2);
            }
            strokeRect(t3, e3, i3, r2) {
              this._context.strokeRect(t3, e3, i3, r2);
            }
            fillText(t3, e3, i3, r2) {
              r2 ? this._context.fillText(t3, e3, i3, r2) : this._context.fillText(t3, e3, i3);
            }
            measureText(t3) {
              return this._context.measureText(t3);
            }
            getImageData(t3, e3, i3, r2) {
              return this._context.getImageData(t3, e3, i3, r2);
            }
            lineTo(t3, e3) {
              this._context.lineTo(t3, e3);
            }
            moveTo(t3, e3) {
              this._context.moveTo(t3, e3);
            }
            rect(t3, e3, i3, r2) {
              this._context.rect(t3, e3, i3, r2);
            }
            putImageData(t3, e3, i3) {
              this._context.putImageData(t3, e3, i3);
            }
            quadraticCurveTo(t3, e3, i3, r2) {
              this._context.quadraticCurveTo(t3, e3, i3, r2);
            }
            restore() {
              this._context.restore();
            }
            rotate(t3) {
              this._context.rotate(t3);
            }
            save() {
              this._context.save();
            }
            scale(t3, e3) {
              this._context.scale(t3, e3);
            }
            setLineDash(t3) {
              this._context.setLineDash ? this._context.setLineDash(t3) : "mozDash" in this._context ? this._context.mozDash = t3 : "webkitLineDash" in this._context && (this._context.webkitLineDash = t3);
            }
            getLineDash() {
              return this._context.getLineDash();
            }
            setTransform(t3, e3, i3, r2, n3, a2) {
              this._context.setTransform(t3, e3, i3, r2, n3, a2);
            }
            stroke(t3) {
              t3 ? this._context.stroke(t3) : this._context.stroke();
            }
            strokeText(t3, e3, i3, r2) {
              this._context.strokeText(t3, e3, i3, r2);
            }
            transform(t3, e3, i3, r2, n3, a2) {
              this._context.transform(t3, e3, i3, r2, n3, a2);
            }
            translate(t3, e3) {
              this._context.translate(t3, e3);
            }
            _enableTrace() {
              var t3, e3, i3 = this, r2 = k.length, n3 = this.setAttr, a2 = function(t4) {
                var r3, n4 = i3[t4];
                i3[t4] = function() {
                  return e3 = P(Array.prototype.slice.call(arguments, 0)), r3 = n4.apply(i3, arguments), i3._trace({ method: t4, args: e3 }), r3;
                };
              };
              for (t3 = 0; t3 < r2; t3++)
                a2(k[t3]);
              i3.setAttr = function() {
                n3.apply(i3, arguments);
                var t4 = arguments[0], e4 = arguments[1];
                "shadowOffsetX" !== t4 && "shadowOffsetY" !== t4 && "shadowBlur" !== t4 || (e4 /= this.canvas.getPixelRatio()), i3._trace({ property: t4, val: e4 });
              };
            }
            _applyGlobalCompositeOperation(t3) {
              const e3 = t3.attrs.globalCompositeOperation;
              !e3 || "source-over" === e3 || this.setAttr("globalCompositeOperation", e3);
            }
          }
          ["fillStyle", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineDashOffset", "lineJoin", "lineWidth", "miterLimit", "font", "textAlign", "textBaseline", "globalAlpha", "globalCompositeOperation", "imageSmoothingEnabled"].forEach(function(t3) {
            Object.defineProperty(E.prototype, t3, { get() {
              return this._context[t3];
            }, set(e3) {
              this._context[t3] = e3;
            } });
          });
          class D extends E {
            _fillColor(t3) {
              var e3 = t3.fill();
              this.setAttr("fillStyle", e3), t3._fillFunc(this);
            }
            _fillPattern(t3) {
              this.setAttr("fillStyle", t3._getFillPattern()), t3._fillFunc(this);
            }
            _fillLinearGradient(t3) {
              var e3 = t3._getLinearGradient();
              e3 && (this.setAttr("fillStyle", e3), t3._fillFunc(this));
            }
            _fillRadialGradient(t3) {
              var e3 = t3._getRadialGradient();
              e3 && (this.setAttr("fillStyle", e3), t3._fillFunc(this));
            }
            _fill(t3) {
              var e3 = t3.fill(), i3 = t3.getFillPriority();
              if (e3 && "color" === i3)
                this._fillColor(t3);
              else {
                var r2 = t3.getFillPatternImage();
                if (r2 && "pattern" === i3)
                  this._fillPattern(t3);
                else {
                  var n3 = t3.getFillLinearGradientColorStops();
                  if (n3 && "linear-gradient" === i3)
                    this._fillLinearGradient(t3);
                  else {
                    var a2 = t3.getFillRadialGradientColorStops();
                    a2 && "radial-gradient" === i3 ? this._fillRadialGradient(t3) : e3 ? this._fillColor(t3) : r2 ? this._fillPattern(t3) : n3 ? this._fillLinearGradient(t3) : a2 && this._fillRadialGradient(t3);
                  }
                }
              }
            }
            _strokeLinearGradient(t3) {
              var e3 = t3.getStrokeLinearGradientStartPoint(), i3 = t3.getStrokeLinearGradientEndPoint(), r2 = t3.getStrokeLinearGradientColorStops(), n3 = this.createLinearGradient(e3.x, e3.y, i3.x, i3.y);
              if (r2) {
                for (var a2 = 0; a2 < r2.length; a2 += 2)
                  n3.addColorStop(r2[a2], r2[a2 + 1]);
                this.setAttr("strokeStyle", n3);
              }
            }
            _stroke(t3) {
              var e3 = t3.dash(), i3 = t3.getStrokeScaleEnabled();
              if (t3.hasStroke()) {
                if (!i3) {
                  this.save();
                  var r2 = this.getCanvas().getPixelRatio();
                  this.setTransform(r2, 0, 0, r2, 0, 0);
                }
                this._applyLineCap(t3), e3 && t3.dashEnabled() && (this.setLineDash(e3), this.setAttr("lineDashOffset", t3.dashOffset())), this.setAttr("lineWidth", t3.strokeWidth()), t3.getShadowForStrokeEnabled() || this.setAttr("shadowColor", "rgba(0,0,0,0)"), t3.getStrokeLinearGradientColorStops() ? this._strokeLinearGradient(t3) : this.setAttr("strokeStyle", t3.stroke()), t3._strokeFunc(this), i3 || this.restore();
              }
            }
            _applyShadow(t3) {
              var e3, i3, r2, n3 = null !== (e3 = t3.getShadowRGBA()) && void 0 !== e3 ? e3 : "black", a2 = null !== (i3 = t3.getShadowBlur()) && void 0 !== i3 ? i3 : 5, s2 = null !== (r2 = t3.getShadowOffset()) && void 0 !== r2 ? r2 : { x: 0, y: 0 }, o2 = t3.getAbsoluteScale(), h2 = this.canvas.getPixelRatio(), l2 = o2.x * h2, c2 = o2.y * h2;
              this.setAttr("shadowColor", n3), this.setAttr("shadowBlur", a2 * Math.min(Math.abs(l2), Math.abs(c2))), this.setAttr("shadowOffsetX", s2.x * l2), this.setAttr("shadowOffsetY", s2.y * c2);
            }
          }
          class T extends E {
            _fill(t3) {
              this.save(), this.setAttr("fillStyle", t3.colorKey), t3._fillFuncHit(this), this.restore();
            }
            strokeShape(t3) {
              t3.hasHitStroke() && this._stroke(t3);
            }
            _stroke(t3) {
              if (t3.hasHitStroke()) {
                var e3 = t3.getStrokeScaleEnabled();
                if (!e3) {
                  this.save();
                  var i3 = this.getCanvas().getPixelRatio();
                  this.setTransform(i3, 0, 0, i3, 0, 0);
                }
                this._applyLineCap(t3);
                var r2 = t3.hitStrokeWidth(), n3 = "auto" === r2 ? t3.strokeWidth() : r2;
                this.setAttr("lineWidth", n3), this.setAttr("strokeStyle", t3.colorKey), t3._strokeFuncHit(this), e3 || this.restore();
              }
            }
          }
          class I {
            constructor(t3) {
              this.pixelRatio = 1, this.width = 0, this.height = 0, this.isCache = false;
              var e3 = (t3 || {}).pixelRatio || s.pixelRatio || function() {
                if (A)
                  return A;
                var t4 = m.createCanvasElement().getContext("2d");
                return A = (s._global.devicePixelRatio || 1) / (t4.webkitBackingStorePixelRatio || t4.mozBackingStorePixelRatio || t4.msBackingStorePixelRatio || t4.oBackingStorePixelRatio || t4.backingStorePixelRatio || 1);
              }();
              this.pixelRatio = e3, this._canvas = m.createCanvasElement(), this._canvas.style.padding = "0", this._canvas.style.margin = "0", this._canvas.style.border = "0", this._canvas.style.background = "transparent", this._canvas.style.position = "absolute", this._canvas.style.top = "0", this._canvas.style.left = "0";
            }
            getContext() {
              return this.context;
            }
            getPixelRatio() {
              return this.pixelRatio;
            }
            setPixelRatio(t3) {
              var e3 = this.pixelRatio;
              this.pixelRatio = t3, this.setSize(this.getWidth() / e3, this.getHeight() / e3);
            }
            setWidth(t3) {
              this.width = this._canvas.width = t3 * this.pixelRatio, this._canvas.style.width = t3 + "px";
              var e3 = this.pixelRatio;
              this.getContext()._context.scale(e3, e3);
            }
            setHeight(t3) {
              this.height = this._canvas.height = t3 * this.pixelRatio, this._canvas.style.height = t3 + "px";
              var e3 = this.pixelRatio;
              this.getContext()._context.scale(e3, e3);
            }
            getWidth() {
              return this.width;
            }
            getHeight() {
              return this.height;
            }
            setSize(t3, e3) {
              this.setWidth(t3 || 0), this.setHeight(e3 || 0);
            }
            toDataURL(t3, e3) {
              try {
                return this._canvas.toDataURL(t3, e3);
              } catch (t4) {
                try {
                  return this._canvas.toDataURL();
                } catch (t5) {
                  return m.error("Unable to get data URL. " + t5.message + " For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."), "";
                }
              }
            }
          }
          x.addGetterSetter(I, "pixelRatio", void 0, y());
          class R extends I {
            constructor(t3 = { width: 0, height: 0 }) {
              super(t3), this.context = new D(this), this.setSize(t3.width, t3.height);
            }
          }
          class L extends I {
            constructor(t3 = { width: 0, height: 0 }) {
              super(t3), this.hitCanvas = true, this.context = new T(this), this.setSize(t3.width, t3.height);
            }
          }
          const O = { get isDragging() {
            var t3 = false;
            return O._dragElements.forEach((e3) => {
              "dragging" === e3.dragStatus && (t3 = true);
            }), t3;
          }, justDragged: false, get node() {
            var t3;
            return O._dragElements.forEach((e3) => {
              t3 = e3.node;
            }), t3;
          }, _dragElements: /* @__PURE__ */ new Map(), _drag(t3) {
            const e3 = [];
            O._dragElements.forEach((i3, r2) => {
              const { node: n3 } = i3, a2 = n3.getStage();
              a2.setPointersPositions(t3), void 0 === i3.pointerId && (i3.pointerId = m._getFirstPointerId(t3));
              const s2 = a2._changedPointerPositions.find((t4) => t4.id === i3.pointerId);
              if (s2) {
                if ("dragging" !== i3.dragStatus) {
                  var o2 = n3.dragDistance();
                  if (Math.max(Math.abs(s2.x - i3.startPointerPos.x), Math.abs(s2.y - i3.startPointerPos.y)) < o2)
                    return;
                  if (n3.startDrag({ evt: t3 }), !n3.isDragging())
                    return;
                }
                n3._setDragPosition(t3, i3), e3.push(n3);
              }
            }), e3.forEach((e4) => {
              e4.fire("dragmove", { type: "dragmove", target: e4, evt: t3 }, true);
            });
          }, _endDragBefore(t3) {
            O._dragElements.forEach((e3) => {
              const { node: i3 } = e3, r2 = i3.getStage();
              if (t3 && r2.setPointersPositions(t3), !r2._changedPointerPositions.find((t4) => t4.id === e3.pointerId))
                return;
              "dragging" !== e3.dragStatus && "stopped" !== e3.dragStatus || (O.justDragged = true, s._mouseListenClick = false, s._touchListenClick = false, s._pointerListenClick = false, e3.dragStatus = "stopped");
              const n3 = e3.node.getLayer() || e3.node instanceof s.Stage && e3.node;
              n3 && n3.batchDraw();
            });
          }, _endDragAfter(t3) {
            O._dragElements.forEach((e3, i3) => {
              "stopped" === e3.dragStatus && e3.node.fire("dragend", { type: "dragend", target: e3.node, evt: t3 }, true), "dragging" !== e3.dragStatus && O._dragElements.delete(i3);
            });
          } };
          s.isBrowser && (window.addEventListener("mouseup", O._endDragBefore, true), window.addEventListener("touchend", O._endDragBefore, true), window.addEventListener("mousemove", O._drag), window.addEventListener("touchmove", O._drag), window.addEventListener("mouseup", O._endDragAfter, false), window.addEventListener("touchend", O._endDragAfter, false));
          var G = "absoluteOpacity", M = "allEventListeners", F = "absoluteTransform", B = "absoluteScale", U = "canvas", j = "listening", H = "mouseenter", N = "mouseleave", W = "Shape", z = " ", Y = "stage", X = "transform", V = "visible", q = ["xChange.konva", "yChange.konva", "scaleXChange.konva", "scaleYChange.konva", "skewXChange.konva", "skewYChange.konva", "rotationChange.konva", "offsetXChange.konva", "offsetYChange.konva", "transformsEnabledChange.konva"].join(z);
          let Q = 1;
          class K {
            constructor(t3) {
              this._id = Q++, this.eventListeners = {}, this.attrs = {}, this.index = 0, this._allEventListeners = null, this.parent = null, this._cache = /* @__PURE__ */ new Map(), this._attachedDepsListeners = /* @__PURE__ */ new Map(), this._lastPos = null, this._batchingTransformChange = false, this._needClearTransformCache = false, this._filterUpToDate = false, this._isUnderCache = false, this._dragEventId = null, this._shouldFireChangeEvents = false, this.setAttrs(t3), this._shouldFireChangeEvents = true;
            }
            hasChildren() {
              return false;
            }
            _clearCache(t3) {
              t3 !== X && t3 !== F || !this._cache.get(t3) ? t3 ? this._cache.delete(t3) : this._cache.clear() : this._cache.get(t3).dirty = true;
            }
            _getCache(t3, e3) {
              var i3 = this._cache.get(t3);
              return (void 0 === i3 || (t3 === X || t3 === F) && true === i3.dirty) && (i3 = e3.call(this), this._cache.set(t3, i3)), i3;
            }
            _calculate(t3, e3, i3) {
              if (!this._attachedDepsListeners.get(t3)) {
                const i4 = e3.map((t4) => t4 + "Change.konva").join(z);
                this.on(i4, () => {
                  this._clearCache(t3);
                }), this._attachedDepsListeners.set(t3, true);
              }
              return this._getCache(t3, i3);
            }
            _getCanvasCache() {
              return this._cache.get(U);
            }
            _clearSelfAndDescendantCache(t3) {
              this._clearCache(t3), t3 === F && this.fire("absoluteTransformChange");
            }
            clearCache() {
              return this._cache.delete(U), this._clearSelfAndDescendantCache(), this._requestDraw(), this;
            }
            cache(t3) {
              var e3 = t3 || {}, i3 = {};
              void 0 !== e3.x && void 0 !== e3.y && void 0 !== e3.width && void 0 !== e3.height || (i3 = this.getClientRect({ skipTransform: true, relativeTo: this.getParent() }));
              var r2 = Math.ceil(e3.width || i3.width), n3 = Math.ceil(e3.height || i3.height), a2 = e3.pixelRatio, s2 = void 0 === e3.x ? Math.floor(i3.x) : e3.x, o2 = void 0 === e3.y ? Math.floor(i3.y) : e3.y, h2 = e3.offset || 0, l2 = e3.drawBorder || false, c2 = e3.hitCanvasPixelRatio || 1;
              if (r2 && n3) {
                s2 -= h2, o2 -= h2;
                var d2 = new R({ pixelRatio: a2, width: r2 += 2 * h2 + 1, height: n3 += 2 * h2 + 1 }), u2 = new R({ pixelRatio: a2, width: 0, height: 0 }), g2 = new L({ pixelRatio: c2, width: r2, height: n3 }), f2 = d2.getContext(), p2 = g2.getContext();
                return g2.isCache = true, d2.isCache = true, this._cache.delete(U), this._filterUpToDate = false, false === e3.imageSmoothingEnabled && (d2.getContext()._context.imageSmoothingEnabled = false, u2.getContext()._context.imageSmoothingEnabled = false), f2.save(), p2.save(), f2.translate(-s2, -o2), p2.translate(-s2, -o2), this._isUnderCache = true, this._clearSelfAndDescendantCache(G), this._clearSelfAndDescendantCache(B), this.drawScene(d2, this), this.drawHit(g2, this), this._isUnderCache = false, f2.restore(), p2.restore(), l2 && (f2.save(), f2.beginPath(), f2.rect(0, 0, r2, n3), f2.closePath(), f2.setAttr("strokeStyle", "red"), f2.setAttr("lineWidth", 5), f2.stroke(), f2.restore()), this._cache.set(U, { scene: d2, filter: u2, hit: g2, x: s2, y: o2 }), this._requestDraw(), this;
              }
              m.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");
            }
            isCached() {
              return this._cache.has(U);
            }
            getClientRect(t3) {
              throw new Error('abstract "getClientRect" method call');
            }
            _transformedRect(t3, e3) {
              var i3, r2, n3, a2, s2 = [{ x: t3.x, y: t3.y }, { x: t3.x + t3.width, y: t3.y }, { x: t3.x + t3.width, y: t3.y + t3.height }, { x: t3.x, y: t3.y + t3.height }], o2 = this.getAbsoluteTransform(e3);
              return s2.forEach(function(t4) {
                var e4 = o2.point(t4);
                void 0 === i3 && (i3 = n3 = e4.x, r2 = a2 = e4.y), i3 = Math.min(i3, e4.x), r2 = Math.min(r2, e4.y), n3 = Math.max(n3, e4.x), a2 = Math.max(a2, e4.y);
              }), { x: i3, y: r2, width: n3 - i3, height: a2 - r2 };
            }
            _drawCachedSceneCanvas(t3) {
              t3.save(), t3._applyOpacity(this), t3._applyGlobalCompositeOperation(this);
              const e3 = this._getCanvasCache();
              t3.translate(e3.x, e3.y);
              var i3 = this._getCachedSceneCanvas(), r2 = i3.pixelRatio;
              t3.drawImage(i3._canvas, 0, 0, i3.width / r2, i3.height / r2), t3.restore();
            }
            _drawCachedHitCanvas(t3) {
              var e3 = this._getCanvasCache(), i3 = e3.hit;
              t3.save(), t3.translate(e3.x, e3.y), t3.drawImage(i3._canvas, 0, 0, i3.width / i3.pixelRatio, i3.height / i3.pixelRatio), t3.restore();
            }
            _getCachedSceneCanvas() {
              var t3, e3, i3, r2, n3 = this.filters(), a2 = this._getCanvasCache(), s2 = a2.scene, o2 = a2.filter, h2 = o2.getContext();
              if (n3) {
                if (!this._filterUpToDate) {
                  var l2 = s2.pixelRatio;
                  o2.setSize(s2.width / s2.pixelRatio, s2.height / s2.pixelRatio);
                  try {
                    for (t3 = n3.length, h2.clear(), h2.drawImage(s2._canvas, 0, 0, s2.getWidth() / l2, s2.getHeight() / l2), e3 = h2.getImageData(0, 0, o2.getWidth(), o2.getHeight()), i3 = 0; i3 < t3; i3++)
                      "function" == typeof (r2 = n3[i3]) ? (r2.call(this, e3), h2.putImageData(e3, 0, 0)) : m.error("Filter should be type of function, but got " + typeof r2 + " instead. Please check correct filters");
                  } catch (t4) {
                    m.error("Unable to apply filter. " + t4.message + " This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.");
                  }
                  this._filterUpToDate = true;
                }
                return o2;
              }
              return s2;
            }
            on(t3, e3) {
              if (this._cache && this._cache.delete(M), 3 === arguments.length)
                return this._delegate.apply(this, arguments);
              var i3, r2, n3, a2, s2 = t3.split(z), o2 = s2.length;
              for (i3 = 0; i3 < o2; i3++)
                n3 = (r2 = s2[i3].split("."))[0], a2 = r2[1] || "", this.eventListeners[n3] || (this.eventListeners[n3] = []), this.eventListeners[n3].push({ name: a2, handler: e3 });
              return this;
            }
            off(t3, e3) {
              var i3, r2, n3, a2, s2, o2 = (t3 || "").split(z), h2 = o2.length;
              if (this._cache && this._cache.delete(M), !t3)
                for (r2 in this.eventListeners)
                  this._off(r2);
              for (i3 = 0; i3 < h2; i3++)
                if (a2 = (n3 = o2[i3].split("."))[0], s2 = n3[1], a2)
                  this.eventListeners[a2] && this._off(a2, s2, e3);
                else
                  for (r2 in this.eventListeners)
                    this._off(r2, s2, e3);
              return this;
            }
            dispatchEvent(t3) {
              var e3 = { target: this, type: t3.type, evt: t3 };
              return this.fire(t3.type, e3), this;
            }
            addEventListener(t3, e3) {
              return this.on(t3, function(t4) {
                e3.call(this, t4.evt);
              }), this;
            }
            removeEventListener(t3) {
              return this.off(t3), this;
            }
            _delegate(t3, e3, i3) {
              var r2 = this;
              this.on(t3, function(t4) {
                for (var n3 = t4.target.findAncestors(e3, true, r2), a2 = 0; a2 < n3.length; a2++)
                  (t4 = m.cloneObject(t4)).currentTarget = n3[a2], i3.call(n3[a2], t4);
              });
            }
            remove() {
              return this.isDragging() && this.stopDrag(), O._dragElements.delete(this._id), this._remove(), this;
            }
            _clearCaches() {
              this._clearSelfAndDescendantCache(F), this._clearSelfAndDescendantCache(G), this._clearSelfAndDescendantCache(B), this._clearSelfAndDescendantCache(Y), this._clearSelfAndDescendantCache(V), this._clearSelfAndDescendantCache(j);
            }
            _remove() {
              this._clearCaches();
              var t3 = this.getParent();
              t3 && t3.children && (t3.children.splice(this.index, 1), t3._setChildrenIndices(), this.parent = null);
            }
            destroy() {
              return this.remove(), this;
            }
            getAttr(t3) {
              var e3 = "get" + m._capitalize(t3);
              return m._isFunction(this[e3]) ? this[e3]() : this.attrs[t3];
            }
            getAncestors() {
              for (var t3 = this.getParent(), e3 = []; t3; )
                e3.push(t3), t3 = t3.getParent();
              return e3;
            }
            getAttrs() {
              return this.attrs || {};
            }
            setAttrs(t3) {
              return this._batchTransformChanges(() => {
                var e3, i3;
                if (!t3)
                  return this;
                for (e3 in t3)
                  "children" !== e3 && (i3 = "set" + m._capitalize(e3), m._isFunction(this[i3]) ? this[i3](t3[e3]) : this._setAttr(e3, t3[e3]));
              }), this;
            }
            isListening() {
              return this._getCache(j, this._isListening);
            }
            _isListening(t3) {
              if (!this.listening())
                return false;
              const e3 = this.getParent();
              return !e3 || e3 === t3 || this === t3 || e3._isListening(t3);
            }
            isVisible() {
              return this._getCache(V, this._isVisible);
            }
            _isVisible(t3) {
              if (!this.visible())
                return false;
              const e3 = this.getParent();
              return !e3 || e3 === t3 || this === t3 || e3._isVisible(t3);
            }
            shouldDrawHit(t3, e3 = false) {
              if (t3)
                return this._isVisible(t3) && this._isListening(t3);
              var i3 = this.getLayer(), r2 = false;
              O._dragElements.forEach((t4) => {
                "dragging" === t4.dragStatus && ("Stage" === t4.node.nodeType || t4.node.getLayer() === i3) && (r2 = true);
              });
              var n3 = !e3 && !s.hitOnDragEnabled && r2;
              return this.isListening() && this.isVisible() && !n3;
            }
            show() {
              return this.visible(true), this;
            }
            hide() {
              return this.visible(false), this;
            }
            getZIndex() {
              return this.index || 0;
            }
            getAbsoluteZIndex() {
              var t3, e3, i3, r2, n3 = this.getDepth(), a2 = this, s2 = 0;
              return "Stage" !== a2.nodeType && function o2(h2) {
                for (t3 = [], e3 = h2.length, i3 = 0; i3 < e3; i3++)
                  r2 = h2[i3], s2++, r2.nodeType !== W && (t3 = t3.concat(r2.getChildren().slice())), r2._id === a2._id && (i3 = e3);
                t3.length > 0 && t3[0].getDepth() <= n3 && o2(t3);
              }(a2.getStage().getChildren()), s2;
            }
            getDepth() {
              for (var t3 = 0, e3 = this.parent; e3; )
                t3++, e3 = e3.parent;
              return t3;
            }
            _batchTransformChanges(t3) {
              this._batchingTransformChange = true, t3(), this._batchingTransformChange = false, this._needClearTransformCache && (this._clearCache(X), this._clearSelfAndDescendantCache(F)), this._needClearTransformCache = false;
            }
            setPosition(t3) {
              return this._batchTransformChanges(() => {
                this.x(t3.x), this.y(t3.y);
              }), this;
            }
            getPosition() {
              return { x: this.x(), y: this.y() };
            }
            getRelativePointerPosition() {
              if (!this.getStage())
                return null;
              var t3 = this.getStage().getPointerPosition();
              if (!t3)
                return null;
              var e3 = this.getAbsoluteTransform().copy();
              return e3.invert(), e3.point(t3);
            }
            getAbsolutePosition(t3) {
              let e3 = false, i3 = this.parent;
              for (; i3; ) {
                if (i3.isCached()) {
                  e3 = true;
                  break;
                }
                i3 = i3.parent;
              }
              e3 && !t3 && (t3 = true);
              var r2 = this.getAbsoluteTransform(t3).getMatrix(), n3 = new h(), a2 = this.offset();
              return n3.m = r2.slice(), n3.translate(a2.x, a2.y), n3.getTranslation();
            }
            setAbsolutePosition(t3) {
              var e3 = this._clearTransform();
              this.attrs.x = e3.x, this.attrs.y = e3.y, delete e3.x, delete e3.y, this._clearCache(X);
              var i3 = this._getAbsoluteTransform().copy();
              return i3.invert(), i3.translate(t3.x, t3.y), t3 = { x: this.attrs.x + i3.getTranslation().x, y: this.attrs.y + i3.getTranslation().y }, this._setTransform(e3), this.setPosition({ x: t3.x, y: t3.y }), this._clearCache(X), this._clearSelfAndDescendantCache(F), this;
            }
            _setTransform(t3) {
              var e3;
              for (e3 in t3)
                this.attrs[e3] = t3[e3];
            }
            _clearTransform() {
              var t3 = { x: this.x(), y: this.y(), rotation: this.rotation(), scaleX: this.scaleX(), scaleY: this.scaleY(), offsetX: this.offsetX(), offsetY: this.offsetY(), skewX: this.skewX(), skewY: this.skewY() };
              return this.attrs.x = 0, this.attrs.y = 0, this.attrs.rotation = 0, this.attrs.scaleX = 1, this.attrs.scaleY = 1, this.attrs.offsetX = 0, this.attrs.offsetY = 0, this.attrs.skewX = 0, this.attrs.skewY = 0, t3;
            }
            move(t3) {
              var e3 = t3.x, i3 = t3.y, r2 = this.x(), n3 = this.y();
              return void 0 !== e3 && (r2 += e3), void 0 !== i3 && (n3 += i3), this.setPosition({ x: r2, y: n3 }), this;
            }
            _eachAncestorReverse(t3, e3) {
              var i3, r2, n3 = [], a2 = this.getParent();
              if (!e3 || e3._id !== this._id) {
                for (n3.unshift(this); a2 && (!e3 || a2._id !== e3._id); )
                  n3.unshift(a2), a2 = a2.parent;
                for (i3 = n3.length, r2 = 0; r2 < i3; r2++)
                  t3(n3[r2]);
              }
            }
            rotate(t3) {
              return this.rotation(this.rotation() + t3), this;
            }
            moveToTop() {
              if (!this.parent)
                return m.warn("Node has no parent. moveToTop function is ignored."), false;
              var t3 = this.index;
              return t3 < this.parent.getChildren().length - 1 && (this.parent.children.splice(t3, 1), this.parent.children.push(this), this.parent._setChildrenIndices(), true);
            }
            moveUp() {
              if (!this.parent)
                return m.warn("Node has no parent. moveUp function is ignored."), false;
              var t3 = this.index;
              return t3 < this.parent.getChildren().length - 1 && (this.parent.children.splice(t3, 1), this.parent.children.splice(t3 + 1, 0, this), this.parent._setChildrenIndices(), true);
            }
            moveDown() {
              if (!this.parent)
                return m.warn("Node has no parent. moveDown function is ignored."), false;
              var t3 = this.index;
              return t3 > 0 && (this.parent.children.splice(t3, 1), this.parent.children.splice(t3 - 1, 0, this), this.parent._setChildrenIndices(), true);
            }
            moveToBottom() {
              if (!this.parent)
                return m.warn("Node has no parent. moveToBottom function is ignored."), false;
              var t3 = this.index;
              return t3 > 0 && (this.parent.children.splice(t3, 1), this.parent.children.unshift(this), this.parent._setChildrenIndices(), true);
            }
            setZIndex(t3) {
              if (!this.parent)
                return m.warn("Node has no parent. zIndex parameter is ignored."), this;
              (t3 < 0 || t3 >= this.parent.children.length) && m.warn("Unexpected value " + t3 + " for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to " + (this.parent.children.length - 1) + ".");
              var e3 = this.index;
              return this.parent.children.splice(e3, 1), this.parent.children.splice(t3, 0, this), this.parent._setChildrenIndices(), this;
            }
            getAbsoluteOpacity() {
              return this._getCache(G, this._getAbsoluteOpacity);
            }
            _getAbsoluteOpacity() {
              var t3 = this.opacity(), e3 = this.getParent();
              return e3 && !e3._isUnderCache && (t3 *= e3.getAbsoluteOpacity()), t3;
            }
            moveTo(t3) {
              return this.getParent() !== t3 && (this._remove(), t3.add(this)), this;
            }
            toObject() {
              var t3, e3, i3, r2, n3 = {}, a2 = this.getAttrs();
              for (t3 in n3.attrs = {}, a2)
                e3 = a2[t3], m.isObject(e3) && !m._isPlainObject(e3) && !m._isArray(e3) || (i3 = "function" == typeof this[t3] && this[t3], delete a2[t3], r2 = i3 ? i3.call(this) : null, a2[t3] = e3, r2 !== e3 && (n3.attrs[t3] = e3));
              return n3.className = this.getClassName(), m._prepareToStringify(n3);
            }
            toJSON() {
              return JSON.stringify(this.toObject());
            }
            getParent() {
              return this.parent;
            }
            findAncestors(t3, e3, i3) {
              var r2 = [];
              e3 && this._isMatch(t3) && r2.push(this);
              for (var n3 = this.parent; n3; ) {
                if (n3 === i3)
                  return r2;
                n3._isMatch(t3) && r2.push(n3), n3 = n3.parent;
              }
              return r2;
            }
            isAncestorOf(t3) {
              return false;
            }
            findAncestor(t3, e3, i3) {
              return this.findAncestors(t3, e3, i3)[0];
            }
            _isMatch(t3) {
              if (!t3)
                return false;
              if ("function" == typeof t3)
                return t3(this);
              var e3, i3, r2 = t3.replace(/ /g, "").split(","), n3 = r2.length;
              for (e3 = 0; e3 < n3; e3++)
                if (i3 = r2[e3], m.isValidSelector(i3) || (m.warn('Selector "' + i3 + '" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'), m.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'), m.warn("Konva is awesome, right?")), "#" === i3.charAt(0)) {
                  if (this.id() === i3.slice(1))
                    return true;
                } else if ("." === i3.charAt(0)) {
                  if (this.hasName(i3.slice(1)))
                    return true;
                } else if (this.className === i3 || this.nodeType === i3)
                  return true;
              return false;
            }
            getLayer() {
              var t3 = this.getParent();
              return t3 ? t3.getLayer() : null;
            }
            getStage() {
              return this._getCache(Y, this._getStage);
            }
            _getStage() {
              var t3 = this.getParent();
              return t3 ? t3.getStage() : void 0;
            }
            fire(t3, e3 = {}, i3) {
              return e3.target = e3.target || this, i3 ? this._fireAndBubble(t3, e3) : this._fire(t3, e3), this;
            }
            getAbsoluteTransform(t3) {
              return t3 ? this._getAbsoluteTransform(t3) : this._getCache(F, this._getAbsoluteTransform);
            }
            _getAbsoluteTransform(t3) {
              var e3;
              if (t3)
                return e3 = new h(), this._eachAncestorReverse(function(t4) {
                  var i4 = t4.transformsEnabled();
                  "all" === i4 ? e3.multiply(t4.getTransform()) : "position" === i4 && e3.translate(t4.x() - t4.offsetX(), t4.y() - t4.offsetY());
                }, t3), e3;
              e3 = this._cache.get(F) || new h(), this.parent ? this.parent.getAbsoluteTransform().copyInto(e3) : e3.reset();
              var i3 = this.transformsEnabled();
              if ("all" === i3)
                e3.multiply(this.getTransform());
              else if ("position" === i3) {
                const t4 = this.attrs.x || 0, i4 = this.attrs.y || 0, r2 = this.attrs.offsetX || 0, n3 = this.attrs.offsetY || 0;
                e3.translate(t4 - r2, i4 - n3);
              }
              return e3.dirty = false, e3;
            }
            getAbsoluteScale(t3) {
              for (var e3 = this; e3; )
                e3._isUnderCache && (t3 = e3), e3 = e3.getParent();
              const i3 = this.getAbsoluteTransform(t3).decompose();
              return { x: i3.scaleX, y: i3.scaleY };
            }
            getAbsoluteRotation() {
              return this.getAbsoluteTransform().decompose().rotation;
            }
            getTransform() {
              return this._getCache(X, this._getTransform);
            }
            _getTransform() {
              var t3, e3, i3 = this._cache.get(X) || new h();
              i3.reset();
              var r2 = this.x(), n3 = this.y(), a2 = s.getAngle(this.rotation()), o2 = null !== (t3 = this.attrs.scaleX) && void 0 !== t3 ? t3 : 1, l2 = null !== (e3 = this.attrs.scaleY) && void 0 !== e3 ? e3 : 1, c2 = this.attrs.skewX || 0, d2 = this.attrs.skewY || 0, u2 = this.attrs.offsetX || 0, g2 = this.attrs.offsetY || 0;
              return 0 === r2 && 0 === n3 || i3.translate(r2, n3), 0 !== a2 && i3.rotate(a2), 0 === c2 && 0 === d2 || i3.skew(c2, d2), 1 === o2 && 1 === l2 || i3.scale(o2, l2), 0 === u2 && 0 === g2 || i3.translate(-1 * u2, -1 * g2), i3.dirty = false, i3;
            }
            clone(t3) {
              var e3, i3, r2, n3, a2, s2 = m.cloneObject(this.attrs);
              for (e3 in t3)
                s2[e3] = t3[e3];
              var o2 = new this.constructor(s2);
              for (e3 in this.eventListeners)
                for (r2 = (i3 = this.eventListeners[e3]).length, n3 = 0; n3 < r2; n3++)
                  (a2 = i3[n3]).name.indexOf("konva") < 0 && (o2.eventListeners[e3] || (o2.eventListeners[e3] = []), o2.eventListeners[e3].push(a2));
              return o2;
            }
            _toKonvaCanvas(t3) {
              t3 = t3 || {};
              var e3 = this.getClientRect(), i3 = this.getStage(), r2 = void 0 !== t3.x ? t3.x : Math.floor(e3.x), n3 = void 0 !== t3.y ? t3.y : Math.floor(e3.y), a2 = t3.pixelRatio || 1, s2 = new R({ width: t3.width || Math.ceil(e3.width) || (i3 ? i3.width() : 0), height: t3.height || Math.ceil(e3.height) || (i3 ? i3.height() : 0), pixelRatio: a2 }), o2 = s2.getContext();
              return o2.save(), (r2 || n3) && o2.translate(-1 * r2, -1 * n3), this.drawScene(s2), o2.restore(), s2;
            }
            toCanvas(t3) {
              return this._toKonvaCanvas(t3)._canvas;
            }
            toDataURL(t3) {
              var e3 = (t3 = t3 || {}).mimeType || null, i3 = t3.quality || null, r2 = this._toKonvaCanvas(t3).toDataURL(e3, i3);
              return t3.callback && t3.callback(r2), r2;
            }
            toImage(t3) {
              if (!t3 || !t3.callback)
                throw "callback required for toImage method config argument";
              var e3 = t3.callback;
              delete t3.callback, m._urlToImage(this.toDataURL(t3), function(t4) {
                e3(t4);
              });
            }
            setSize(t3) {
              return this.width(t3.width), this.height(t3.height), this;
            }
            getSize() {
              return { width: this.width(), height: this.height() };
            }
            getClassName() {
              return this.className || this.nodeType;
            }
            getType() {
              return this.nodeType;
            }
            getDragDistance() {
              return void 0 !== this.attrs.dragDistance ? this.attrs.dragDistance : this.parent ? this.parent.getDragDistance() : s.dragDistance;
            }
            _off(t3, e3, i3) {
              var r2, n3, a2, s2 = this.eventListeners[t3];
              for (r2 = 0; r2 < s2.length; r2++)
                if (n3 = s2[r2].name, a2 = s2[r2].handler, !("konva" === n3 && "konva" !== e3 || e3 && n3 !== e3 || i3 && i3 !== a2)) {
                  if (s2.splice(r2, 1), 0 === s2.length) {
                    delete this.eventListeners[t3];
                    break;
                  }
                  r2--;
                }
            }
            _fireChangeEvent(t3, e3, i3) {
              this._fire(t3 + "Change", { oldVal: e3, newVal: i3 });
            }
            addName(t3) {
              if (!this.hasName(t3)) {
                var e3 = this.name(), i3 = e3 ? e3 + " " + t3 : t3;
                this.name(i3);
              }
              return this;
            }
            hasName(t3) {
              if (!t3)
                return false;
              const e3 = this.name();
              return !!e3 && -1 !== (e3 || "").split(/\s/g).indexOf(t3);
            }
            removeName(t3) {
              var e3 = (this.name() || "").split(/\s/g), i3 = e3.indexOf(t3);
              return -1 !== i3 && (e3.splice(i3, 1), this.name(e3.join(" "))), this;
            }
            setAttr(t3, e3) {
              var i3 = this["set" + m._capitalize(t3)];
              return m._isFunction(i3) ? i3.call(this, e3) : this._setAttr(t3, e3), this;
            }
            _requestDraw() {
              if (s.autoDrawEnabled) {
                const t3 = this.getLayer() || this.getStage();
                null == t3 || t3.batchDraw();
              }
            }
            _setAttr(t3, e3) {
              var i3 = this.attrs[t3];
              (i3 !== e3 || m.isObject(e3)) && (null == e3 ? delete this.attrs[t3] : this.attrs[t3] = e3, this._shouldFireChangeEvents && this._fireChangeEvent(t3, i3, e3), this._requestDraw());
            }
            _setComponentAttr(t3, e3, i3) {
              var r2;
              void 0 !== i3 && ((r2 = this.attrs[t3]) || (this.attrs[t3] = this.getAttr(t3)), this.attrs[t3][e3] = i3, this._fireChangeEvent(t3, r2, i3));
            }
            _fireAndBubble(t3, e3, i3) {
              if (e3 && this.nodeType === W && (e3.target = this), t3 !== H && t3 !== N || !(i3 && (this === i3 || this.isAncestorOf && this.isAncestorOf(i3)) || "Stage" === this.nodeType && !i3)) {
                this._fire(t3, e3);
                var r2 = (t3 === H || t3 === N) && i3 && i3.isAncestorOf && i3.isAncestorOf(this) && !i3.isAncestorOf(this.parent);
                (e3 && !e3.cancelBubble || !e3) && this.parent && this.parent.isListening() && !r2 && (i3 && i3.parent ? this._fireAndBubble.call(this.parent, t3, e3, i3) : this._fireAndBubble.call(this.parent, t3, e3));
              }
            }
            _getProtoListeners(t3) {
              let e3 = this._cache.get(M);
              if (!e3) {
                e3 = {};
                let t4 = Object.getPrototypeOf(this);
                for (; t4; )
                  if (t4.eventListeners) {
                    for (var i3 in t4.eventListeners) {
                      const r2 = t4.eventListeners[i3], n3 = e3[i3] || [];
                      e3[i3] = r2.concat(n3);
                    }
                    t4 = Object.getPrototypeOf(t4);
                  } else
                    t4 = Object.getPrototypeOf(t4);
                this._cache.set(M, e3);
              }
              return e3[t3];
            }
            _fire(t3, e3) {
              (e3 = e3 || {}).currentTarget = this, e3.type = t3;
              const i3 = this._getProtoListeners(t3);
              if (i3)
                for (var r2 = 0; r2 < i3.length; r2++)
                  i3[r2].handler.call(this, e3);
              const n3 = this.eventListeners[t3];
              if (n3)
                for (r2 = 0; r2 < n3.length; r2++)
                  n3[r2].handler.call(this, e3);
            }
            draw() {
              return this.drawScene(), this.drawHit(), this;
            }
            _createDragElement(t3) {
              var e3 = t3 ? t3.pointerId : void 0, i3 = this.getStage(), r2 = this.getAbsolutePosition(), n3 = i3._getPointerById(e3) || i3._changedPointerPositions[0] || r2;
              O._dragElements.set(this._id, { node: this, startPointerPos: n3, offset: { x: n3.x - r2.x, y: n3.y - r2.y }, dragStatus: "ready", pointerId: e3 });
            }
            startDrag(t3, e3 = true) {
              O._dragElements.has(this._id) || this._createDragElement(t3), O._dragElements.get(this._id).dragStatus = "dragging", this.fire("dragstart", { type: "dragstart", target: this, evt: t3 && t3.evt }, e3);
            }
            _setDragPosition(t3, e3) {
              const i3 = this.getStage()._getPointerById(e3.pointerId);
              if (i3) {
                var r2 = { x: i3.x - e3.offset.x, y: i3.y - e3.offset.y }, n3 = this.dragBoundFunc();
                if (void 0 !== n3) {
                  const e4 = n3.call(this, r2, t3);
                  e4 ? r2 = e4 : m.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.");
                }
                this._lastPos && this._lastPos.x === r2.x && this._lastPos.y === r2.y || (this.setAbsolutePosition(r2), this._requestDraw()), this._lastPos = r2;
              }
            }
            stopDrag(t3) {
              const e3 = O._dragElements.get(this._id);
              e3 && (e3.dragStatus = "stopped"), O._endDragBefore(t3), O._endDragAfter(t3);
            }
            setDraggable(t3) {
              this._setAttr("draggable", t3), this._dragChange();
            }
            isDragging() {
              const t3 = O._dragElements.get(this._id);
              return !!t3 && "dragging" === t3.dragStatus;
            }
            _listenDrag() {
              this._dragCleanup(), this.on("mousedown.konva touchstart.konva", function(t3) {
                if ((void 0 === t3.evt.button || s.dragButtons.indexOf(t3.evt.button) >= 0) && !this.isDragging()) {
                  var e3 = false;
                  O._dragElements.forEach((t4) => {
                    this.isAncestorOf(t4.node) && (e3 = true);
                  }), e3 || this._createDragElement(t3);
                }
              });
            }
            _dragChange() {
              if (this.attrs.draggable)
                this._listenDrag();
              else {
                if (this._dragCleanup(), !this.getStage())
                  return;
                const t3 = O._dragElements.get(this._id), e3 = t3 && "dragging" === t3.dragStatus, i3 = t3 && "ready" === t3.dragStatus;
                e3 ? this.stopDrag() : i3 && O._dragElements.delete(this._id);
              }
            }
            _dragCleanup() {
              this.off("mousedown.konva"), this.off("touchstart.konva");
            }
            isClientRectOnScreen(t3 = { x: 0, y: 0 }) {
              const e3 = this.getStage();
              if (!e3)
                return false;
              const i3 = { x: -t3.x, y: -t3.y, width: e3.width() + 2 * t3.x, height: e3.height() + 2 * t3.y };
              return m.haveIntersection(i3, this.getClientRect());
            }
            static create(t3, e3) {
              return m._isString(t3) && (t3 = JSON.parse(t3)), this._createNode(t3, e3);
            }
            static _createNode(t3, e3) {
              var i3, r2, n3, a2 = K.prototype.getClassName.call(t3), o2 = t3.children;
              if (e3 && (t3.attrs.container = e3), s[a2] || (m.warn('Can not find a node with class name "' + a2 + '". Fallback to "Shape".'), a2 = "Shape"), i3 = new (0, s[a2])(t3.attrs), o2)
                for (r2 = o2.length, n3 = 0; n3 < r2; n3++)
                  i3.add(K._createNode(o2[n3]));
              return i3;
            }
          }
          K.prototype.nodeType = "Node", K.prototype._attrsAffectingSize = [], K.prototype.eventListeners = {}, K.prototype.on.call(K.prototype, q, function() {
            this._batchingTransformChange ? this._needClearTransformCache = true : (this._clearCache(X), this._clearSelfAndDescendantCache(F));
          }), K.prototype.on.call(K.prototype, "visibleChange.konva", function() {
            this._clearSelfAndDescendantCache(V);
          }), K.prototype.on.call(K.prototype, "listeningChange.konva", function() {
            this._clearSelfAndDescendantCache(j);
          }), K.prototype.on.call(K.prototype, "opacityChange.konva", function() {
            this._clearSelfAndDescendantCache(G);
          });
          const J = x.addGetterSetter;
          J(K, "zIndex"), J(K, "absolutePosition"), J(K, "position"), J(K, "x", 0, y()), J(K, "y", 0, y()), J(K, "globalCompositeOperation", "source-over", b()), J(K, "opacity", 1, y()), J(K, "name", "", b()), J(K, "id", "", b()), J(K, "rotation", 0, y()), x.addComponentsGetterSetter(K, "scale", ["x", "y"]), J(K, "scaleX", 1, y()), J(K, "scaleY", 1, y()), x.addComponentsGetterSetter(K, "skew", ["x", "y"]), J(K, "skewX", 0, y()), J(K, "skewY", 0, y()), x.addComponentsGetterSetter(K, "offset", ["x", "y"]), J(K, "offsetX", 0, y()), J(K, "offsetY", 0, y()), J(K, "dragDistance", null, y()), J(K, "width", 0, y()), J(K, "height", 0, y()), J(K, "listening", true, _()), J(K, "preventDefault", true, _()), J(K, "filters", null, function(t3) {
            return this._filterUpToDate = false, t3;
          }), J(K, "visible", true, _()), J(K, "transformsEnabled", "all", b()), J(K, "size"), J(K, "dragBoundFunc"), J(K, "draggable", false, _()), x.backCompat(K, { rotateDeg: "rotate", setRotationDeg: "setRotation", getRotationDeg: "getRotation" });
          class Z extends K {
            constructor() {
              super(...arguments), this.children = [];
            }
            getChildren(t3) {
              if (!t3)
                return this.children || [];
              const e3 = this.children || [];
              var i3 = [];
              return e3.forEach(function(e4) {
                t3(e4) && i3.push(e4);
              }), i3;
            }
            hasChildren() {
              return this.getChildren().length > 0;
            }
            removeChildren() {
              return this.getChildren().forEach((t3) => {
                t3.parent = null, t3.index = 0, t3.remove();
              }), this.children = [], this._requestDraw(), this;
            }
            destroyChildren() {
              return this.getChildren().forEach((t3) => {
                t3.parent = null, t3.index = 0, t3.destroy();
              }), this.children = [], this._requestDraw(), this;
            }
            add(...t3) {
              if (arguments.length > 1) {
                for (var e3 = 0; e3 < arguments.length; e3++)
                  this.add(arguments[e3]);
                return this;
              }
              var i3 = t3[0];
              return i3.getParent() ? (i3.moveTo(this), this) : (this._validateAdd(i3), i3.index = this.getChildren().length, i3.parent = this, i3._clearCaches(), this.getChildren().push(i3), this._fire("add", { child: i3 }), this._requestDraw(), this);
            }
            destroy() {
              return this.hasChildren() && this.destroyChildren(), super.destroy(), this;
            }
            find(t3) {
              return this._generalFind(t3, false);
            }
            findOne(t3) {
              var e3 = this._generalFind(t3, true);
              return e3.length > 0 ? e3[0] : void 0;
            }
            _generalFind(t3, e3) {
              var i3 = [];
              return this._descendants((r2) => {
                const n3 = r2._isMatch(t3);
                return n3 && i3.push(r2), !(!n3 || !e3);
              }), i3;
            }
            _descendants(t3) {
              let e3 = false;
              const i3 = this.getChildren();
              for (const r2 of i3) {
                if (e3 = t3(r2), e3)
                  return true;
                if (r2.hasChildren() && (e3 = r2._descendants(t3), e3))
                  return true;
              }
              return false;
            }
            toObject() {
              var t3 = K.prototype.toObject.call(this);
              return t3.children = [], this.getChildren().forEach((e3) => {
                t3.children.push(e3.toObject());
              }), t3;
            }
            isAncestorOf(t3) {
              for (var e3 = t3.getParent(); e3; ) {
                if (e3._id === this._id)
                  return true;
                e3 = e3.getParent();
              }
              return false;
            }
            clone(t3) {
              var e3 = K.prototype.clone.call(this, t3);
              return this.getChildren().forEach(function(t4) {
                e3.add(t4.clone());
              }), e3;
            }
            getAllIntersections(t3) {
              var e3 = [];
              return this.find("Shape").forEach(function(i3) {
                i3.isVisible() && i3.intersects(t3) && e3.push(i3);
              }), e3;
            }
            _clearSelfAndDescendantCache(t3) {
              var e3;
              super._clearSelfAndDescendantCache(t3), this.isCached() || null === (e3 = this.children) || void 0 === e3 || e3.forEach(function(e4) {
                e4._clearSelfAndDescendantCache(t3);
              });
            }
            _setChildrenIndices() {
              var t3;
              null === (t3 = this.children) || void 0 === t3 || t3.forEach(function(t4, e3) {
                t4.index = e3;
              }), this._requestDraw();
            }
            drawScene(t3, e3) {
              var i3 = this.getLayer(), r2 = t3 || i3 && i3.getCanvas(), n3 = r2 && r2.getContext(), a2 = this._getCanvasCache(), s2 = a2 && a2.scene, o2 = r2 && r2.isCache;
              if (!this.isVisible() && !o2)
                return this;
              if (s2) {
                n3.save();
                var h2 = this.getAbsoluteTransform(e3).getMatrix();
                n3.transform(h2[0], h2[1], h2[2], h2[3], h2[4], h2[5]), this._drawCachedSceneCanvas(n3), n3.restore();
              } else
                this._drawChildren("drawScene", r2, e3);
              return this;
            }
            drawHit(t3, e3) {
              if (!this.shouldDrawHit(e3))
                return this;
              var i3 = this.getLayer(), r2 = t3 || i3 && i3.hitCanvas, n3 = r2 && r2.getContext(), a2 = this._getCanvasCache();
              if (a2 && a2.hit) {
                n3.save();
                var s2 = this.getAbsoluteTransform(e3).getMatrix();
                n3.transform(s2[0], s2[1], s2[2], s2[3], s2[4], s2[5]), this._drawCachedHitCanvas(n3), n3.restore();
              } else
                this._drawChildren("drawHit", r2, e3);
              return this;
            }
            _drawChildren(t3, e3, i3) {
              var r2, n3 = e3 && e3.getContext(), a2 = this.clipWidth(), s2 = this.clipHeight(), o2 = this.clipFunc(), h2 = a2 && s2 || o2;
              const l2 = i3 === this;
              if (h2) {
                n3.save();
                var c2 = this.getAbsoluteTransform(i3), d2 = c2.getMatrix();
                if (n3.transform(d2[0], d2[1], d2[2], d2[3], d2[4], d2[5]), n3.beginPath(), o2)
                  o2.call(this, n3, this);
                else {
                  var u2 = this.clipX(), g2 = this.clipY();
                  n3.rect(u2, g2, a2, s2);
                }
                n3.clip(), d2 = c2.copy().invert().getMatrix(), n3.transform(d2[0], d2[1], d2[2], d2[3], d2[4], d2[5]);
              }
              var f2 = !l2 && "source-over" !== this.globalCompositeOperation() && "drawScene" === t3;
              f2 && (n3.save(), n3._applyGlobalCompositeOperation(this)), null === (r2 = this.children) || void 0 === r2 || r2.forEach(function(r3) {
                r3[t3](e3, i3);
              }), f2 && n3.restore(), h2 && n3.restore();
            }
            getClientRect(t3) {
              var e3, i3, r2, n3, a2, s2, o2 = (t3 = t3 || {}).skipTransform, h2 = t3.relativeTo, l2 = this;
              null === (e3 = this.children) || void 0 === e3 || e3.forEach(function(e4) {
                if (e4.visible()) {
                  var s3 = e4.getClientRect({ relativeTo: l2, skipShadow: t3.skipShadow, skipStroke: t3.skipStroke });
                  0 === s3.width && 0 === s3.height || (void 0 === i3 ? (i3 = s3.x, r2 = s3.y, n3 = s3.x + s3.width, a2 = s3.y + s3.height) : (i3 = Math.min(i3, s3.x), r2 = Math.min(r2, s3.y), n3 = Math.max(n3, s3.x + s3.width), a2 = Math.max(a2, s3.y + s3.height)));
                }
              });
              for (var c2 = this.find("Shape"), d2 = false, u2 = 0; u2 < c2.length; u2++)
                if (c2[u2]._isVisible(this)) {
                  d2 = true;
                  break;
                }
              return s2 = d2 && void 0 !== i3 ? { x: i3, y: r2, width: n3 - i3, height: a2 - r2 } : { x: 0, y: 0, width: 0, height: 0 }, o2 ? s2 : this._transformedRect(s2, h2);
            }
          }
          x.addComponentsGetterSetter(Z, "clip", ["x", "y", "width", "height"]), x.addGetterSetter(Z, "clipX", void 0, y()), x.addGetterSetter(Z, "clipY", void 0, y()), x.addGetterSetter(Z, "clipWidth", void 0, y()), x.addGetterSetter(Z, "clipHeight", void 0, y()), x.addGetterSetter(Z, "clipFunc");
          const $ = /* @__PURE__ */ new Map(), tt = void 0 !== s._global.PointerEvent;
          function et(t3) {
            return $.get(t3);
          }
          function it(t3) {
            return { evt: t3, pointerId: t3.pointerId };
          }
          function rt(t3, e3) {
            return $.get(t3) === e3;
          }
          function nt(t3, e3) {
            at(t3), e3.getStage() && ($.set(t3, e3), tt && e3._fire("gotpointercapture", it(new PointerEvent("gotpointercapture"))));
          }
          function at(t3, e3) {
            const i3 = $.get(t3);
            if (!i3)
              return;
            const r2 = i3.getStage();
            r2 && r2.content, $.delete(t3), tt && i3._fire("lostpointercapture", it(new PointerEvent("lostpointercapture")));
          }
          var st = "mouseleave", ot = "mouseover", ht = "mouseenter", lt = "mousemove", ct = "mousedown", dt = "mouseup", ut = "pointermove", gt = "pointerdown", ft = "pointerup", pt = "pointercancel", mt = "pointerout", vt = "pointerleave", yt = "pointerover", bt = "pointerenter", Ct = "contextmenu", _t = "touchstart", St = "touchend", wt = "touchmove", xt = "touchcancel", Pt = "wheel", At = [[ht, "_pointerenter"], [ct, "_pointerdown"], [lt, "_pointermove"], [dt, "_pointerup"], [st, "_pointerleave"], [_t, "_pointerdown"], [wt, "_pointermove"], [St, "_pointerup"], [xt, "_pointercancel"], [ot, "_pointerover"], [Pt, "_wheel"], [Ct, "_contextmenu"], [gt, "_pointerdown"], [ut, "_pointermove"], [ft, "_pointerup"], [pt, "_pointercancel"], ["lostpointercapture", "_lostpointercapture"]];
          const kt = { mouse: { [mt]: "mouseout", [vt]: st, [yt]: ot, [bt]: ht, [ut]: lt, [gt]: ct, [ft]: dt, [pt]: "mousecancel", pointerclick: "click", pointerdblclick: "dblclick" }, touch: { [mt]: "touchout", [vt]: "touchleave", [yt]: "touchover", [bt]: "touchenter", [ut]: wt, [gt]: _t, [ft]: St, [pt]: xt, pointerclick: "tap", pointerdblclick: "dbltap" }, pointer: { [mt]: mt, [vt]: vt, [yt]: yt, [bt]: bt, [ut]: ut, [gt]: gt, [ft]: ft, [pt]: pt, pointerclick: "pointerclick", pointerdblclick: "pointerdblclick" } }, Et = (t3) => t3.indexOf("pointer") >= 0 ? "pointer" : t3.indexOf("touch") >= 0 ? "touch" : "mouse", Dt = (t3) => {
            const e3 = Et(t3);
            return "pointer" === e3 ? s.pointerEventsEnabled && kt.pointer : "touch" === e3 ? kt.touch : "mouse" === e3 ? kt.mouse : void 0;
          };
          function Tt(t3 = {}) {
            return (t3.clipFunc || t3.clipWidth || t3.clipHeight) && m.warn("Stage does not support clipping. Please use clip for Layers or Groups."), t3;
          }
          const It = [];
          class Rt extends Z {
            constructor(t3) {
              super(Tt(t3)), this._pointerPositions = [], this._changedPointerPositions = [], this._buildDOM(), this._bindContentEvents(), It.push(this), this.on("widthChange.konva heightChange.konva", this._resizeDOM), this.on("visibleChange.konva", this._checkVisibility), this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva", () => {
                Tt(this.attrs);
              }), this._checkVisibility();
            }
            _validateAdd(t3) {
              const e3 = "Layer" === t3.getType(), i3 = "FastLayer" === t3.getType();
              e3 || i3 || m.throw("You may only add layers to the stage.");
            }
            _checkVisibility() {
              if (!this.content)
                return;
              const t3 = this.visible() ? "" : "none";
              this.content.style.display = t3;
            }
            setContainer(t3) {
              if ("string" == typeof t3) {
                if ("." === t3.charAt(0)) {
                  var e3 = t3.slice(1);
                  t3 = document.getElementsByClassName(e3)[0];
                } else {
                  var i3;
                  i3 = "#" !== t3.charAt(0) ? t3 : t3.slice(1), t3 = document.getElementById(i3);
                }
                if (!t3)
                  throw "Can not find container in document with id " + i3;
              }
              return this._setAttr("container", t3), this.content && (this.content.parentElement && this.content.parentElement.removeChild(this.content), t3.appendChild(this.content)), this;
            }
            shouldDrawHit() {
              return true;
            }
            clear() {
              var t3, e3 = this.children, i3 = e3.length;
              for (t3 = 0; t3 < i3; t3++)
                e3[t3].clear();
              return this;
            }
            clone(t3) {
              return t3 || (t3 = {}), t3.container = "undefined" != typeof document && document.createElement("div"), Z.prototype.clone.call(this, t3);
            }
            destroy() {
              super.destroy();
              var t3 = this.content;
              t3 && m._isInDocument(t3) && this.container().removeChild(t3);
              var e3 = It.indexOf(this);
              return e3 > -1 && It.splice(e3, 1), this;
            }
            getPointerPosition() {
              const t3 = this._pointerPositions[0] || this._changedPointerPositions[0];
              return t3 ? { x: t3.x, y: t3.y } : (m.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"), null);
            }
            _getPointerById(t3) {
              return this._pointerPositions.find((e3) => e3.id === t3);
            }
            getPointersPositions() {
              return this._pointerPositions;
            }
            getStage() {
              return this;
            }
            getContent() {
              return this.content;
            }
            _toKonvaCanvas(t3) {
              (t3 = t3 || {}).x = t3.x || 0, t3.y = t3.y || 0, t3.width = t3.width || this.width(), t3.height = t3.height || this.height();
              var e3 = new R({ width: t3.width, height: t3.height, pixelRatio: t3.pixelRatio || 1 }), i3 = e3.getContext()._context, r2 = this.children;
              return (t3.x || t3.y) && i3.translate(-1 * t3.x, -1 * t3.y), r2.forEach(function(e4) {
                if (e4.isVisible()) {
                  var r3 = e4._toKonvaCanvas(t3);
                  i3.drawImage(r3._canvas, t3.x, t3.y, r3.getWidth() / r3.getPixelRatio(), r3.getHeight() / r3.getPixelRatio());
                }
              }), e3;
            }
            getIntersection(t3) {
              if (!t3)
                return null;
              var e3, i3 = this.children;
              for (e3 = i3.length - 1; e3 >= 0; e3--) {
                const r2 = i3[e3].getIntersection(t3);
                if (r2)
                  return r2;
              }
              return null;
            }
            _resizeDOM() {
              var t3 = this.width(), e3 = this.height();
              this.content && (this.content.style.width = t3 + "px", this.content.style.height = e3 + "px"), this.bufferCanvas.setSize(t3, e3), this.bufferHitCanvas.setSize(t3, e3), this.children.forEach((i3) => {
                i3.setSize({ width: t3, height: e3 }), i3.draw();
              });
            }
            add(t3, ...e3) {
              if (arguments.length > 1) {
                for (var i3 = 0; i3 < arguments.length; i3++)
                  this.add(arguments[i3]);
                return this;
              }
              super.add(t3);
              var r2 = this.children.length;
              return r2 > 5 && m.warn("The stage has " + r2 + " layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."), t3.setSize({ width: this.width(), height: this.height() }), t3.draw(), s.isBrowser && this.content.appendChild(t3.canvas._canvas), this;
            }
            getParent() {
              return null;
            }
            getLayer() {
              return null;
            }
            hasPointerCapture(t3) {
              return rt(t3, this);
            }
            setPointerCapture(t3) {
              nt(t3, this);
            }
            releaseCapture(t3) {
              at(t3);
            }
            getLayers() {
              return this.children;
            }
            _bindContentEvents() {
              s.isBrowser && At.forEach(([t3, e3]) => {
                this.content.addEventListener(t3, (t4) => {
                  this[e3](t4);
                });
              });
            }
            _pointerenter(t3) {
              this.setPointersPositions(t3);
              const e3 = Dt(t3.type);
              this._fire(e3.pointerenter, { evt: t3, target: this, currentTarget: this });
            }
            _pointerover(t3) {
              this.setPointersPositions(t3);
              const e3 = Dt(t3.type);
              this._fire(e3.pointerover, { evt: t3, target: this, currentTarget: this });
            }
            _getTargetShape(t3) {
              let e3 = this[t3 + "targetShape"];
              return e3 && !e3.getStage() && (e3 = null), e3;
            }
            _pointerleave(t3) {
              const e3 = Dt(t3.type), i3 = Et(t3.type);
              if (e3) {
                this.setPointersPositions(t3);
                var r2 = this._getTargetShape(i3), n3 = !O.isDragging || s.hitOnDragEnabled;
                r2 && n3 ? (r2._fireAndBubble(e3.pointerout, { evt: t3 }), r2._fireAndBubble(e3.pointerleave, { evt: t3 }), this._fire(e3.pointerleave, { evt: t3, target: this, currentTarget: this }), this[i3 + "targetShape"] = null) : n3 && (this._fire(e3.pointerleave, { evt: t3, target: this, currentTarget: this }), this._fire(e3.pointerout, { evt: t3, target: this, currentTarget: this })), this.pointerPos = void 0, this._pointerPositions = [];
              }
            }
            _pointerdown(t3) {
              const e3 = Dt(t3.type), i3 = Et(t3.type);
              if (e3) {
                this.setPointersPositions(t3);
                var r2 = false;
                this._changedPointerPositions.forEach((n3) => {
                  var a2 = this.getIntersection(n3);
                  if (O.justDragged = false, s["_" + i3 + "ListenClick"] = true, !a2 || !a2.isListening())
                    return;
                  s.capturePointerEventsEnabled && a2.setPointerCapture(n3.id), this[i3 + "ClickStartShape"] = a2, a2._fireAndBubble(e3.pointerdown, { evt: t3, pointerId: n3.id }), r2 = true;
                  const o2 = t3.type.indexOf("touch") >= 0;
                  a2.preventDefault() && t3.cancelable && o2 && t3.preventDefault();
                }), r2 || this._fire(e3.pointerdown, { evt: t3, target: this, currentTarget: this, pointerId: this._pointerPositions[0].id });
              }
            }
            _pointermove(t3) {
              const e3 = Dt(t3.type), i3 = Et(t3.type);
              if (!e3)
                return;
              if (O.isDragging && O.node.preventDefault() && t3.cancelable && t3.preventDefault(), this.setPointersPositions(t3), O.isDragging && !s.hitOnDragEnabled)
                return;
              var r2 = {};
              let n3 = false;
              var a2 = this._getTargetShape(i3);
              this._changedPointerPositions.forEach((s2) => {
                const o2 = et(s2.id) || this.getIntersection(s2), h2 = s2.id, l2 = { evt: t3, pointerId: h2 };
                var c2 = a2 !== o2;
                if (c2 && a2 && (a2._fireAndBubble(e3.pointerout, Object.assign({}, l2), o2), a2._fireAndBubble(e3.pointerleave, Object.assign({}, l2), o2)), o2) {
                  if (r2[o2._id])
                    return;
                  r2[o2._id] = true;
                }
                o2 && o2.isListening() ? (n3 = true, c2 && (o2._fireAndBubble(e3.pointerover, Object.assign({}, l2), a2), o2._fireAndBubble(e3.pointerenter, Object.assign({}, l2), a2), this[i3 + "targetShape"] = o2), o2._fireAndBubble(e3.pointermove, Object.assign({}, l2))) : a2 && (this._fire(e3.pointerover, { evt: t3, target: this, currentTarget: this, pointerId: h2 }), this[i3 + "targetShape"] = null);
              }), n3 || this._fire(e3.pointermove, { evt: t3, target: this, currentTarget: this, pointerId: this._changedPointerPositions[0].id });
            }
            _pointerup(t3) {
              const e3 = Dt(t3.type), i3 = Et(t3.type);
              if (!e3)
                return;
              this.setPointersPositions(t3);
              const r2 = this[i3 + "ClickStartShape"], n3 = this[i3 + "ClickEndShape"];
              var a2 = {};
              let o2 = false;
              this._changedPointerPositions.forEach((h2) => {
                const l2 = et(h2.id) || this.getIntersection(h2);
                if (l2) {
                  if (l2.releaseCapture(h2.id), a2[l2._id])
                    return;
                  a2[l2._id] = true;
                }
                const c2 = h2.id, d2 = { evt: t3, pointerId: c2 };
                let u2 = false;
                s["_" + i3 + "InDblClickWindow"] ? (u2 = true, clearTimeout(this[i3 + "DblTimeout"])) : O.justDragged || (s["_" + i3 + "InDblClickWindow"] = true, clearTimeout(this[i3 + "DblTimeout"])), this[i3 + "DblTimeout"] = setTimeout(function() {
                  s["_" + i3 + "InDblClickWindow"] = false;
                }, s.dblClickWindow), l2 && l2.isListening() ? (o2 = true, this[i3 + "ClickEndShape"] = l2, l2._fireAndBubble(e3.pointerup, Object.assign({}, d2)), s["_" + i3 + "ListenClick"] && r2 && r2 === l2 && (l2._fireAndBubble(e3.pointerclick, Object.assign({}, d2)), u2 && n3 && n3 === l2 && l2._fireAndBubble(e3.pointerdblclick, Object.assign({}, d2)))) : (this[i3 + "ClickEndShape"] = null, s["_" + i3 + "ListenClick"] && this._fire(e3.pointerclick, { evt: t3, target: this, currentTarget: this, pointerId: c2 }), u2 && this._fire(e3.pointerdblclick, { evt: t3, target: this, currentTarget: this, pointerId: c2 }));
              }), o2 || this._fire(e3.pointerup, { evt: t3, target: this, currentTarget: this, pointerId: this._changedPointerPositions[0].id }), s["_" + i3 + "ListenClick"] = false, t3.cancelable && t3.preventDefault();
            }
            _contextmenu(t3) {
              this.setPointersPositions(t3);
              var e3 = this.getIntersection(this.getPointerPosition());
              e3 && e3.isListening() ? e3._fireAndBubble(Ct, { evt: t3 }) : this._fire(Ct, { evt: t3, target: this, currentTarget: this });
            }
            _wheel(t3) {
              this.setPointersPositions(t3);
              var e3 = this.getIntersection(this.getPointerPosition());
              e3 && e3.isListening() ? e3._fireAndBubble(Pt, { evt: t3 }) : this._fire(Pt, { evt: t3, target: this, currentTarget: this });
            }
            _pointercancel(t3) {
              this.setPointersPositions(t3);
              const e3 = et(t3.pointerId) || this.getIntersection(this.getPointerPosition());
              e3 && e3._fireAndBubble(ft, it(t3)), at(t3.pointerId);
            }
            _lostpointercapture(t3) {
              at(t3.pointerId);
            }
            setPointersPositions(t3) {
              var e3 = this._getContentPosition(), i3 = null, r2 = null;
              void 0 !== (t3 = t3 || window.event).touches ? (this._pointerPositions = [], this._changedPointerPositions = [], Array.prototype.forEach.call(t3.touches, (t4) => {
                this._pointerPositions.push({ id: t4.identifier, x: (t4.clientX - e3.left) / e3.scaleX, y: (t4.clientY - e3.top) / e3.scaleY });
              }), Array.prototype.forEach.call(t3.changedTouches || t3.touches, (t4) => {
                this._changedPointerPositions.push({ id: t4.identifier, x: (t4.clientX - e3.left) / e3.scaleX, y: (t4.clientY - e3.top) / e3.scaleY });
              })) : (i3 = (t3.clientX - e3.left) / e3.scaleX, r2 = (t3.clientY - e3.top) / e3.scaleY, this.pointerPos = { x: i3, y: r2 }, this._pointerPositions = [{ x: i3, y: r2, id: m._getFirstPointerId(t3) }], this._changedPointerPositions = [{ x: i3, y: r2, id: m._getFirstPointerId(t3) }]);
            }
            _setPointerPosition(t3) {
              m.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'), this.setPointersPositions(t3);
            }
            _getContentPosition() {
              if (!this.content || !this.content.getBoundingClientRect)
                return { top: 0, left: 0, scaleX: 1, scaleY: 1 };
              var t3 = this.content.getBoundingClientRect();
              return { top: t3.top, left: t3.left, scaleX: t3.width / this.content.clientWidth || 1, scaleY: t3.height / this.content.clientHeight || 1 };
            }
            _buildDOM() {
              if (this.bufferCanvas = new R({ width: this.width(), height: this.height() }), this.bufferHitCanvas = new L({ pixelRatio: 1, width: this.width(), height: this.height() }), s.isBrowser) {
                var t3 = this.container();
                if (!t3)
                  throw "Stage has no container. A container is required.";
                t3.innerHTML = "", this.content = document.createElement("div"), this.content.style.position = "relative", this.content.style.userSelect = "none", this.content.className = "konvajs-content", this.content.setAttribute("role", "presentation"), t3.appendChild(this.content), this._resizeDOM();
              }
            }
            cache() {
              return m.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."), this;
            }
            clearCache() {
              return this;
            }
            batchDraw() {
              return this.getChildren().forEach(function(t3) {
                t3.batchDraw();
              }), this;
            }
          }
          Rt.prototype.nodeType = "Stage", o(Rt), x.addGetterSetter(Rt, "container");
          var Lt = "hasShadow", Ot = "shadowRGBA", Gt = "patternImage", Mt = "linearGradient", Ft = "radialGradient";
          let Bt;
          function Ut() {
            return Bt || (Bt = m.createCanvasElement().getContext("2d"), Bt);
          }
          const jt = {};
          class Ht extends K {
            constructor(t3) {
              let e3;
              for (super(t3); e3 = m.getRandomColor(), !e3 || e3 in jt; )
                ;
              this.colorKey = e3, jt[e3] = this;
            }
            getContext() {
              return m.warn("shape.getContext() method is deprecated. Please do not use it."), this.getLayer().getContext();
            }
            getCanvas() {
              return m.warn("shape.getCanvas() method is deprecated. Please do not use it."), this.getLayer().getCanvas();
            }
            getSceneFunc() {
              return this.attrs.sceneFunc || this._sceneFunc;
            }
            getHitFunc() {
              return this.attrs.hitFunc || this._hitFunc;
            }
            hasShadow() {
              return this._getCache(Lt, this._hasShadow);
            }
            _hasShadow() {
              return this.shadowEnabled() && 0 !== this.shadowOpacity() && !!(this.shadowColor() || this.shadowBlur() || this.shadowOffsetX() || this.shadowOffsetY());
            }
            _getFillPattern() {
              return this._getCache(Gt, this.__getFillPattern);
            }
            __getFillPattern() {
              if (this.fillPatternImage()) {
                const t3 = Ut().createPattern(this.fillPatternImage(), this.fillPatternRepeat() || "repeat");
                if (t3 && t3.setTransform) {
                  const e3 = new h();
                  e3.translate(this.fillPatternX(), this.fillPatternY()), e3.rotate(s.getAngle(this.fillPatternRotation())), e3.scale(this.fillPatternScaleX(), this.fillPatternScaleY()), e3.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());
                  const i3 = e3.getMatrix(), r2 = "undefined" == typeof DOMMatrix ? { a: i3[0], b: i3[1], c: i3[2], d: i3[3], e: i3[4], f: i3[5] } : new DOMMatrix(i3);
                  t3.setTransform(r2);
                }
                return t3;
              }
            }
            _getLinearGradient() {
              return this._getCache(Mt, this.__getLinearGradient);
            }
            __getLinearGradient() {
              var t3 = this.fillLinearGradientColorStops();
              if (t3) {
                for (var e3 = Ut(), i3 = this.fillLinearGradientStartPoint(), r2 = this.fillLinearGradientEndPoint(), n3 = e3.createLinearGradient(i3.x, i3.y, r2.x, r2.y), a2 = 0; a2 < t3.length; a2 += 2)
                  n3.addColorStop(t3[a2], t3[a2 + 1]);
                return n3;
              }
            }
            _getRadialGradient() {
              return this._getCache(Ft, this.__getRadialGradient);
            }
            __getRadialGradient() {
              var t3 = this.fillRadialGradientColorStops();
              if (t3) {
                for (var e3 = Ut(), i3 = this.fillRadialGradientStartPoint(), r2 = this.fillRadialGradientEndPoint(), n3 = e3.createRadialGradient(i3.x, i3.y, this.fillRadialGradientStartRadius(), r2.x, r2.y, this.fillRadialGradientEndRadius()), a2 = 0; a2 < t3.length; a2 += 2)
                  n3.addColorStop(t3[a2], t3[a2 + 1]);
                return n3;
              }
            }
            getShadowRGBA() {
              return this._getCache(Ot, this._getShadowRGBA);
            }
            _getShadowRGBA() {
              if (this.hasShadow()) {
                var t3 = m.colorToRGBA(this.shadowColor());
                return "rgba(" + t3.r + "," + t3.g + "," + t3.b + "," + t3.a * (this.shadowOpacity() || 1) + ")";
              }
            }
            hasFill() {
              return this._calculate("hasFill", ["fillEnabled", "fill", "fillPatternImage", "fillLinearGradientColorStops", "fillRadialGradientColorStops"], () => this.fillEnabled() && !!(this.fill() || this.fillPatternImage() || this.fillLinearGradientColorStops() || this.fillRadialGradientColorStops()));
            }
            hasStroke() {
              return this._calculate("hasStroke", ["strokeEnabled", "strokeWidth", "stroke", "strokeLinearGradientColorStops"], () => this.strokeEnabled() && this.strokeWidth() && !(!this.stroke() && !this.strokeLinearGradientColorStops()));
            }
            hasHitStroke() {
              const t3 = this.hitStrokeWidth();
              return "auto" === t3 ? this.hasStroke() : this.strokeEnabled() && !!t3;
            }
            intersects(t3) {
              var e3 = this.getStage().bufferHitCanvas;
              return e3.getContext().clear(), this.drawHit(e3, null, true), e3.context.getImageData(Math.round(t3.x), Math.round(t3.y), 1, 1).data[3] > 0;
            }
            destroy() {
              return K.prototype.destroy.call(this), delete jt[this.colorKey], delete this.colorKey, this;
            }
            _useBufferCanvas(t3) {
              var e3;
              if (!this.getStage())
                return false;
              if (null !== (e3 = this.attrs.perfectDrawEnabled) && void 0 !== e3 && !e3)
                return false;
              const i3 = t3 || this.hasFill(), r2 = this.hasStroke(), n3 = 1 !== this.getAbsoluteOpacity();
              if (i3 && r2 && n3)
                return true;
              const a2 = this.hasShadow(), s2 = this.shadowForStrokeEnabled();
              return !!(i3 && r2 && a2 && s2);
            }
            setStrokeHitEnabled(t3) {
              m.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."), t3 ? this.hitStrokeWidth("auto") : this.hitStrokeWidth(0);
            }
            getStrokeHitEnabled() {
              return 0 !== this.hitStrokeWidth();
            }
            getSelfRect() {
              var t3 = this.size();
              return { x: this._centroid ? -t3.width / 2 : 0, y: this._centroid ? -t3.height / 2 : 0, width: t3.width, height: t3.height };
            }
            getClientRect(t3 = {}) {
              const e3 = t3.skipTransform, i3 = t3.relativeTo, r2 = this.getSelfRect(), n3 = !t3.skipStroke && this.hasStroke() && this.strokeWidth() || 0, a2 = r2.width + n3, s2 = r2.height + n3, o2 = !t3.skipShadow && this.hasShadow(), h2 = o2 ? this.shadowOffsetX() : 0, l2 = o2 ? this.shadowOffsetY() : 0, c2 = a2 + Math.abs(h2), d2 = s2 + Math.abs(l2), u2 = o2 && this.shadowBlur() || 0, g2 = { width: c2 + 2 * u2, height: d2 + 2 * u2, x: -(n3 / 2 + u2) + Math.min(h2, 0) + r2.x, y: -(n3 / 2 + u2) + Math.min(l2, 0) + r2.y };
              return e3 ? g2 : this._transformedRect(g2, i3);
            }
            drawScene(t3, e3) {
              var i3, r2, n3 = this.getLayer(), a2 = t3 || n3.getCanvas(), s2 = a2.getContext(), o2 = this._getCanvasCache(), h2 = this.getSceneFunc(), l2 = this.hasShadow(), c2 = a2.isCache, d2 = e3 === this;
              if (!this.isVisible() && !d2)
                return this;
              if (o2) {
                s2.save();
                var u2 = this.getAbsoluteTransform(e3).getMatrix();
                return s2.transform(u2[0], u2[1], u2[2], u2[3], u2[4], u2[5]), this._drawCachedSceneCanvas(s2), s2.restore(), this;
              }
              if (!h2)
                return this;
              if (s2.save(), this._useBufferCanvas() && !c2) {
                (r2 = (i3 = this.getStage().bufferCanvas).getContext()).clear(), r2.save(), r2._applyLineJoin(this);
                var g2 = this.getAbsoluteTransform(e3).getMatrix();
                r2.transform(g2[0], g2[1], g2[2], g2[3], g2[4], g2[5]), h2.call(this, r2, this), r2.restore();
                var f2 = i3.pixelRatio;
                l2 && s2._applyShadow(this), s2._applyOpacity(this), s2._applyGlobalCompositeOperation(this), s2.drawImage(i3._canvas, 0, 0, i3.width / f2, i3.height / f2);
              } else
                s2._applyLineJoin(this), d2 || (g2 = this.getAbsoluteTransform(e3).getMatrix(), s2.transform(g2[0], g2[1], g2[2], g2[3], g2[4], g2[5]), s2._applyOpacity(this), s2._applyGlobalCompositeOperation(this)), l2 && s2._applyShadow(this), h2.call(this, s2, this);
              return s2.restore(), this;
            }
            drawHit(t3, e3, i3 = false) {
              if (!this.shouldDrawHit(e3, i3))
                return this;
              var r2 = this.getLayer(), n3 = t3 || r2.hitCanvas, a2 = n3 && n3.getContext(), s2 = this.hitFunc() || this.sceneFunc(), o2 = this._getCanvasCache(), h2 = o2 && o2.hit;
              if (this.colorKey || m.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"), h2) {
                a2.save();
                var l2 = this.getAbsoluteTransform(e3).getMatrix();
                return a2.transform(l2[0], l2[1], l2[2], l2[3], l2[4], l2[5]), this._drawCachedHitCanvas(a2), a2.restore(), this;
              }
              if (!s2)
                return this;
              if (a2.save(), a2._applyLineJoin(this), this !== e3) {
                var c2 = this.getAbsoluteTransform(e3).getMatrix();
                a2.transform(c2[0], c2[1], c2[2], c2[3], c2[4], c2[5]);
              }
              return s2.call(this, a2, this), a2.restore(), this;
            }
            drawHitFromCache(t3 = 0) {
              var e3, i3, r2, n3, a2, s2 = this._getCanvasCache(), o2 = this._getCachedSceneCanvas(), h2 = s2.hit, l2 = h2.getContext(), c2 = h2.getWidth(), d2 = h2.getHeight();
              l2.clear(), l2.drawImage(o2._canvas, 0, 0, c2, d2);
              try {
                for (r2 = (i3 = (e3 = l2.getImageData(0, 0, c2, d2)).data).length, n3 = m._hexToRgb(this.colorKey), a2 = 0; a2 < r2; a2 += 4)
                  i3[a2 + 3] > t3 ? (i3[a2] = n3.r, i3[a2 + 1] = n3.g, i3[a2 + 2] = n3.b, i3[a2 + 3] = 255) : i3[a2 + 3] = 0;
                l2.putImageData(e3, 0, 0);
              } catch (t4) {
                m.error("Unable to draw hit graph from cached scene canvas. " + t4.message);
              }
              return this;
            }
            hasPointerCapture(t3) {
              return rt(t3, this);
            }
            setPointerCapture(t3) {
              nt(t3, this);
            }
            releaseCapture(t3) {
              at(t3);
            }
          }
          Ht.prototype._fillFunc = function(t3) {
            t3.fill();
          }, Ht.prototype._strokeFunc = function(t3) {
            t3.stroke();
          }, Ht.prototype._fillFuncHit = function(t3) {
            t3.fill();
          }, Ht.prototype._strokeFuncHit = function(t3) {
            t3.stroke();
          }, Ht.prototype._centroid = false, Ht.prototype.nodeType = "Shape", o(Ht), Ht.prototype.eventListeners = {}, Ht.prototype.on.call(Ht.prototype, "shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva", function() {
            this._clearCache(Lt);
          }), Ht.prototype.on.call(Ht.prototype, "shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva", function() {
            this._clearCache(Ot);
          }), Ht.prototype.on.call(Ht.prototype, "fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva", function() {
            this._clearCache(Gt);
          }), Ht.prototype.on.call(Ht.prototype, "fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva", function() {
            this._clearCache(Mt);
          }), Ht.prototype.on.call(Ht.prototype, "fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva", function() {
            this._clearCache(Ft);
          }), x.addGetterSetter(Ht, "stroke", void 0, C()), x.addGetterSetter(Ht, "strokeWidth", 2, y()), x.addGetterSetter(Ht, "fillAfterStrokeEnabled", false), x.addGetterSetter(Ht, "hitStrokeWidth", "auto", function() {
            if (s.isUnminified)
              return function(t3, e3) {
                return m._isNumber(t3) || "auto" === t3 || m.warn(v(t3) + ' is a not valid value for "' + e3 + '" attribute. The value should be a number or "auto".'), t3;
              };
          }()), x.addGetterSetter(Ht, "strokeHitEnabled", true, _()), x.addGetterSetter(Ht, "perfectDrawEnabled", true, _()), x.addGetterSetter(Ht, "shadowForStrokeEnabled", true, _()), x.addGetterSetter(Ht, "lineJoin"), x.addGetterSetter(Ht, "lineCap"), x.addGetterSetter(Ht, "sceneFunc"), x.addGetterSetter(Ht, "hitFunc"), x.addGetterSetter(Ht, "dash"), x.addGetterSetter(Ht, "dashOffset", 0, y()), x.addGetterSetter(Ht, "shadowColor", void 0, b()), x.addGetterSetter(Ht, "shadowBlur", 0, y()), x.addGetterSetter(Ht, "shadowOpacity", 1, y()), x.addComponentsGetterSetter(Ht, "shadowOffset", ["x", "y"]), x.addGetterSetter(Ht, "shadowOffsetX", 0, y()), x.addGetterSetter(Ht, "shadowOffsetY", 0, y()), x.addGetterSetter(Ht, "fillPatternImage"), x.addGetterSetter(Ht, "fill", void 0, C()), x.addGetterSetter(Ht, "fillPatternX", 0, y()), x.addGetterSetter(Ht, "fillPatternY", 0, y()), x.addGetterSetter(Ht, "fillLinearGradientColorStops"), x.addGetterSetter(Ht, "strokeLinearGradientColorStops"), x.addGetterSetter(Ht, "fillRadialGradientStartRadius", 0), x.addGetterSetter(Ht, "fillRadialGradientEndRadius", 0), x.addGetterSetter(Ht, "fillRadialGradientColorStops"), x.addGetterSetter(Ht, "fillPatternRepeat", "repeat"), x.addGetterSetter(Ht, "fillEnabled", true), x.addGetterSetter(Ht, "strokeEnabled", true), x.addGetterSetter(Ht, "shadowEnabled", true), x.addGetterSetter(Ht, "dashEnabled", true), x.addGetterSetter(Ht, "strokeScaleEnabled", true), x.addGetterSetter(Ht, "fillPriority", "color"), x.addComponentsGetterSetter(Ht, "fillPatternOffset", ["x", "y"]), x.addGetterSetter(Ht, "fillPatternOffsetX", 0, y()), x.addGetterSetter(Ht, "fillPatternOffsetY", 0, y()), x.addComponentsGetterSetter(Ht, "fillPatternScale", ["x", "y"]), x.addGetterSetter(Ht, "fillPatternScaleX", 1, y()), x.addGetterSetter(Ht, "fillPatternScaleY", 1, y()), x.addComponentsGetterSetter(Ht, "fillLinearGradientStartPoint", ["x", "y"]), x.addComponentsGetterSetter(Ht, "strokeLinearGradientStartPoint", ["x", "y"]), x.addGetterSetter(Ht, "fillLinearGradientStartPointX", 0), x.addGetterSetter(Ht, "strokeLinearGradientStartPointX", 0), x.addGetterSetter(Ht, "fillLinearGradientStartPointY", 0), x.addGetterSetter(Ht, "strokeLinearGradientStartPointY", 0), x.addComponentsGetterSetter(Ht, "fillLinearGradientEndPoint", ["x", "y"]), x.addComponentsGetterSetter(Ht, "strokeLinearGradientEndPoint", ["x", "y"]), x.addGetterSetter(Ht, "fillLinearGradientEndPointX", 0), x.addGetterSetter(Ht, "strokeLinearGradientEndPointX", 0), x.addGetterSetter(Ht, "fillLinearGradientEndPointY", 0), x.addGetterSetter(Ht, "strokeLinearGradientEndPointY", 0), x.addComponentsGetterSetter(Ht, "fillRadialGradientStartPoint", ["x", "y"]), x.addGetterSetter(Ht, "fillRadialGradientStartPointX", 0), x.addGetterSetter(Ht, "fillRadialGradientStartPointY", 0), x.addComponentsGetterSetter(Ht, "fillRadialGradientEndPoint", ["x", "y"]), x.addGetterSetter(Ht, "fillRadialGradientEndPointX", 0), x.addGetterSetter(Ht, "fillRadialGradientEndPointY", 0), x.addGetterSetter(Ht, "fillPatternRotation", 0), x.backCompat(Ht, { dashArray: "dash", getDashArray: "getDash", setDashArray: "getDash", drawFunc: "sceneFunc", getDrawFunc: "getSceneFunc", setDrawFunc: "setSceneFunc", drawHitFunc: "hitFunc", getDrawHitFunc: "getHitFunc", setDrawHitFunc: "setHitFunc" });
          var Nt = [{ x: 0, y: 0 }, { x: -1, y: -1 }, { x: 1, y: -1 }, { x: 1, y: 1 }, { x: -1, y: 1 }], Wt = Nt.length;
          class zt extends Z {
            constructor(t3) {
              super(t3), this.canvas = new R(), this.hitCanvas = new L({ pixelRatio: 1 }), this._waitingForDraw = false, this.on("visibleChange.konva", this._checkVisibility), this._checkVisibility(), this.on("imageSmoothingEnabledChange.konva", this._setSmoothEnabled), this._setSmoothEnabled();
            }
            createPNGStream() {
              return this.canvas._canvas.createPNGStream();
            }
            getCanvas() {
              return this.canvas;
            }
            getNativeCanvasElement() {
              return this.canvas._canvas;
            }
            getHitCanvas() {
              return this.hitCanvas;
            }
            getContext() {
              return this.getCanvas().getContext();
            }
            clear(t3) {
              return this.getContext().clear(t3), this.getHitCanvas().getContext().clear(t3), this;
            }
            setZIndex(t3) {
              super.setZIndex(t3);
              var e3 = this.getStage();
              return e3 && e3.content && (e3.content.removeChild(this.getNativeCanvasElement()), t3 < e3.children.length - 1 ? e3.content.insertBefore(this.getNativeCanvasElement(), e3.children[t3 + 1].getCanvas()._canvas) : e3.content.appendChild(this.getNativeCanvasElement())), this;
            }
            moveToTop() {
              K.prototype.moveToTop.call(this);
              var t3 = this.getStage();
              return t3 && t3.content && (t3.content.removeChild(this.getNativeCanvasElement()), t3.content.appendChild(this.getNativeCanvasElement())), true;
            }
            moveUp() {
              if (!K.prototype.moveUp.call(this))
                return false;
              var t3 = this.getStage();
              return !(!t3 || !t3.content || (t3.content.removeChild(this.getNativeCanvasElement()), this.index < t3.children.length - 1 ? t3.content.insertBefore(this.getNativeCanvasElement(), t3.children[this.index + 1].getCanvas()._canvas) : t3.content.appendChild(this.getNativeCanvasElement()), 0));
            }
            moveDown() {
              if (K.prototype.moveDown.call(this)) {
                var t3 = this.getStage();
                if (t3) {
                  var e3 = t3.children;
                  t3.content && (t3.content.removeChild(this.getNativeCanvasElement()), t3.content.insertBefore(this.getNativeCanvasElement(), e3[this.index + 1].getCanvas()._canvas));
                }
                return true;
              }
              return false;
            }
            moveToBottom() {
              if (K.prototype.moveToBottom.call(this)) {
                var t3 = this.getStage();
                if (t3) {
                  var e3 = t3.children;
                  t3.content && (t3.content.removeChild(this.getNativeCanvasElement()), t3.content.insertBefore(this.getNativeCanvasElement(), e3[1].getCanvas()._canvas));
                }
                return true;
              }
              return false;
            }
            getLayer() {
              return this;
            }
            remove() {
              var t3 = this.getNativeCanvasElement();
              return K.prototype.remove.call(this), t3 && t3.parentNode && m._isInDocument(t3) && t3.parentNode.removeChild(t3), this;
            }
            getStage() {
              return this.parent;
            }
            setSize({ width: t3, height: e3 }) {
              return this.canvas.setSize(t3, e3), this.hitCanvas.setSize(t3, e3), this._setSmoothEnabled(), this;
            }
            _validateAdd(t3) {
              var e3 = t3.getType();
              "Group" !== e3 && "Shape" !== e3 && m.throw("You may only add groups and shapes to a layer.");
            }
            _toKonvaCanvas(t3) {
              return (t3 = t3 || {}).width = t3.width || this.getWidth(), t3.height = t3.height || this.getHeight(), t3.x = void 0 !== t3.x ? t3.x : this.x(), t3.y = void 0 !== t3.y ? t3.y : this.y(), K.prototype._toKonvaCanvas.call(this, t3);
            }
            _checkVisibility() {
              const t3 = this.visible();
              this.canvas._canvas.style.display = t3 ? "block" : "none";
            }
            _setSmoothEnabled() {
              this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();
            }
            getWidth() {
              if (this.parent)
                return this.parent.width();
            }
            setWidth() {
              m.warn('Can not change width of layer. Use "stage.width(value)" function instead.');
            }
            getHeight() {
              if (this.parent)
                return this.parent.height();
            }
            setHeight() {
              m.warn('Can not change height of layer. Use "stage.height(value)" function instead.');
            }
            batchDraw() {
              return this._waitingForDraw || (this._waitingForDraw = true, m.requestAnimFrame(() => {
                this.draw(), this._waitingForDraw = false;
              })), this;
            }
            getIntersection(t3) {
              if (!this.isListening() || !this.isVisible())
                return null;
              for (var e3 = 1, i3 = false; ; ) {
                for (let r2 = 0; r2 < Wt; r2++) {
                  const n3 = Nt[r2], a2 = this._getIntersection({ x: t3.x + n3.x * e3, y: t3.y + n3.y * e3 }), s2 = a2.shape;
                  if (s2)
                    return s2;
                  if (i3 = !!a2.antialiased, !a2.antialiased)
                    break;
                }
                if (!i3)
                  return null;
                e3 += 1;
              }
            }
            _getIntersection(t3) {
              const e3 = this.hitCanvas.pixelRatio, i3 = this.hitCanvas.context.getImageData(Math.round(t3.x * e3), Math.round(t3.y * e3), 1, 1).data, r2 = i3[3];
              if (255 === r2) {
                const t4 = m._rgbToHex(i3[0], i3[1], i3[2]), e4 = jt["#" + t4];
                return e4 ? { shape: e4 } : { antialiased: true };
              }
              return r2 > 0 ? { antialiased: true } : {};
            }
            drawScene(t3, e3) {
              var i3 = this.getLayer(), r2 = t3 || i3 && i3.getCanvas();
              return this._fire("beforeDraw", { node: this }), this.clearBeforeDraw() && r2.getContext().clear(), Z.prototype.drawScene.call(this, r2, e3), this._fire("draw", { node: this }), this;
            }
            drawHit(t3, e3) {
              var i3 = this.getLayer(), r2 = t3 || i3 && i3.hitCanvas;
              return i3 && i3.clearBeforeDraw() && i3.getHitCanvas().getContext().clear(), Z.prototype.drawHit.call(this, r2, e3), this;
            }
            enableHitGraph() {
              return this.hitGraphEnabled(true), this;
            }
            disableHitGraph() {
              return this.hitGraphEnabled(false), this;
            }
            setHitGraphEnabled(t3) {
              m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."), this.listening(t3);
            }
            getHitGraphEnabled(t3) {
              return m.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."), this.listening();
            }
            toggleHitCanvas() {
              if (this.parent && this.parent.content) {
                var t3 = this.parent;
                this.hitCanvas._canvas.parentNode ? t3.content.removeChild(this.hitCanvas._canvas) : t3.content.appendChild(this.hitCanvas._canvas);
              }
            }
          }
          zt.prototype.nodeType = "Layer", o(zt), x.addGetterSetter(zt, "imageSmoothingEnabled", true), x.addGetterSetter(zt, "clearBeforeDraw", true), x.addGetterSetter(zt, "hitGraphEnabled", true, _());
          class Yt extends zt {
            constructor(t3) {
              super(t3), this.listening(false), m.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.');
            }
          }
          Yt.prototype.nodeType = "FastLayer", o(Yt);
          class Xt extends Z {
            _validateAdd(t3) {
              var e3 = t3.getType();
              "Group" !== e3 && "Shape" !== e3 && m.throw("You may only add groups and shapes to groups.");
            }
          }
          Xt.prototype.nodeType = "Group", o(Xt);
          var Vt = n2.performance && n2.performance.now ? function() {
            return n2.performance.now();
          } : function() {
            return (/* @__PURE__ */ new Date()).getTime();
          };
          class qt {
            constructor(t3, e3) {
              this.id = qt.animIdCounter++, this.frame = { time: 0, timeDiff: 0, lastTime: Vt(), frameRate: 0 }, this.func = t3, this.setLayers(e3);
            }
            setLayers(t3) {
              var e3;
              return e3 = t3 ? t3.length > 0 ? t3 : [t3] : [], this.layers = e3, this;
            }
            getLayers() {
              return this.layers;
            }
            addLayer(t3) {
              var e3, i3 = this.layers, r2 = i3.length;
              for (e3 = 0; e3 < r2; e3++)
                if (i3[e3]._id === t3._id)
                  return false;
              return this.layers.push(t3), true;
            }
            isRunning() {
              var t3, e3 = qt.animations, i3 = e3.length;
              for (t3 = 0; t3 < i3; t3++)
                if (e3[t3].id === this.id)
                  return true;
              return false;
            }
            start() {
              return this.stop(), this.frame.timeDiff = 0, this.frame.lastTime = Vt(), qt._addAnimation(this), this;
            }
            stop() {
              return qt._removeAnimation(this), this;
            }
            _updateFrameObject(t3) {
              this.frame.timeDiff = t3 - this.frame.lastTime, this.frame.lastTime = t3, this.frame.time += this.frame.timeDiff, this.frame.frameRate = 1e3 / this.frame.timeDiff;
            }
            static _addAnimation(t3) {
              this.animations.push(t3), this._handleAnimation();
            }
            static _removeAnimation(t3) {
              var e3, i3 = t3.id, r2 = this.animations, n3 = r2.length;
              for (e3 = 0; e3 < n3; e3++)
                if (r2[e3].id === i3) {
                  this.animations.splice(e3, 1);
                  break;
                }
            }
            static _runFrames() {
              var t3, e3, i3, r2, n3, a2, s2, o2, h2 = {}, l2 = this.animations;
              for (r2 = 0; r2 < l2.length; r2++)
                if (e3 = (t3 = l2[r2]).layers, i3 = t3.func, t3._updateFrameObject(Vt()), a2 = e3.length, !i3 || false !== i3.call(t3, t3.frame))
                  for (n3 = 0; n3 < a2; n3++)
                    void 0 !== (s2 = e3[n3])._id && (h2[s2._id] = s2);
              for (o2 in h2)
                h2.hasOwnProperty(o2) && h2[o2].batchDraw();
            }
            static _animationLoop() {
              var t3 = qt;
              t3.animations.length ? (t3._runFrames(), m.requestAnimFrame(t3._animationLoop)) : t3.animRunning = false;
            }
            static _handleAnimation() {
              this.animRunning || (this.animRunning = true, m.requestAnimFrame(this._animationLoop));
            }
          }
          qt.animations = [], qt.animIdCounter = 0, qt.animRunning = false;
          var Qt = { node: 1, duration: 1, easing: 1, onFinish: 1, yoyo: 1 }, Kt = 0, Jt = ["fill", "stroke", "shadowColor"];
          class Zt {
            constructor(t3, e3, i3, r2, n3, a2, s2) {
              this.prop = t3, this.propFunc = e3, this.begin = r2, this._pos = r2, this.duration = a2, this._change = 0, this.prevPos = 0, this.yoyo = s2, this._time = 0, this._position = 0, this._startTime = 0, this._finish = 0, this.func = i3, this._change = n3 - this.begin, this.pause();
            }
            fire(t3) {
              var e3 = this[t3];
              e3 && e3();
            }
            setTime(t3) {
              t3 > this.duration ? this.yoyo ? (this._time = this.duration, this.reverse()) : this.finish() : t3 < 0 ? this.yoyo ? (this._time = 0, this.play()) : this.reset() : (this._time = t3, this.update());
            }
            getTime() {
              return this._time;
            }
            setPosition(t3) {
              this.prevPos = this._pos, this.propFunc(t3), this._pos = t3;
            }
            getPosition(t3) {
              return void 0 === t3 && (t3 = this._time), this.func(t3, this.begin, this._change, this.duration);
            }
            play() {
              this.state = 2, this._startTime = this.getTimer() - this._time, this.onEnterFrame(), this.fire("onPlay");
            }
            reverse() {
              this.state = 3, this._time = this.duration - this._time, this._startTime = this.getTimer() - this._time, this.onEnterFrame(), this.fire("onReverse");
            }
            seek(t3) {
              this.pause(), this._time = t3, this.update(), this.fire("onSeek");
            }
            reset() {
              this.pause(), this._time = 0, this.update(), this.fire("onReset");
            }
            finish() {
              this.pause(), this._time = this.duration, this.update(), this.fire("onFinish");
            }
            update() {
              this.setPosition(this.getPosition(this._time)), this.fire("onUpdate");
            }
            onEnterFrame() {
              var t3 = this.getTimer() - this._startTime;
              2 === this.state ? this.setTime(t3) : 3 === this.state && this.setTime(this.duration - t3);
            }
            pause() {
              this.state = 1, this.fire("onPause");
            }
            getTimer() {
              return (/* @__PURE__ */ new Date()).getTime();
            }
          }
          class $t {
            constructor(t3) {
              var e3, i3, r2 = this, n3 = t3.node, a2 = n3._id, o2 = t3.easing || te.Linear, h2 = !!t3.yoyo;
              e3 = void 0 === t3.duration ? 0.3 : 0 === t3.duration ? 1e-3 : t3.duration, this.node = n3, this._id = Kt++;
              var l2 = n3.getLayer() || (n3 instanceof s.Stage ? n3.getLayers() : null);
              for (i3 in l2 || m.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."), this.anim = new qt(function() {
                r2.tween.onEnterFrame();
              }, l2), this.tween = new Zt(i3, function(t4) {
                r2._tweenFunc(t4);
              }, o2, 0, 1, 1e3 * e3, h2), this._addListeners(), $t.attrs[a2] || ($t.attrs[a2] = {}), $t.attrs[a2][this._id] || ($t.attrs[a2][this._id] = {}), $t.tweens[a2] || ($t.tweens[a2] = {}), t3)
                void 0 === Qt[i3] && this._addAttr(i3, t3[i3]);
              this.reset(), this.onFinish = t3.onFinish, this.onReset = t3.onReset, this.onUpdate = t3.onUpdate;
            }
            _addAttr(t3, e3) {
              var i3, r2, n3, a2, s2, o2, h2, l2, c2 = this.node, d2 = c2._id;
              if ((n3 = $t.tweens[d2][t3]) && delete $t.attrs[d2][n3][t3], i3 = c2.getAttr(t3), m._isArray(e3))
                if (r2 = [], s2 = Math.max(e3.length, i3.length), "points" === t3 && e3.length !== i3.length && (e3.length > i3.length ? (h2 = i3, i3 = m._prepareArrayForTween(i3, e3, c2.closed())) : (o2 = e3, e3 = m._prepareArrayForTween(e3, i3, c2.closed()))), 0 === t3.indexOf("fill"))
                  for (a2 = 0; a2 < s2; a2++)
                    if (a2 % 2 == 0)
                      r2.push(e3[a2] - i3[a2]);
                    else {
                      var u2 = m.colorToRGBA(i3[a2]);
                      l2 = m.colorToRGBA(e3[a2]), i3[a2] = u2, r2.push({ r: l2.r - u2.r, g: l2.g - u2.g, b: l2.b - u2.b, a: l2.a - u2.a });
                    }
                else
                  for (a2 = 0; a2 < s2; a2++)
                    r2.push(e3[a2] - i3[a2]);
              else
                -1 !== Jt.indexOf(t3) ? (i3 = m.colorToRGBA(i3), r2 = { r: (l2 = m.colorToRGBA(e3)).r - i3.r, g: l2.g - i3.g, b: l2.b - i3.b, a: l2.a - i3.a }) : r2 = e3 - i3;
              $t.attrs[d2][this._id][t3] = { start: i3, diff: r2, end: e3, trueEnd: o2, trueStart: h2 }, $t.tweens[d2][t3] = this._id;
            }
            _tweenFunc(t3) {
              var e3, i3, r2, n3, a2, s2, o2, h2, l2 = this.node, c2 = $t.attrs[l2._id][this._id];
              for (e3 in c2) {
                if (r2 = (i3 = c2[e3]).start, n3 = i3.diff, h2 = i3.end, m._isArray(r2))
                  if (a2 = [], o2 = Math.max(r2.length, h2.length), 0 === e3.indexOf("fill"))
                    for (s2 = 0; s2 < o2; s2++)
                      s2 % 2 == 0 ? a2.push((r2[s2] || 0) + n3[s2] * t3) : a2.push("rgba(" + Math.round(r2[s2].r + n3[s2].r * t3) + "," + Math.round(r2[s2].g + n3[s2].g * t3) + "," + Math.round(r2[s2].b + n3[s2].b * t3) + "," + (r2[s2].a + n3[s2].a * t3) + ")");
                  else
                    for (s2 = 0; s2 < o2; s2++)
                      a2.push((r2[s2] || 0) + n3[s2] * t3);
                else
                  a2 = -1 !== Jt.indexOf(e3) ? "rgba(" + Math.round(r2.r + n3.r * t3) + "," + Math.round(r2.g + n3.g * t3) + "," + Math.round(r2.b + n3.b * t3) + "," + (r2.a + n3.a * t3) + ")" : r2 + n3 * t3;
                l2.setAttr(e3, a2);
              }
            }
            _addListeners() {
              this.tween.onPlay = () => {
                this.anim.start();
              }, this.tween.onReverse = () => {
                this.anim.start();
              }, this.tween.onPause = () => {
                this.anim.stop();
              }, this.tween.onFinish = () => {
                var t3 = this.node, e3 = $t.attrs[t3._id][this._id];
                e3.points && e3.points.trueEnd && t3.setAttr("points", e3.points.trueEnd), this.onFinish && this.onFinish.call(this);
              }, this.tween.onReset = () => {
                var t3 = this.node, e3 = $t.attrs[t3._id][this._id];
                e3.points && e3.points.trueStart && t3.points(e3.points.trueStart), this.onReset && this.onReset();
              }, this.tween.onUpdate = () => {
                this.onUpdate && this.onUpdate.call(this);
              };
            }
            play() {
              return this.tween.play(), this;
            }
            reverse() {
              return this.tween.reverse(), this;
            }
            reset() {
              return this.tween.reset(), this;
            }
            seek(t3) {
              return this.tween.seek(1e3 * t3), this;
            }
            pause() {
              return this.tween.pause(), this;
            }
            finish() {
              return this.tween.finish(), this;
            }
            destroy() {
              var t3, e3 = this.node._id, i3 = this._id, r2 = $t.tweens[e3];
              for (t3 in this.pause(), r2)
                delete $t.tweens[e3][t3];
              delete $t.attrs[e3][i3];
            }
          }
          $t.attrs = {}, $t.tweens = {}, K.prototype.to = function(t3) {
            var e3 = t3.onFinish;
            t3.node = this, t3.onFinish = function() {
              this.destroy(), e3 && e3();
            }, new $t(t3).play();
          };
          const te = { BackEaseIn(t3, e3, i3, r2) {
            var n3 = 1.70158;
            return i3 * (t3 /= r2) * t3 * ((n3 + 1) * t3 - n3) + e3;
          }, BackEaseOut(t3, e3, i3, r2) {
            var n3 = 1.70158;
            return i3 * ((t3 = t3 / r2 - 1) * t3 * ((n3 + 1) * t3 + n3) + 1) + e3;
          }, BackEaseInOut(t3, e3, i3, r2) {
            var n3 = 1.70158;
            return (t3 /= r2 / 2) < 1 ? i3 / 2 * (t3 * t3 * ((1 + (n3 *= 1.525)) * t3 - n3)) + e3 : i3 / 2 * ((t3 -= 2) * t3 * ((1 + (n3 *= 1.525)) * t3 + n3) + 2) + e3;
          }, ElasticEaseIn(t3, e3, i3, r2, n3, a2) {
            var s2 = 0;
            return 0 === t3 ? e3 : 1 == (t3 /= r2) ? e3 + i3 : (a2 || (a2 = 0.3 * r2), !n3 || n3 < Math.abs(i3) ? (n3 = i3, s2 = a2 / 4) : s2 = a2 / (2 * Math.PI) * Math.asin(i3 / n3), -n3 * Math.pow(2, 10 * (t3 -= 1)) * Math.sin((t3 * r2 - s2) * (2 * Math.PI) / a2) + e3);
          }, ElasticEaseOut(t3, e3, i3, r2, n3, a2) {
            var s2 = 0;
            return 0 === t3 ? e3 : 1 == (t3 /= r2) ? e3 + i3 : (a2 || (a2 = 0.3 * r2), !n3 || n3 < Math.abs(i3) ? (n3 = i3, s2 = a2 / 4) : s2 = a2 / (2 * Math.PI) * Math.asin(i3 / n3), n3 * Math.pow(2, -10 * t3) * Math.sin((t3 * r2 - s2) * (2 * Math.PI) / a2) + i3 + e3);
          }, ElasticEaseInOut(t3, e3, i3, r2, n3, a2) {
            var s2 = 0;
            return 0 === t3 ? e3 : 2 == (t3 /= r2 / 2) ? e3 + i3 : (a2 || (a2 = r2 * (0.3 * 1.5)), !n3 || n3 < Math.abs(i3) ? (n3 = i3, s2 = a2 / 4) : s2 = a2 / (2 * Math.PI) * Math.asin(i3 / n3), t3 < 1 ? n3 * Math.pow(2, 10 * (t3 -= 1)) * Math.sin((t3 * r2 - s2) * (2 * Math.PI) / a2) * -0.5 + e3 : n3 * Math.pow(2, -10 * (t3 -= 1)) * Math.sin((t3 * r2 - s2) * (2 * Math.PI) / a2) * 0.5 + i3 + e3);
          }, BounceEaseOut: (t3, e3, i3, r2) => (t3 /= r2) < 1 / 2.75 ? i3 * (7.5625 * t3 * t3) + e3 : t3 < 2 / 2.75 ? i3 * (7.5625 * (t3 -= 1.5 / 2.75) * t3 + 0.75) + e3 : t3 < 2.5 / 2.75 ? i3 * (7.5625 * (t3 -= 2.25 / 2.75) * t3 + 0.9375) + e3 : i3 * (7.5625 * (t3 -= 2.625 / 2.75) * t3 + 0.984375) + e3, BounceEaseIn: (t3, e3, i3, r2) => i3 - te.BounceEaseOut(r2 - t3, 0, i3, r2) + e3, BounceEaseInOut: (t3, e3, i3, r2) => t3 < r2 / 2 ? 0.5 * te.BounceEaseIn(2 * t3, 0, i3, r2) + e3 : 0.5 * te.BounceEaseOut(2 * t3 - r2, 0, i3, r2) + 0.5 * i3 + e3, EaseIn: (t3, e3, i3, r2) => i3 * (t3 /= r2) * t3 + e3, EaseOut: (t3, e3, i3, r2) => -i3 * (t3 /= r2) * (t3 - 2) + e3, EaseInOut: (t3, e3, i3, r2) => (t3 /= r2 / 2) < 1 ? i3 / 2 * t3 * t3 + e3 : -i3 / 2 * (--t3 * (t3 - 2) - 1) + e3, StrongEaseIn: (t3, e3, i3, r2) => i3 * (t3 /= r2) * t3 * t3 * t3 * t3 + e3, StrongEaseOut: (t3, e3, i3, r2) => i3 * ((t3 = t3 / r2 - 1) * t3 * t3 * t3 * t3 + 1) + e3, StrongEaseInOut: (t3, e3, i3, r2) => (t3 /= r2 / 2) < 1 ? i3 / 2 * t3 * t3 * t3 * t3 * t3 + e3 : i3 / 2 * ((t3 -= 2) * t3 * t3 * t3 * t3 + 2) + e3, Linear: (t3, e3, i3, r2) => i3 * t3 / r2 + e3 }, ee = m._assign(s, { Util: m, Transform: h, Node: K, Container: Z, Stage: Rt, stages: It, Layer: zt, FastLayer: Yt, Group: Xt, DD: O, Shape: Ht, shapes: jt, Animation: qt, Tween: $t, Easings: te, Context: E, Canvas: I });
          var ie = r(918), re = r.n(ie), ne = r(303), ae = r.n(ne);
          class se extends Ht {
            constructor(t3) {
              super(t3), this.on("imageChange.konva", () => {
                this._setImageLoad();
              }), this._setImageLoad();
            }
            _setImageLoad() {
              const t3 = this.image();
              t3 && t3.complete || t3 && 4 === t3.readyState || t3 && t3.addEventListener && t3.addEventListener("load", () => {
                this._requestDraw();
              });
            }
            _useBufferCanvas() {
              return super._useBufferCanvas(true);
            }
            _sceneFunc(t3) {
              const e3 = this.getWidth(), i3 = this.getHeight(), r2 = this.attrs.image;
              let n3;
              if (r2) {
                const t4 = this.attrs.cropWidth, a2 = this.attrs.cropHeight;
                n3 = t4 && a2 ? [r2, this.cropX(), this.cropY(), t4, a2, 0, 0, e3, i3] : [r2, 0, 0, e3, i3];
              }
              (this.hasFill() || this.hasStroke()) && (t3.beginPath(), t3.rect(0, 0, e3, i3), t3.closePath(), t3.fillStrokeShape(this)), r2 && t3.drawImage.apply(t3, n3);
            }
            _hitFunc(t3) {
              var e3 = this.width(), i3 = this.height();
              t3.beginPath(), t3.rect(0, 0, e3, i3), t3.closePath(), t3.fillStrokeShape(this);
            }
            getWidth() {
              var t3, e3;
              return null !== (t3 = this.attrs.width) && void 0 !== t3 ? t3 : null === (e3 = this.image()) || void 0 === e3 ? void 0 : e3.width;
            }
            getHeight() {
              var t3, e3;
              return null !== (t3 = this.attrs.height) && void 0 !== t3 ? t3 : null === (e3 = this.image()) || void 0 === e3 ? void 0 : e3.height;
            }
            static fromURL(t3, e3, i3 = null) {
              var r2 = m.createImageElement();
              r2.onload = function() {
                var t4 = new se({ image: r2 });
                e3(t4);
              }, r2.onerror = i3, r2.crossOrigin = "Anonymous", r2.src = t3;
            }
          }
          se.prototype.className = "Image", o(se), x.addGetterSetter(se, "image"), x.addComponentsGetterSetter(se, "crop", ["x", "y", "width", "height"]), x.addGetterSetter(se, "cropX", 0, y()), x.addGetterSetter(se, "cropY", 0, y()), x.addGetterSetter(se, "cropWidth", 0, y()), x.addGetterSetter(se, "cropHeight", 0, y());
          class oe extends Ht {
            _sceneFunc(t3) {
              t3.beginPath(), t3.arc(0, 0, this.attrs.radius || 0, 0, 2 * Math.PI, false), t3.closePath(), t3.fillStrokeShape(this);
            }
            getWidth() {
              return 2 * this.radius();
            }
            getHeight() {
              return 2 * this.radius();
            }
            setWidth(t3) {
              this.radius() !== t3 / 2 && this.radius(t3 / 2);
            }
            setHeight(t3) {
              this.radius() !== t3 / 2 && this.radius(t3 / 2);
            }
          }
          oe.prototype._centroid = true, oe.prototype.className = "Circle", oe.prototype._attrsAffectingSize = ["radius"], o(oe), x.addGetterSetter(oe, "radius", 0, y());
          class he extends Ht {
            _sceneFunc(t3) {
              var e3 = this.cornerRadius(), i3 = this.width(), r2 = this.height();
              if (t3.beginPath(), e3) {
                let n3 = 0, a2 = 0, s2 = 0, o2 = 0;
                "number" == typeof e3 ? n3 = a2 = s2 = o2 = Math.min(e3, i3 / 2, r2 / 2) : (n3 = Math.min(e3[0] || 0, i3 / 2, r2 / 2), a2 = Math.min(e3[1] || 0, i3 / 2, r2 / 2), o2 = Math.min(e3[2] || 0, i3 / 2, r2 / 2), s2 = Math.min(e3[3] || 0, i3 / 2, r2 / 2)), t3.moveTo(n3, 0), t3.lineTo(i3 - a2, 0), t3.arc(i3 - a2, a2, a2, 3 * Math.PI / 2, 0, false), t3.lineTo(i3, r2 - o2), t3.arc(i3 - o2, r2 - o2, o2, 0, Math.PI / 2, false), t3.lineTo(s2, r2), t3.arc(s2, r2 - s2, s2, Math.PI / 2, Math.PI, false), t3.lineTo(0, n3), t3.arc(n3, n3, n3, Math.PI, 3 * Math.PI / 2, false);
              } else
                t3.rect(0, 0, i3, r2);
              t3.closePath(), t3.fillStrokeShape(this);
            }
          }
          he.prototype.className = "Rect", o(he), x.addGetterSetter(he, "cornerRadius", 0, function(t3) {
            if (s.isUnminified)
              return function(t4, e3) {
                let i3 = m._isNumber(t4), r2 = m._isArray(t4) && 4 == t4.length;
                return i3 || r2 || m.warn(v(t4) + ' is a not valid value for "' + e3 + '" attribute. The value should be a number or Array<number>(4)'), t4;
              };
          }());
          class le extends Ht {
            constructor(t3) {
              super(t3), this.dataArray = [], this.pathLength = 0, this.dataArray = le.parsePathData(this.data()), this.pathLength = 0;
              for (var e3 = 0; e3 < this.dataArray.length; ++e3)
                this.pathLength += this.dataArray[e3].pathLength;
              this.on("dataChange.konva", function() {
                this.dataArray = le.parsePathData(this.data()), this.pathLength = 0;
                for (var t4 = 0; t4 < this.dataArray.length; ++t4)
                  this.pathLength += this.dataArray[t4].pathLength;
              });
            }
            _sceneFunc(t3) {
              var e3 = this.dataArray;
              t3.beginPath();
              for (var i3 = false, r2 = 0; r2 < e3.length; r2++) {
                var n3 = e3[r2].command, a2 = e3[r2].points;
                switch (n3) {
                  case "L":
                    t3.lineTo(a2[0], a2[1]);
                    break;
                  case "M":
                    t3.moveTo(a2[0], a2[1]);
                    break;
                  case "C":
                    t3.bezierCurveTo(a2[0], a2[1], a2[2], a2[3], a2[4], a2[5]);
                    break;
                  case "Q":
                    t3.quadraticCurveTo(a2[0], a2[1], a2[2], a2[3]);
                    break;
                  case "A":
                    var s2 = a2[0], o2 = a2[1], h2 = a2[2], l2 = a2[3], c2 = a2[4], d2 = a2[5], u2 = a2[6], g2 = a2[7], f2 = h2 > l2 ? h2 : l2, p2 = h2 > l2 ? 1 : h2 / l2, m2 = h2 > l2 ? l2 / h2 : 1;
                    t3.translate(s2, o2), t3.rotate(u2), t3.scale(p2, m2), t3.arc(0, 0, f2, c2, c2 + d2, 1 - g2), t3.scale(1 / p2, 1 / m2), t3.rotate(-u2), t3.translate(-s2, -o2);
                    break;
                  case "z":
                    i3 = true, t3.closePath();
                }
              }
              i3 || this.hasFill() ? t3.fillStrokeShape(this) : t3.strokeShape(this);
            }
            getSelfRect() {
              var t3 = [];
              this.dataArray.forEach(function(e4) {
                if ("A" === e4.command) {
                  var i4 = e4.points[4], r3 = e4.points[5], n4 = e4.points[4] + r3, a3 = Math.PI / 180;
                  if (Math.abs(i4 - n4) < a3 && (a3 = Math.abs(i4 - n4)), r3 < 0)
                    for (let r4 = i4 - a3; r4 > n4; r4 -= a3) {
                      const i5 = le.getPointOnEllipticalArc(e4.points[0], e4.points[1], e4.points[2], e4.points[3], r4, 0);
                      t3.push(i5.x, i5.y);
                    }
                  else
                    for (let r4 = i4 + a3; r4 < n4; r4 += a3) {
                      const i5 = le.getPointOnEllipticalArc(e4.points[0], e4.points[1], e4.points[2], e4.points[3], r4, 0);
                      t3.push(i5.x, i5.y);
                    }
                } else if ("C" === e4.command)
                  for (let i5 = 0; i5 <= 1; i5 += 0.01) {
                    const r4 = le.getPointOnCubicBezier(i5, e4.start.x, e4.start.y, e4.points[0], e4.points[1], e4.points[2], e4.points[3], e4.points[4], e4.points[5]);
                    t3.push(r4.x, r4.y);
                  }
                else
                  t3 = t3.concat(e4.points);
              });
              for (var e3, i3, r2 = t3[0], n3 = t3[0], a2 = t3[1], s2 = t3[1], o2 = 0; o2 < t3.length / 2; o2++)
                e3 = t3[2 * o2], i3 = t3[2 * o2 + 1], isNaN(e3) || (r2 = Math.min(r2, e3), n3 = Math.max(n3, e3)), isNaN(i3) || (a2 = Math.min(a2, i3), s2 = Math.max(s2, i3));
              return { x: r2, y: a2, width: n3 - r2, height: s2 - a2 };
            }
            getLength() {
              return this.pathLength;
            }
            getPointAtLength(t3) {
              var e3, i3 = 0, r2 = this.dataArray.length;
              if (!r2)
                return null;
              for (; i3 < r2 && t3 > this.dataArray[i3].pathLength; )
                t3 -= this.dataArray[i3].pathLength, ++i3;
              if (i3 === r2)
                return { x: (e3 = this.dataArray[i3 - 1].points.slice(-2))[0], y: e3[1] };
              if (t3 < 0.01)
                return { x: (e3 = this.dataArray[i3].points.slice(0, 2))[0], y: e3[1] };
              var n3 = this.dataArray[i3], a2 = n3.points;
              switch (n3.command) {
                case "L":
                  return le.getPointOnLine(t3, n3.start.x, n3.start.y, a2[0], a2[1]);
                case "C":
                  return le.getPointOnCubicBezier(t3 / n3.pathLength, n3.start.x, n3.start.y, a2[0], a2[1], a2[2], a2[3], a2[4], a2[5]);
                case "Q":
                  return le.getPointOnQuadraticBezier(t3 / n3.pathLength, n3.start.x, n3.start.y, a2[0], a2[1], a2[2], a2[3]);
                case "A":
                  var s2 = a2[0], o2 = a2[1], h2 = a2[2], l2 = a2[3], c2 = a2[4], d2 = a2[5], u2 = a2[6];
                  return c2 += d2 * t3 / n3.pathLength, le.getPointOnEllipticalArc(s2, o2, h2, l2, c2, u2);
              }
              return null;
            }
            static getLineLength(t3, e3, i3, r2) {
              return Math.sqrt((i3 - t3) * (i3 - t3) + (r2 - e3) * (r2 - e3));
            }
            static getPointOnLine(t3, e3, i3, r2, n3, a2, s2) {
              void 0 === a2 && (a2 = e3), void 0 === s2 && (s2 = i3);
              var o2 = (n3 - i3) / (r2 - e3 + 1e-8), h2 = Math.sqrt(t3 * t3 / (1 + o2 * o2));
              r2 < e3 && (h2 *= -1);
              var l2, c2 = o2 * h2;
              if (r2 === e3)
                l2 = { x: a2, y: s2 + c2 };
              else if ((s2 - i3) / (a2 - e3 + 1e-8) === o2)
                l2 = { x: a2 + h2, y: s2 + c2 };
              else {
                var d2, u2, g2 = this.getLineLength(e3, i3, r2, n3), f2 = (a2 - e3) * (r2 - e3) + (s2 - i3) * (n3 - i3);
                d2 = e3 + (f2 /= g2 * g2) * (r2 - e3), u2 = i3 + f2 * (n3 - i3);
                var p2 = this.getLineLength(a2, s2, d2, u2), m2 = Math.sqrt(t3 * t3 - p2 * p2);
                h2 = Math.sqrt(m2 * m2 / (1 + o2 * o2)), r2 < e3 && (h2 *= -1), l2 = { x: d2 + h2, y: u2 + (c2 = o2 * h2) };
              }
              return l2;
            }
            static getPointOnCubicBezier(t3, e3, i3, r2, n3, a2, s2, o2, h2) {
              function l2(t4) {
                return t4 * t4 * t4;
              }
              function c2(t4) {
                return 3 * t4 * t4 * (1 - t4);
              }
              function d2(t4) {
                return 3 * t4 * (1 - t4) * (1 - t4);
              }
              function u2(t4) {
                return (1 - t4) * (1 - t4) * (1 - t4);
              }
              return { x: o2 * l2(t3) + a2 * c2(t3) + r2 * d2(t3) + e3 * u2(t3), y: h2 * l2(t3) + s2 * c2(t3) + n3 * d2(t3) + i3 * u2(t3) };
            }
            static getPointOnQuadraticBezier(t3, e3, i3, r2, n3, a2, s2) {
              function o2(t4) {
                return t4 * t4;
              }
              function h2(t4) {
                return 2 * t4 * (1 - t4);
              }
              function l2(t4) {
                return (1 - t4) * (1 - t4);
              }
              return { x: a2 * o2(t3) + r2 * h2(t3) + e3 * l2(t3), y: s2 * o2(t3) + n3 * h2(t3) + i3 * l2(t3) };
            }
            static getPointOnEllipticalArc(t3, e3, i3, r2, n3, a2) {
              var s2 = Math.cos(a2), o2 = Math.sin(a2), h2 = i3 * Math.cos(n3), l2 = r2 * Math.sin(n3);
              return { x: t3 + (h2 * s2 - l2 * o2), y: e3 + (h2 * o2 + l2 * s2) };
            }
            static parsePathData(t3) {
              if (!t3)
                return [];
              var e3 = t3, i3 = ["m", "M", "l", "L", "v", "V", "h", "H", "z", "Z", "c", "C", "q", "Q", "t", "T", "s", "S", "a", "A"];
              e3 = e3.replace(new RegExp(" ", "g"), ",");
              for (var r2 = 0; r2 < i3.length; r2++)
                e3 = e3.replace(new RegExp(i3[r2], "g"), "|" + i3[r2]);
              var n3, a2 = e3.split("|"), s2 = [], o2 = [], h2 = 0, l2 = 0, c2 = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;
              for (r2 = 1; r2 < a2.length; r2++) {
                var d2 = a2[r2], u2 = d2.charAt(0);
                for (d2 = d2.slice(1), o2.length = 0; n3 = c2.exec(d2); )
                  o2.push(n3[0]);
                for (var g2 = [], f2 = 0, p2 = o2.length; f2 < p2; f2++)
                  if ("00" !== o2[f2]) {
                    var m2 = parseFloat(o2[f2]);
                    isNaN(m2) ? g2.push(0) : g2.push(m2);
                  } else
                    g2.push(0, 0);
                for (; g2.length > 0 && !isNaN(g2[0]); ) {
                  var v2, y2, b2, C2, _2, S2, w2, x2, P2, A2, k2 = null, E2 = [], D2 = h2, T2 = l2;
                  switch (u2) {
                    case "l":
                      h2 += g2.shift(), l2 += g2.shift(), k2 = "L", E2.push(h2, l2);
                      break;
                    case "L":
                      h2 = g2.shift(), l2 = g2.shift(), E2.push(h2, l2);
                      break;
                    case "m":
                      var I2 = g2.shift(), R2 = g2.shift();
                      if (h2 += I2, l2 += R2, k2 = "M", s2.length > 2 && "z" === s2[s2.length - 1].command) {
                        for (var L2 = s2.length - 2; L2 >= 0; L2--)
                          if ("M" === s2[L2].command) {
                            h2 = s2[L2].points[0] + I2, l2 = s2[L2].points[1] + R2;
                            break;
                          }
                      }
                      E2.push(h2, l2), u2 = "l";
                      break;
                    case "M":
                      h2 = g2.shift(), l2 = g2.shift(), k2 = "M", E2.push(h2, l2), u2 = "L";
                      break;
                    case "h":
                      h2 += g2.shift(), k2 = "L", E2.push(h2, l2);
                      break;
                    case "H":
                      h2 = g2.shift(), k2 = "L", E2.push(h2, l2);
                      break;
                    case "v":
                      l2 += g2.shift(), k2 = "L", E2.push(h2, l2);
                      break;
                    case "V":
                      l2 = g2.shift(), k2 = "L", E2.push(h2, l2);
                      break;
                    case "C":
                      E2.push(g2.shift(), g2.shift(), g2.shift(), g2.shift()), h2 = g2.shift(), l2 = g2.shift(), E2.push(h2, l2);
                      break;
                    case "c":
                      E2.push(h2 + g2.shift(), l2 + g2.shift(), h2 + g2.shift(), l2 + g2.shift()), h2 += g2.shift(), l2 += g2.shift(), k2 = "C", E2.push(h2, l2);
                      break;
                    case "S":
                      y2 = h2, b2 = l2, "C" === (v2 = s2[s2.length - 1]).command && (y2 = h2 + (h2 - v2.points[2]), b2 = l2 + (l2 - v2.points[3])), E2.push(y2, b2, g2.shift(), g2.shift()), h2 = g2.shift(), l2 = g2.shift(), k2 = "C", E2.push(h2, l2);
                      break;
                    case "s":
                      y2 = h2, b2 = l2, "C" === (v2 = s2[s2.length - 1]).command && (y2 = h2 + (h2 - v2.points[2]), b2 = l2 + (l2 - v2.points[3])), E2.push(y2, b2, h2 + g2.shift(), l2 + g2.shift()), h2 += g2.shift(), l2 += g2.shift(), k2 = "C", E2.push(h2, l2);
                      break;
                    case "Q":
                      E2.push(g2.shift(), g2.shift()), h2 = g2.shift(), l2 = g2.shift(), E2.push(h2, l2);
                      break;
                    case "q":
                      E2.push(h2 + g2.shift(), l2 + g2.shift()), h2 += g2.shift(), l2 += g2.shift(), k2 = "Q", E2.push(h2, l2);
                      break;
                    case "T":
                      y2 = h2, b2 = l2, "Q" === (v2 = s2[s2.length - 1]).command && (y2 = h2 + (h2 - v2.points[0]), b2 = l2 + (l2 - v2.points[1])), h2 = g2.shift(), l2 = g2.shift(), k2 = "Q", E2.push(y2, b2, h2, l2);
                      break;
                    case "t":
                      y2 = h2, b2 = l2, "Q" === (v2 = s2[s2.length - 1]).command && (y2 = h2 + (h2 - v2.points[0]), b2 = l2 + (l2 - v2.points[1])), h2 += g2.shift(), l2 += g2.shift(), k2 = "Q", E2.push(y2, b2, h2, l2);
                      break;
                    case "A":
                      C2 = g2.shift(), _2 = g2.shift(), S2 = g2.shift(), w2 = g2.shift(), x2 = g2.shift(), P2 = h2, A2 = l2, h2 = g2.shift(), l2 = g2.shift(), k2 = "A", E2 = this.convertEndpointToCenterParameterization(P2, A2, h2, l2, w2, x2, C2, _2, S2);
                      break;
                    case "a":
                      C2 = g2.shift(), _2 = g2.shift(), S2 = g2.shift(), w2 = g2.shift(), x2 = g2.shift(), P2 = h2, A2 = l2, h2 += g2.shift(), l2 += g2.shift(), k2 = "A", E2 = this.convertEndpointToCenterParameterization(P2, A2, h2, l2, w2, x2, C2, _2, S2);
                  }
                  s2.push({ command: k2 || u2, points: E2, start: { x: D2, y: T2 }, pathLength: this.calcLength(D2, T2, k2 || u2, E2) });
                }
                "z" !== u2 && "Z" !== u2 || s2.push({ command: "z", points: [], start: void 0, pathLength: 0 });
              }
              return s2;
            }
            static calcLength(t3, e3, i3, r2) {
              var n3, a2, s2, o2, h2 = le;
              switch (i3) {
                case "L":
                  return h2.getLineLength(t3, e3, r2[0], r2[1]);
                case "C":
                  for (n3 = 0, a2 = h2.getPointOnCubicBezier(0, t3, e3, r2[0], r2[1], r2[2], r2[3], r2[4], r2[5]), o2 = 0.01; o2 <= 1; o2 += 0.01)
                    s2 = h2.getPointOnCubicBezier(o2, t3, e3, r2[0], r2[1], r2[2], r2[3], r2[4], r2[5]), n3 += h2.getLineLength(a2.x, a2.y, s2.x, s2.y), a2 = s2;
                  return n3;
                case "Q":
                  for (n3 = 0, a2 = h2.getPointOnQuadraticBezier(0, t3, e3, r2[0], r2[1], r2[2], r2[3]), o2 = 0.01; o2 <= 1; o2 += 0.01)
                    s2 = h2.getPointOnQuadraticBezier(o2, t3, e3, r2[0], r2[1], r2[2], r2[3]), n3 += h2.getLineLength(a2.x, a2.y, s2.x, s2.y), a2 = s2;
                  return n3;
                case "A":
                  n3 = 0;
                  var l2 = r2[4], c2 = r2[5], d2 = r2[4] + c2, u2 = Math.PI / 180;
                  if (Math.abs(l2 - d2) < u2 && (u2 = Math.abs(l2 - d2)), a2 = h2.getPointOnEllipticalArc(r2[0], r2[1], r2[2], r2[3], l2, 0), c2 < 0)
                    for (o2 = l2 - u2; o2 > d2; o2 -= u2)
                      s2 = h2.getPointOnEllipticalArc(r2[0], r2[1], r2[2], r2[3], o2, 0), n3 += h2.getLineLength(a2.x, a2.y, s2.x, s2.y), a2 = s2;
                  else
                    for (o2 = l2 + u2; o2 < d2; o2 += u2)
                      s2 = h2.getPointOnEllipticalArc(r2[0], r2[1], r2[2], r2[3], o2, 0), n3 += h2.getLineLength(a2.x, a2.y, s2.x, s2.y), a2 = s2;
                  return s2 = h2.getPointOnEllipticalArc(r2[0], r2[1], r2[2], r2[3], d2, 0), n3 + h2.getLineLength(a2.x, a2.y, s2.x, s2.y);
              }
              return 0;
            }
            static convertEndpointToCenterParameterization(t3, e3, i3, r2, n3, a2, s2, o2, h2) {
              var l2 = h2 * (Math.PI / 180), c2 = Math.cos(l2) * (t3 - i3) / 2 + Math.sin(l2) * (e3 - r2) / 2, d2 = -1 * Math.sin(l2) * (t3 - i3) / 2 + Math.cos(l2) * (e3 - r2) / 2, u2 = c2 * c2 / (s2 * s2) + d2 * d2 / (o2 * o2);
              u2 > 1 && (s2 *= Math.sqrt(u2), o2 *= Math.sqrt(u2));
              var g2 = Math.sqrt((s2 * s2 * (o2 * o2) - s2 * s2 * (d2 * d2) - o2 * o2 * (c2 * c2)) / (s2 * s2 * (d2 * d2) + o2 * o2 * (c2 * c2)));
              n3 === a2 && (g2 *= -1), isNaN(g2) && (g2 = 0);
              var f2 = g2 * s2 * d2 / o2, p2 = g2 * -o2 * c2 / s2, m2 = (t3 + i3) / 2 + Math.cos(l2) * f2 - Math.sin(l2) * p2, v2 = (e3 + r2) / 2 + Math.sin(l2) * f2 + Math.cos(l2) * p2, y2 = function(t4) {
                return Math.sqrt(t4[0] * t4[0] + t4[1] * t4[1]);
              }, b2 = function(t4, e4) {
                return (t4[0] * e4[0] + t4[1] * e4[1]) / (y2(t4) * y2(e4));
              }, C2 = function(t4, e4) {
                return (t4[0] * e4[1] < t4[1] * e4[0] ? -1 : 1) * Math.acos(b2(t4, e4));
              }, _2 = C2([1, 0], [(c2 - f2) / s2, (d2 - p2) / o2]), S2 = [(c2 - f2) / s2, (d2 - p2) / o2], w2 = [(-1 * c2 - f2) / s2, (-1 * d2 - p2) / o2], x2 = C2(S2, w2);
              return b2(S2, w2) <= -1 && (x2 = Math.PI), b2(S2, w2) >= 1 && (x2 = 0), 0 === a2 && x2 > 0 && (x2 -= 2 * Math.PI), 1 === a2 && x2 < 0 && (x2 += 2 * Math.PI), [m2, v2, s2, o2, _2, x2, l2, a2];
            }
          }
          function ce(t3) {
            return (ce = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            })(t3);
          }
          function de(t3, e3) {
            var i3 = Object.keys(t3);
            if (Object.getOwnPropertySymbols) {
              var r2 = Object.getOwnPropertySymbols(t3);
              e3 && (r2 = r2.filter(function(e4) {
                return Object.getOwnPropertyDescriptor(t3, e4).enumerable;
              })), i3.push.apply(i3, r2);
            }
            return i3;
          }
          function ue(t3) {
            for (var e3 = 1; e3 < arguments.length; e3++) {
              var i3 = null != arguments[e3] ? arguments[e3] : {};
              e3 % 2 ? de(Object(i3), true).forEach(function(e4) {
                ye(t3, e4, i3[e4]);
              }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t3, Object.getOwnPropertyDescriptors(i3)) : de(Object(i3)).forEach(function(e4) {
                Object.defineProperty(t3, e4, Object.getOwnPropertyDescriptor(i3, e4));
              });
            }
            return t3;
          }
          function ge(t3, e3) {
            for (var i3 = 0; i3 < e3.length; i3++) {
              var r2 = e3[i3];
              r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(t3, r2.key, r2);
            }
          }
          function fe(t3, e3) {
            return (fe = Object.setPrototypeOf || function(t4, e4) {
              return t4.__proto__ = e4, t4;
            })(t3, e3);
          }
          function pe(t3, e3) {
            return !e3 || "object" !== ce(e3) && "function" != typeof e3 ? me(t3) : e3;
          }
          function me(t3) {
            if (void 0 === t3)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return t3;
          }
          function ve(t3) {
            return (ve = Object.setPrototypeOf ? Object.getPrototypeOf : function(t4) {
              return t4.__proto__ || Object.getPrototypeOf(t4);
            })(t3);
          }
          function ye(t3, e3, i3) {
            return e3 in t3 ? Object.defineProperty(t3, e3, { value: i3, enumerable: true, configurable: true, writable: true }) : t3[e3] = i3, t3;
          }
          le.prototype.className = "Path", le.prototype._attrsAffectingSize = ["data"], o(le), x.addGetterSetter(le, "data");
          var be = function(t3) {
            !function(t4, e3) {
              if ("function" != typeof e3 && null !== e3)
                throw new TypeError("Super expression must either be null or a function");
              t4.prototype = Object.create(e3 && e3.prototype, { constructor: { value: t4, writable: true, configurable: true } }), e3 && fe(t4, e3);
            }(o2, t3);
            var i3, r2, n3, a2, s2 = (n3 = o2, a2 = function() {
              if ("undefined" == typeof Reflect || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if ("function" == typeof Proxy)
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }(), function() {
              var t4, e3 = ve(n3);
              if (a2) {
                var i4 = ve(this).constructor;
                t4 = Reflect.construct(e3, arguments, i4);
              } else
                t4 = e3.apply(this, arguments);
              return pe(this, t4);
            });
            function o2(t4) {
              var e3;
              !function(t5, e4) {
                if (!(t5 instanceof e4))
                  throw new TypeError("Cannot call a class as a function");
              }(this, o2);
              var i4 = (e3 = s2.call(this, t4)).generateHash("avatar_container"), r3 = e3.generateHash("avatar_loader");
              return e3.onFileLoad = e3.onFileLoad.bind(me(e3)), e3.onCloseClick = e3.onCloseClick.bind(me(e3)), e3.state = { imgWidth: 0, imgHeight: 0, scale: 1, containerId: i4, loaderId: r3, lastMouseY: 0, showLoader: !(e3.props.src || e3.props.img) }, e3;
            }
            return i3 = o2, (r2 = [{ key: "generateHash", value: function(t4) {
              var e3 = function() {
                return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
              };
              return t4 + "-" + e3() + "-" + e3() + "-" + e3();
            } }, { key: "onCloseCallback", value: function() {
              this.props.onClose();
            } }, { key: "onCropCallback", value: function(t4) {
              this.props.onCrop(t4);
            } }, { key: "onFileLoadCallback", value: function(t4) {
              this.props.onFileLoad(t4);
            } }, { key: "onBeforeFileLoadCallback", value: function(t4) {
              this.props.onBeforeFileLoad(t4);
            } }, { key: "onImageLoadCallback", value: function(t4) {
              this.props.onImageLoad(t4);
            } }, { key: "componentDidMount", value: function() {
              var t4 = this;
              if (!this.state.showLoader) {
                var e3 = this.props.img || new Image();
                e3.crossOrigin = "Anonymous", !this.props.img && this.props.src && (e3.src = this.props.src), this.setState({ image: e3 }, function() {
                  if (t4.image.complete)
                    return t4.init();
                  t4.image.onload = function() {
                    t4.onImageLoadCallback(t4.image), t4.init();
                  };
                });
              }
            } }, { key: "componentDidUpdate", value: function(t4, e3) {
              t4.src !== this.props.src && (this.image.src = this.props.src);
            } }, { key: "onFileLoad", value: function(t4) {
              if (t4.preventDefault(), this.onBeforeFileLoadCallback(t4), t4.target.value) {
                var e3 = t4.target.files[0];
                this.onFileLoadCallback(e3);
                var i4 = this;
                re().getData(e3, function() {
                  var t5 = re().getTag(this, "Orientation");
                  ae()(e3, function(t6, r3) {
                    i4.setState({ image: t6, file: e3, showLoader: false }, function() {
                      i4.init();
                    });
                  }, { orientation: t5, meta: true });
                });
              }
            } }, { key: "onCloseClick", value: function() {
              var t4 = this;
              this.setState({ showLoader: true }, function() {
                return t4.onCloseCallback();
              });
            } }, { key: "init", value: function() {
              var t4, e3, i4 = this.props, r3 = i4.height, n4 = i4.minCropRadius, a3 = i4.cropRadius, s3 = this.image.width, o3 = this.image.height, h2 = o3 / s3, l2 = this.props, c2 = l2.imageWidth, d2 = l2.imageHeight;
              d2 && c2 && console.warn("The imageWidth and imageHeight properties can not be set together, using only imageWidth."), d2 && !c2 ? e3 = (t4 = d2 || o3) / h2 : c2 ? t4 = (e3 = c2) * h2 || o3 : e3 = (t4 = r3 || o3) / h2;
              var u2 = t4 / o3, g2 = Math.max(n4, a3 || Math.min(e3, t4) / 3);
              this.setState({ imgWidth: e3, imgHeight: t4, scale: u2, cropRadius: g2 }, this.initCanvas);
            } }, { key: "initCanvas", value: function() {
              var t4 = this, e3 = this.initStage(), i4 = this.initBackground(), r3 = this.initShading(), n4 = this.initCrop(), a3 = this.initCropStroke(), s3 = this.initResize(), o3 = this.initResizeIcon(), h2 = new ee.Layer();
              h2.add(i4), h2.add(r3), h2.add(a3), h2.add(n4), h2.add(s3), h2.add(o3), e3.add(h2);
              var l2 = function() {
                var t5 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                return n4.radius() - t5;
              }, c2 = function(t5) {
                return n4.x() - l2(t5) < 0;
              }, d2 = function(t5) {
                return n4.y() - l2(t5) < 0;
              }, u2 = function(t5) {
                return n4.x() + l2(t5) > e3.width();
              }, g2 = function(t5) {
                return n4.y() + l2(t5) > e3.height();
              }, f2 = function(e4) {
                return l2(e4) >= t4.minCropRadius ? e4 : n4.radius() - t4.minCropRadius;
              }, p2 = function(t5) {
                return t5 + 0.86 * n4.radius();
              }, m2 = function(t5) {
                return t5 - 0.5 * n4.radius();
              }, v2 = function(t5, e4) {
                s3.x(p2(t5) - 8), s3.y(m2(e4) - 8), o3.x(p2(t5) - 8), o3.y(m2(e4) - 10);
              }, y2 = function() {
                if (t4.props.exportAsSquare) {
                  var e4 = new ee.Image({ image: t4.image }), r4 = e4.width() / i4.width(), a4 = e4.height() / i4.height(), s4 = 2 * n4.radius() * r4, o4 = 2 * n4.radius() * a4, h3 = t4.props.exportSize ? t4.props.exportSize / s4 : void 0;
                  return e4.toDataURL({ x: (n4.x() - n4.radius()) * r4, y: (n4.y() - n4.radius()) * a4, width: s4, height: o4, pixelRatio: h3, mimeType: t4.props.exportMimeType, quality: t4.props.exportQuality });
                }
                var l3 = 2 * n4.radius(), c3 = 2 * n4.radius(), d3 = t4.props.exportSize ? t4.props.exportSize / l3 : void 0;
                return n4.toDataURL({ x: n4.x() - n4.radius(), y: n4.y() - n4.radius(), width: l3, height: c3, pixelRatio: d3, mimeType: t4.props.exportMimeType, quality: t4.props.exportQuality });
              }, b2 = function(t5) {
                var e4 = t5 > 0 || function(t6) {
                  return !(c2(t6) || u2(t6) || g2(t6) || d2(t6));
                }(t5) ? t5 : 0;
                a3.radius(a3.radius() - f2(e4)), n4.radius(n4.radius() - f2(e4)), s3.fire("resize");
              };
              this.onCropCallback(y2()), n4.on("dragmove", function() {
                return n4.fire("resize");
              }), n4.on("dragend", function() {
                return t4.onCropCallback(y2());
              }), n4.on("resize", function() {
                var i5 = c2() ? n4.radius() + 1 : u2() ? e3.width() - n4.radius() - 1 : n4.x(), r4 = d2() ? n4.radius() + 1 : g2() ? e3.height() - n4.radius() - 1 : n4.y();
                v2(i5, r4), n4.setFillPatternOffset({ x: i5 / t4.scale, y: r4 / t4.scale }), n4.x(i5), a3.x(i5), n4.y(r4), a3.y(r4);
              }), n4.on("mouseenter", function() {
                return e3.container().style.cursor = "move";
              }), n4.on("mouseleave", function() {
                return e3.container().style.cursor = "default";
              }), n4.on("dragstart", function() {
                return e3.container().style.cursor = "move";
              }), n4.on("dragend", function() {
                return e3.container().style.cursor = "default";
              }), s3.on("touchstart", function(e4) {
                s3.on("dragmove", function(i5) {
                  if ("touchmove" === i5.evt.type) {
                    var r4 = i5.evt.changedTouches[0].pageY - e4.evt.changedTouches[0].pageY || 0;
                    b2(r4 * t4.mobileScaleSpeed);
                  }
                });
              }), s3.on("dragmove", function(e4) {
                if ("touchmove" !== e4.evt.type) {
                  var i5 = e4.evt.y, r4 = i5 ? i5 - t4.state.lastMouseY : void 0, n5 = e4.evt.movementY || r4 || 0;
                  t4.setState({ lastMouseY: i5 }), b2(n5);
                }
              }), s3.on("dragend", function() {
                return t4.onCropCallback(y2());
              }), s3.on("resize", function() {
                return v2(n4.x(), n4.y());
              }), s3.on("mouseenter", function() {
                return e3.container().style.cursor = "nesw-resize";
              }), s3.on("mouseleave", function() {
                return e3.container().style.cursor = "default";
              }), s3.on("dragstart", function(i5) {
                t4.setState({ lastMouseY: i5.evt.y }), e3.container().style.cursor = "nesw-resize";
              }), s3.on("dragend", function() {
                return e3.container().style.cursor = "default";
              });
            } }, { key: "initStage", value: function() {
              return new ee.Stage({ container: this.containerId, width: this.width, height: this.height });
            } }, { key: "initBackground", value: function() {
              return new ee.Image({ x: 0, y: 0, width: this.width, height: this.height, image: this.image });
            } }, { key: "initShading", value: function() {
              return new ee.Rect({ x: 0, y: 0, width: this.width, height: this.height, fill: this.shadingColor, strokeWidth: 4, opacity: this.shadingOpacity });
            } }, { key: "initCrop", value: function() {
              return new ee.Circle({ x: this.halfWidth, y: this.halfHeight, radius: this.cropRadius, fillPatternImage: this.image, fillPatternOffset: { x: this.halfWidth / this.scale, y: this.halfHeight / this.scale }, fillPatternScale: { x: this.scale, y: this.scale }, opacity: 1, draggable: true, dashEnabled: true, dash: [10, 5] });
            } }, { key: "initCropStroke", value: function() {
              return new ee.Circle({ x: this.halfWidth, y: this.halfHeight, radius: this.cropRadius, stroke: this.cropColor, strokeWidth: this.lineWidth, strokeScaleEnabled: true, dashEnabled: true, dash: [10, 5] });
            } }, { key: "initResize", value: function() {
              return new ee.Rect({ x: this.halfWidth + 0.86 * this.cropRadius - 8, y: this.halfHeight + -0.5 * this.cropRadius - 8, width: 16, height: 16, draggable: true, dragBoundFunc: function(t4) {
                return { x: this.getAbsolutePosition().x, y: t4.y };
              } });
            } }, { key: "initResizeIcon", value: function() {
              return new ee.Path({ x: this.halfWidth + 0.86 * this.cropRadius - 8, y: this.halfHeight + -0.5 * this.cropRadius - 10, data: "M47.624,0.124l12.021,9.73L44.5,24.5l10,10l14.661-15.161l9.963,12.285v-31.5H47.624z M24.5,44.5   L9.847,59.653L0,47.5V79h31.5l-12.153-9.847L34.5,54.5L24.5,44.5z", fill: this.cropColor, scale: { x: 0.2, y: 0.2 } });
            } }, { key: "render", value: function() {
              var t4 = this, i4 = this.props, r3 = i4.width, n4 = i4.height, a3 = { display: "flex", justifyContent: "center", backgroundColor: this.backgroundColor, width: r3 || this.width, position: "relative" }, s3 = this.props.label, o3 = ue(ue({}, this.props.labelStyle), { lineHeight: (n4 || 200) + "px" }), h2 = ue(ue({}, this.props.borderStyle), { width: r3 || 200, height: n4 || 200 });
              return e2().createElement("div", null, this.state.showLoader ? e2().createElement("div", { style: h2 }, e2().createElement("input", { onChange: function(e3) {
                return t4.onFileLoad(e3);
              }, name: this.loaderId, type: "file", id: this.loaderId, style: { width: 0.1, height: 0.1, opacity: 0, overflow: "hidden", position: "absolute", zIndex: -1 }, accept: this.mimeTypes }), e2().createElement("label", { htmlFor: this.loaderId, style: o3 }, s3)) : e2().createElement("div", { style: a3 }, e2().createElement("svg", { onClick: this.onCloseClick, style: { position: "absolute", zIndex: 999, cursor: "pointer", left: "10px", top: "10px" }, viewBox: "0 0 475.2 475.2", width: "20px", height: "20px" }, e2().createElement("g", null, e2().createElement("path", { d: "M405.6,69.6C360.7,24.7,301.1,0,237.6,0s-123.1,24.7-168,69.6S0,174.1,0,237.6s24.7,123.1,69.6,168s104.5,69.6,168,69.6    s123.1-24.7,168-69.6s69.6-104.5,69.6-168S450.5,114.5,405.6,69.6z M386.5,386.5c-39.8,39.8-92.7,61.7-148.9,61.7    s-109.1-21.9-148.9-61.7c-82.1-82.1-82.1-215.7,0-297.8C128.5,48.9,181.4,27,237.6,27s109.1,21.9,148.9,61.7    C468.6,170.8,468.6,304.4,386.5,386.5z", fill: this.closeIconColor }), e2().createElement("path", { d: "M342.3,132.9c-5.3-5.3-13.8-5.3-19.1,0l-85.6,85.6L152,132.9c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1    l85.6,85.6l-85.6,85.6c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.6-85.6l85.6,85.6c2.6,2.6,6.1,4,9.5,4    c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.4-85.6l85.6-85.6C347.6,146.7,347.6,138.2,342.3,132.9z", fill: this.closeIconColor }))), e2().createElement("div", { id: this.containerId })));
            } }, { key: "lineWidth", get: function() {
              return this.props.lineWidth;
            } }, { key: "containerId", get: function() {
              return this.state.containerId;
            } }, { key: "closeIconColor", get: function() {
              return this.props.closeIconColor;
            } }, { key: "cropColor", get: function() {
              return this.props.cropColor;
            } }, { key: "loaderId", get: function() {
              return this.state.loaderId;
            } }, { key: "mimeTypes", get: function() {
              return this.props.mimeTypes;
            } }, { key: "backgroundColor", get: function() {
              return this.props.backgroundColor;
            } }, { key: "shadingColor", get: function() {
              return this.props.shadingColor;
            } }, { key: "shadingOpacity", get: function() {
              return this.props.shadingOpacity;
            } }, { key: "mobileScaleSpeed", get: function() {
              return this.props.mobileScaleSpeed;
            } }, { key: "cropRadius", get: function() {
              return this.state.cropRadius;
            } }, { key: "minCropRadius", get: function() {
              return this.props.minCropRadius;
            } }, { key: "scale", get: function() {
              return this.state.scale;
            } }, { key: "width", get: function() {
              return this.state.imgWidth;
            } }, { key: "halfWidth", get: function() {
              return this.state.imgWidth / 2;
            } }, { key: "height", get: function() {
              return this.state.imgHeight;
            } }, { key: "halfHeight", get: function() {
              return this.state.imgHeight / 2;
            } }, { key: "image", get: function() {
              return this.state.image;
            } }]) && ge(i3.prototype, r2), o2;
          }(e2().Component);
          ye(be, "defaultProps", { shadingColor: "grey", shadingOpacity: 0.6, cropColor: "white", closeIconColor: "white", lineWidth: 4, minCropRadius: 30, backgroundColor: "grey", mimeTypes: "image/jpeg,image/png", exportAsSquare: false, exportSize: void 0, exportMimeType: "image/png", exportQuality: 1, mobileScaleSpeed: 0.5, onClose: function() {
          }, onCrop: function() {
          }, onFileLoad: function() {
          }, onImageLoad: function() {
          }, onBeforeFileLoad: function() {
          }, label: "Choose a file", labelStyle: { fontSize: "1.25em", fontWeight: "700", color: "black", display: "inline-block", fontFamily: "sans-serif", cursor: "pointer" }, borderStyle: { border: "2px solid #979797", borderStyle: "dashed", borderRadius: "8px", textAlign: "center" } });
          const Ce = be;
        })(), a;
      })();
    });
  }
});
export default require_react_avatar();
//# sourceMappingURL=react-avatar-edit.js.map
